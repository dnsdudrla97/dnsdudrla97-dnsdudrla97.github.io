{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/arm-1/",
    "result": {"data":{"cur":{"id":"b8ba7110-bd58-55fc-9b7d-e2fd22b2ff00","html":"<h1 id=\"arm-instruction-layout\" style=\"position:relative;\"><a href=\"#arm-instruction-layout\" aria-label=\"arm instruction layout permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM Instruction Layout</h1>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token punctuation\">{</span>\n\tlabel\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span>\n\tinstruction\n<span class=\"token operator\">|</span>\n\tdirective\n<span class=\"token operator\">|</span>\npseudo<span class=\"token operator\">-</span>instruction\n<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">;</span> comment<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>label이 없더라도 명령어, 의사 명령어 및 지시어에는 공간이나 탭과 같은 공백이 선행되어야 한다.</li>\n</ul>\n<h3 id=\"case-rule\" style=\"position:relative;\"><a href=\"#case-rule\" aria-label=\"case rule permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CASE Rule</h3>\n<ul>\n<li>명령어, 지시문 및 기호 레지스터 이름은 대문자 또는 소문자로 쓸 수 는 있지만 혼합 불가</li>\n</ul>\n<h3 id=\"line-length\" style=\"position:relative;\"><a href=\"#line-length\" aria-label=\"line length permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Line Length</h3>\n<ul>\n<li>Line이 길면 <code class=\"language-text\">\\</code> 백 슬래시 문자를 바탕으로 여러 line으로 나누기 가능</li>\n<li>백슬래시 뒤에는 다른 문자가 올 수 었다.</li>\n</ul>\n<h3 id=\"label\" style=\"position:relative;\"><a href=\"#label\" aria-label=\"label permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Label</h3>\n<ul>\n<li>주소를 나타내는 기호이다.</li>\n<li>레이블에 지정된 주소는 assembly 중에 계산된다.</li>\n<li>어셈블러는 레이블이 정의 된 섹션의 원점을 기준으로 레이블의 주소를 계산한다.</li>\n<li>동일한 섹션 내의 레이블에 대한 참조는 오프셋을 더하거나 뺀 프로그램 카운터를 사용할 수 있으며 이를 프로그램 기준 주소 지정이라고 한다.</li>\n</ul>\n<h3 id=\"local-label\" style=\"position:relative;\"><a href=\"#local-label\" aria-label=\"local label permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Local Label</h3>\n<ul>\n<li>지역 레이블은 레이블의 하위 클래스이다.</li>\n<li>지역 레이블은 0-99 범위의 숫자로 시작한다.</li>\n<li>다른 레이블과 달리 로컬 레이블은 여러 번 정의할 수 있다.</li>\n<li>지역 레이블은 매크로를 사용하여 레이블을 생성할 때 유리하다.</li>\n<li>어셈블러는 로컬 레이블에 대한 참조를 찾으면 해당 참조를 로컬 레이블의 가까운 인스턴스에 연결한다.</li>\n</ul>\n<h3 id=\"comment\" style=\"position:relative;\"><a href=\"#comment\" aria-label=\"comment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Comment</h3>\n<ul>\n<li>줄의 첫 번째 세미클론은 세미클론이 문자열 상수 내부에 나타나는 경우를 제외하고 주석의 시작을 표시한다.</li>\n<li>줄의 끝은 주석의 끝이다.</li>\n<li>주석 만 유효한 줄이다.</li>\n<li>어셈블러는 모든 주석을 무시한다.</li>\n</ul>\n<h3 id=\"arm-instruction-format\" style=\"position:relative;\"><a href=\"#arm-instruction-format\" aria-label=\"arm instruction format permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM Instruction Format</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADR0lEQVQoz03Ra2xTdRzG8b8RHaGI0XSX7kaAjW0w0UlK17KznvV6Lj2ja0s3W9gqkyHSOBMYJka2aBRpDCqSqLyThYuJm0twNTJlMw1G18toR3Eb8ZJgNHW1a6IkOE7PecwZkvjik+fd98XvR4pUtRcq1+uWPZ3PZ6ysP0ubvVnX7r5F2uxdVD1av7RuXc1TFWsbiOmB7YQ8VLl323bmn319A5mWNk+2scmWFVy9Wadnf6aZ6lh+cM3GI0RdRsXKq613Gho7crX1Qn5zQ3u+fqszX1PnWCotN91+TEOdER7euBqq84/Qj7edra4yLW+pc+RqN/H5DdW2/OZNfH5LnbBUV8PdLiulrhIjfTbPstMwmycli/WbeyxTksUyWWC4GGht6O9LpKkJhK14of5Y2klNwNN2WRwKfiu9elBxVTrovSLtoqYKnPYMiMky+qfgSMNuj8uMPQGbLQGGmQHLxiVeuIFntB/eepcQFXwgWu2bUx32ODrYeGGfL4lu7zUEupLo3BWHk5mFvXVEIrxhOOdlEgi4p+WAOyrv74rLPa6ovJv7TvLZ4nA3DN0ihKgiANHpQxFemAHDxQpWe0y2MTFZWTsblXnhukybR2XipoZzfmcKr72cll95KY3Q0DwGD6fxnD8h+fgk2p8+vhK8A5AduhMRnkuAZWMFjo3jPpaNgudnQbeNgriET3Mn3/gFxwd/kAcHbkDx3ls38fbrc9KxIz+BMb+vBNdmMkowFOG4lXMU2JXQfUrw+r0gw43k/HvnsKc7Kfv2pODzp9AdmIW3a0Y6FPwRL/af+5UQUvTXHyC65hMRQUiAZaIFholCocSUpwqOFEzmERCrdWyxvX0BHJcUeX52BcelRJ5L3nXw83C5Lvw2/f3FxtMfrCky0ienOr1zCATml/v6boq9vQvis4EFsadnTvT7fxZZLiwSXfPpu63GcbRQn4GixtBCjf23ozDSX+CJJwfzhwfYCuD39S7PO/M2+yUcCn6Fo0cn0d//NQ4cmEAwOAG3ewKtxo9A1GW6T0o0hi+LNfrxYo0+/D/jJRrDZXXpjo8JIatOnRomVRtaQhXVO68Ua/Sfq0v1YXWZPqypNIRLyg1hTeXOcHmVPvwvE2y5YwwkMRkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./ARM-BL.png\"\n        title=\"./ARM-BL.png\"\n        src=\"/static/3b432998e0387524dd176c2faab80b43/37523/ARM-BL.png\"\n        srcset=\"/static/3b432998e0387524dd176c2faab80b43/e9ff0/ARM-BL.png 180w,\n/static/3b432998e0387524dd176c2faab80b43/f21e7/ARM-BL.png 360w,\n/static/3b432998e0387524dd176c2faab80b43/37523/ARM-BL.png 720w,\n/static/3b432998e0387524dd176c2faab80b43/302a4/ARM-BL.png 1080w,\n/static/3b432998e0387524dd176c2faab80b43/58354/ARM-BL.png 1396w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">AREA     ARMtest<span class=\"token punctuation\">,</span> CODE<span class=\"token punctuation\">,</span> READONLY\n                                <span class=\"token punctuation\">;</span> 해당 code block의 이름을 ARMtest 지정\n        ENTRY                   <span class=\"token punctuation\">;</span> 실행할 첫 번째 명령 표시\nstart\n        MOV      r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">10</span>        <span class=\"token punctuation\">;</span> 파라미터 설정\n        MOV      r1<span class=\"token punctuation\">,</span> #<span class=\"token number\">3</span>\n        ADD      r0<span class=\"token punctuation\">,</span> r0<span class=\"token punctuation\">,</span> r1     <span class=\"token punctuation\">;</span> r0 <span class=\"token operator\">=</span> r0 <span class=\"token operator\">+</span> r1\nstop\n        MOV      r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0x18</span>      <span class=\"token punctuation\">;</span> angel_SWIreason_ReportException\n        LDR      r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x20026</span>   <span class=\"token punctuation\">;</span> ADP_Stopped_ApplicationExit\n        SWI      <span class=\"token number\">0x123456</span>       <span class=\"token punctuation\">;</span> ARM semihosting SWI\n        END                     <span class=\"token punctuation\">;</span> Mark end of file</code></pre></div>\n<h3 id=\"elf-세션-및-area-instruction\" style=\"position:relative;\"><a href=\"#elf-%EC%84%B8%EC%85%98-%EB%B0%8F-area-instruction\" aria-label=\"elf 세션 및 area instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ELF 세션 및 AREA Instruction</h3>\n<ul>\n<li>\n<p>ELF 섹션은 코드, 데이터의 독립적이고 명명된 분할 불가능한 시퀸스이다.</p>\n</li>\n<li>\n<p>단일 코드 섹션은 애플리케이션을 생성하는데 필요하다.</p>\n</li>\n<li>\n<p>어셈블리 또는 컴파일의 출력에 다음이 포함될 수 있다.</p>\n<ul>\n<li>하나 이상의 코드 섹션, 일반적으로 읽기 전용 섹션</li>\n<li>하나 이상의 데이터 섹션, 일반적으로 읽기-쓰기 섹션, 0으로 초기화 될 수 있다.</li>\n</ul>\n</li>\n<li>\n<p>링커는 섹션 배치 규칙에 따라 프로그램 이미지에 각 섹션을 배치한다.</p>\n</li>\n<li>\n<p>소스 파일에서 인접한 섹션이 응용 프로그램 이미지에서 반드시 인접한 것은 아니다.</p>\n</li>\n<li>\n<p>ARM 어셈블리 언어 소스 파일에서 섹션의 시작은 <code class=\"language-text\">AREA</code> 지시문으로 표시된다.</p>\n</li>\n<li>\n<p>해당 지시문은 섹션의 이름을 지정하고 해당 속성을 설정한다.</p>\n</li>\n<li>\n<p>속성은 쉼표로 구분 된 이름 뒤에 배치된다.</p>\n</li>\n</ul>\n<h3 id=\"entry-instruction\" style=\"position:relative;\"><a href=\"#entry-instruction\" aria-label=\"entry instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Entry Instruction</h3>\n<ul>\n<li>실행할 첫 번째 명령을 표시</li>\n<li>C 코드를 포함하는 응용 프로그램에서 진입 점은 C 라이브러리 초기화 코드에도 포함된다.</li>\n<li>초기화 코드 및 예외 처리기에도 진입 점이 포함된다.</li>\n</ul>\n<h3 id=\"application-start\" style=\"position:relative;\"><a href=\"#application-start\" aria-label=\"application start permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Application Start</h3>\n<ul>\n<li><code class=\"language-text\">start</code> label 실행을 시작</li>\n<li>여기서 10 진수 값과 10과, 3을 레지스터 r0, r1레 로드한다.</li>\n<li>이러한 레지스터는 함께 추가되고 결과는 r0에 배치된다.</li>\n</ul>\n<h3 id=\"application-terminate\" style=\"position:relative;\"><a href=\"#application-terminate\" aria-label=\"application terminate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Application Terminate</h3>\n<ul>\n<li>기본 코드를 실행 한 후 응용 프로그램은 디버거에 제어를 반환하여 종료된다.</li>\n<li>해당 작업은 다음 매개 변수와 함께 ARM 세미 호스트 SWI()를 사용하여 수행된다.</li>\n</ul>\n<h3 id=\"end-instruction\" style=\"position:relative;\"><a href=\"#end-instruction\" aria-label=\"end instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>END Instruction</h3>\n<ul>\n<li>해당 지시문은 이 소스 파일 처리 중지하도록 어셈블러에 지시하며 모든 어셈 블리 언어 소스 모듈은 END 한줄에 지시문으로 끝나야 한다.</li>\n</ul>\n<h2 id=\"calling-subroutines\" style=\"position:relative;\"><a href=\"#calling-subroutines\" aria-label=\"calling subroutines permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calling subroutines</h2>\n<ul>\n<li>서브 루틴을 호출하려면 분기 및 링크 명령어를 사용한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">BL destination</code></pre></div>\n<ul>\n<li><code class=\"language-text\">destination</code> 일반적으로 서브 루틴의 첫 번째 명령어에 있는 레이블은 어디에 있나?</li>\n<li><code class=\"language-text\">destination</code> 프로그램 기준 또는 레지스터 기준 식일 수도 있다.</li>\n</ul>\n<h2 id=\"branch-instruction\" style=\"position:relative;\"><a href=\"#branch-instruction\" aria-label=\"branch instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Branch Instruction</h2>\n<h3 id=\"b-branch--jump\" style=\"position:relative;\"><a href=\"#b-branch--jump\" aria-label=\"b branch  jump permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>B (Branch == Jump)</h3>\n<h3 id=\"bl-instruction\" style=\"position:relative;\"><a href=\"#bl-instruction\" aria-label=\"bl instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BL Instruction</h3>\n<ul>\n<li>링크 레지스터 r14 (lr) 에 반환 주소를 배치한다.</li>\n<li>PC를 서브 루틴의 주소로 설정한다.</li>\n</ul>\n<h3 id=\"bx-branch-and-exchange\" style=\"position:relative;\"><a href=\"#bx-branch-and-exchange\" aria-label=\"bx branch and exchange permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BX (Branch and Exchange)</h3>\n<h3 id=\"blx-branch-with-link-and-exchange\" style=\"position:relative;\"><a href=\"#blx-branch-with-link-and-exchange\" aria-label=\"blx branch with link and exchange permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BLX (Branch with Link and Exchange)</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">Branch <span class=\"token operator\">:</span> B<span class=\"token punctuation\">{</span><span class=\"token operator\">&lt;</span>cond<span class=\"token operator\">></span><span class=\"token punctuation\">}</span> label\nBranch with Link <span class=\"token operator\">:</span> BL<span class=\"token punctuation\">{</span><span class=\"token operator\">&lt;</span>Cond<span class=\"token operator\">></span><span class=\"token punctuation\">}</span> sub routine label</code></pre></div>\n<ul>\n<li>서브 루틴 코드가 실행된 후 명령을 사용하여 반환 할 수 있다.</li>\n<li>규칙에 따라 레지스터 r0 ~ r3 매개 변수를 서브 루틴에 전달하고 결과를 호출자에게 다시 전달하는 데 사용한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">MOV pc<span class=\"token punctuation\">,</span> lr</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">AREA    subRoutTest<span class=\"token punctuation\">,</span> CODE<span class=\"token punctuation\">,</span> READONLY\n                   \n        ENTRY                     \nstart   MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">10</span>           \n        MOV     r1<span class=\"token punctuation\">,</span> #<span class=\"token number\">3</span>\n        BL      apple             <span class=\"token punctuation\">;</span> Call subroutine\nstop    MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0x18</span>         <span class=\"token punctuation\">;</span> angel_SWIreason_ReportException\n        LDR     r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x20026</span>      <span class=\"token punctuation\">;</span> ADP_Stopped_ApplicationExit\n        SWI     <span class=\"token number\">0x123456</span>          <span class=\"token punctuation\">;</span> ARM semihosting SWI\napple   ADD     r0<span class=\"token punctuation\">,</span> r0<span class=\"token punctuation\">,</span> r1        <span class=\"token punctuation\">;</span> Subroutine code\n        MOV     pc<span class=\"token punctuation\">,</span> lr            <span class=\"token punctuation\">;</span> Return from subroutine\n        END                       <span class=\"token punctuation\">;</span> Mark end of file</code></pre></div>\n<h2 id=\"thumb-and-arm-assembly\" style=\"position:relative;\"><a href=\"#thumb-and-arm-assembly\" aria-label=\"thumb and arm assembly permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thumb and ARM assembly</h2>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">AREA ThumbArm<span class=\"token punctuation\">,</span> CODE<span class=\"token punctuation\">,</span> READONLY           \n        ENTRY                           \n        CODE32                          <span class=\"token punctuation\">;</span> 후속 명령어는 ARM이다<span class=\"token punctuation\">.</span>\nheader  ADR     r0<span class=\"token punctuation\">,</span> start <span class=\"token operator\">+</span> <span class=\"token number\">1</span>           <span class=\"token punctuation\">;</span> 프로세서는 ARM 상태에서 시작된다<span class=\"token punctuation\">.</span>\n        BX      r0                      <span class=\"token punctuation\">;</span> 너무 작은 ARM 코드 헤더가 사용되었다<span class=\"token punctuation\">.</span>\n                                        <span class=\"token punctuation\">;</span> Thumb 메인 프로그램 호출\n        CODE16                          <span class=\"token punctuation\">;</span> 후속 명령어는 Thumb이다<span class=\"token punctuation\">.</span>\nstart\n        MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">10</span>                 \n        MOV     r1<span class=\"token punctuation\">,</span> #<span class=\"token number\">3</span>\n        BL      apple                   \nstop\n        MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0x18</span>               <span class=\"token punctuation\">;</span> angel_SWIreason_ReportException\n        LDR     r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x20026</span>            <span class=\"token punctuation\">;</span> ADP_Stopped_ApplicationExit\n        SWI     <span class=\"token number\">0xAB</span>                    <span class=\"token punctuation\">;</span> Thumb semihosting SWI\napple\n        ADD     r0<span class=\"token punctuation\">,</span> r0<span class=\"token punctuation\">,</span> r1              <span class=\"token punctuation\">;</span> Subroutine code\n        MOV     pc<span class=\"token punctuation\">,</span> lr                  <span class=\"token punctuation\">;</span> Return from subroutine\n        END                             <span class=\"token punctuation\">;</span> Mark end of file</code></pre></div>\n<h3 id=\"code32-and-code16-instruction\" style=\"position:relative;\"><a href=\"#code32-and-code16-instruction\" aria-label=\"code32 and code16 instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CODE32 and CODE16 Instruction</h3>\n<ul>\n<li>ARM(CODE32), Thumb(CODE16) 명령어로 어셈블하도록 지시한다.</li>\n<li>런타임에 프로세서 상태를 변경하는 명령어로 어셈블되지 않는다.</li>\n<li>어셈블러 상태만 변경한다.</li>\n</ul>\n<h3 id=\"bx-instruction\" style=\"position:relative;\"><a href=\"#bx-instruction\" aria-label=\"bx instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BX Instruction</h3>\n<ul>\n<li>런타임 프로세서 상태를 변경할 수 있는 분기</li>\n<li>대상 주소의 최하위 비트는 ARM, Thumb 명령어인지를 구분한다.</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<ul>\n<li><a href=\"#case-rule\">CASE Rule</a></li>\n<li><a href=\"#line-length\">Line Length</a></li>\n<li><a href=\"#label\">Label</a></li>\n<li><a href=\"#local-label\">Local Label</a></li>\n<li><a href=\"#comment\">Comment</a></li>\n<li><a href=\"#arm-instruction-format\">ARM Instruction Format</a></li>\n<li><a href=\"#elf-%EC%84%B8%EC%85%98-%EB%B0%8F-area-instruction\">ELF 세션 및 AREA Instruction</a></li>\n<li><a href=\"#entry-instruction\">Entry Instruction</a></li>\n<li><a href=\"#application-start\">Application Start</a></li>\n<li><a href=\"#application-terminate\">Application Terminate</a></li>\n<li><a href=\"#end-instruction\">END Instruction</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#calling-subroutines\">Calling subroutines</a></p>\n</li>\n<li>\n<p><a href=\"#branch-instruction\">Branch Instruction</a></p>\n<ul>\n<li><a href=\"#b-branch--jump\">B (Branch == Jump)</a></li>\n<li><a href=\"#bl-instruction\">BL Instruction</a></li>\n<li><a href=\"#bx-branch-and-exchange\">BX (Branch and Exchange)</a></li>\n<li><a href=\"#blx-branch-with-link-and-exchange\">BLX (Branch with Link and Exchange)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#thumb-and-arm-assembly\">Thumb and ARM assembly</a></p>\n<ul>\n<li><a href=\"#code32-and-code16-instruction\">CODE32 and CODE16 Instruction</a></li>\n<li><a href=\"#bx-instruction\">BX Instruction</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"ARM Instruction Layout label이 없더라도 명령어, 의사 명령어 및 지시어에는 공간이나 탭과 같은 공백이 선행되어야 한다. CASE Rule 명령어, 지시문 및 기호 레지스터 이름은 대문자 또는 소문자로 쓸 수 는 있지만 혼합 불가 Line Length Line이 길면  백 슬래시 문자를 바탕으로 여러 line으로 나누기 가능 백슬래시 뒤에는 다른 문자가 올 수 었다. Label 주소를 나타내는 기호이다. 레이블에 지정된 주소는 assembly 중에 계산된다. 어셈블러는 레이블이 정의 된 섹션의 원점을 기준으로 레이블의 주소를 계산한다. 동일한 섹션 내의 레이블에 대한 참조는 오프셋을 더하거나 뺀 프로그램 카운터를 사용할 수 있으며 이를 프로그램 기준 주소 지정이라고 한다. Local Label 지역 레이블은 레이블의 하위 클래스이다. 지역 레이블은 0-99 범위의 숫자로 시작한다. 다른 레이블과 달리 로컬 레이블은 여러 번 정의할 수 있다. 지역 레이블은 매크…","frontmatter":{"date":"February 09, 2021","title":"ARM Assembly 1","categories":"ARM","author":"Zer0Luck","emoji":"☕"},"fields":{"slug":"/arm-1/"}},"next":{"id":"c815f14e-ef2b-5028-8e13-3ac996822daa","html":"<h1 id=\"thread-local-storage-tls\" style=\"position:relative;\"><a href=\"#thread-local-storage-tls\" aria-label=\"thread local storage tls permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thread Local Storage (TLS)</h1>\n<ul>\n<li>프로세스의 모든 스레드는 가상 주소 공간을 공유한다.</li>\n<li>함수의 지역 변수는 함수를 실행하는 각 스레드에 공유한다.</li>\n<li>정적 및 전역 변수는 프로세스의 모든 스레드에서 공유된다.</li>\n<li>즉, 스레드 별로 독립된 데이터 저장 공간이며 스레드 내에서 프로세스의 전역(Global) 데이터나 정적(static) 데이터를 마치 지역(Local) 데이터 처럼 독립적으로 취급하고 싶을 때 사용한다.</li>\n</ul>\n<p><a href=\"http://msdn.microsoft.com/en-us/library/ms686749(VS.85),aspx\"></a></p>\n<h3 id=\"image_data_directory9\" style=\"position:relative;\"><a href=\"#image_data_directory9\" aria-label=\"image_data_directory9 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IMAGE_DATA_DIRECTORY[9]</h3>\n<ul>\n<li>PE 헤더의 TLS Table 항목이 세팅된다.</li>\n<li>IMAGE_NT_HEADERS - IMAGE_OPTIONAL_HEADER - IMAGE_DATA_DIRECTORY[9]</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABH0lEQVQY03WO20rDQBRF8/9/IeIFQRR80zcFLU2TTFKENplOMjknE01rbWPmFmsjrYii7WI9bdjs7URhROmEsdT3fMTCGGOttW2rlEIoRCG01nYPTuD541FME9rv9bM001p/9WXTICDksFgsrbVmFw4JSMpSSunA9XjGv5etVqrAAnKYzV7att29HBGSxAmbsDCMGGN1Xcstb3UNOQBAWZZyD84wGtKE8jQLSQSAP7elREAhSiHKaTXdfdvzgjimSTJxXS/jeaO01EYaWzcSUQCKajaXymzCfzqjMBCcQUofB/2q4B/rtuveu261XpllVb4+4Vzkzfx5G/7VObwhJ3fj49v44Jqc3bMLUl2G042kuvLx3IWjB37ay3/yX34CADW01zVfHdMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./0.png\"\n        title=\"./0.png\"\n        src=\"/static/951b7d99cad673b600e2b007c4632544/37523/0.png\"\n        srcset=\"/static/951b7d99cad673b600e2b007c4632544/e9ff0/0.png 180w,\n/static/951b7d99cad673b600e2b007c4632544/f21e7/0.png 360w,\n/static/951b7d99cad673b600e2b007c4632544/37523/0.png 720w,\n/static/951b7d99cad673b600e2b007c4632544/02cd5/0.png 821w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>{: width=“65%” height=“65%“}</p>\n<ul>\n<li>RVA 01AAF3A0 주소에는 IMAGE_TLS_DIRECTORY 구조체가 있다.</li>\n</ul>\n<h3 id=\"image_tls_directory\" style=\"position:relative;\"><a href=\"#image_tls_directory\" aria-label=\"image_tls_directory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IMAGE_TLS_DIRECTORY</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_IMAGE_TLS_DIRECTORY64</span> <span class=\"token punctuation\">{</span>\n    ULONGLONG StartAddressOfRawData<span class=\"token punctuation\">;</span>\n    ULONGLONG EndAddressOfRawData<span class=\"token punctuation\">;</span>\n    ULONGLONG AddressOfIndex<span class=\"token punctuation\">;</span>         <span class=\"token comment\">// PDWORD</span>\n    ULONGLONG AddressOfCallBacks<span class=\"token punctuation\">;</span>     <span class=\"token comment\">// PIMAGE_TLS_CALLBACK *;</span>\n    DWORD SizeOfZeroFill<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">union</span> <span class=\"token punctuation\">{</span>\n        DWORD Characteristics<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">struct</span> <span class=\"token punctuation\">{</span>\n            DWORD Reserved0 <span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n            DWORD Alignment <span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n            DWORD Reserved1 <span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> DUMMYSTRUCTNAME<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> DUMMYUNIONNAME<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span> IMAGE_TLS_DIRECTORY64<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">typedef</span> IMAGE_TLS_DIRECTORY64 <span class=\"token operator\">*</span> PIMAGE_TLS_DIRECTORY64<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_IMAGE_TLS_DIRECTORY32</span> <span class=\"token punctuation\">{</span>\n    DWORD   StartAddressOfRawData<span class=\"token punctuation\">;</span>\n    DWORD   EndAddressOfRawData<span class=\"token punctuation\">;</span>\n    DWORD   AddressOfIndex<span class=\"token punctuation\">;</span>             <span class=\"token comment\">// PDWORD</span>\n    DWORD   AddressOfCallBacks<span class=\"token punctuation\">;</span>         <span class=\"token comment\">// PIMAGE_TLS_CALLBACK *</span>\n    DWORD   SizeOfZeroFill<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">union</span> <span class=\"token punctuation\">{</span>\n        DWORD Characteristics<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">struct</span> <span class=\"token punctuation\">{</span>\n            DWORD Reserved0 <span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n            DWORD Alignment <span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n            DWORD Reserved1 <span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> DUMMYSTRUCTNAME<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> DUMMYUNIONNAME<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span> IMAGE_TLS_DIRECTORY32<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> IMAGE_TLS_DIRECTORY32 <span class=\"token operator\">*</span> PIMAGE_TLS_DIRECTORY32<span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifdef</span> <span class=\"token expression\">_WIN64</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">IMAGE_ORDINAL_FLAG</span>              <span class=\"token expression\">IMAGE_ORDINAL_FLAG64</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">IMAGE_ORDINAL</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span>          <span class=\"token function\">IMAGE_ORDINAL64</span><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span></span></span>\n<span class=\"token keyword\">typedef</span> IMAGE_THUNK_DATA64              IMAGE_THUNK_DATA<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> PIMAGE_THUNK_DATA64             PIMAGE_THUNK_DATA<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">IMAGE_SNAP_BY_ORDINAL</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span>  <span class=\"token function\">IMAGE_SNAP_BY_ORDINAL64</span><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span></span></span>\n<span class=\"token keyword\">typedef</span> IMAGE_TLS_DIRECTORY64           IMAGE_TLS_DIRECTORY<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> PIMAGE_TLS_DIRECTORY64          PIMAGE_TLS_DIRECTORY<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">else</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">IMAGE_ORDINAL_FLAG</span>              <span class=\"token expression\">IMAGE_ORDINAL_FLAG32</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">IMAGE_ORDINAL</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span>          <span class=\"token function\">IMAGE_ORDINAL32</span><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span></span></span>\n<span class=\"token keyword\">typedef</span> IMAGE_THUNK_DATA32              IMAGE_THUNK_DATA<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> PIMAGE_THUNK_DATA32             PIMAGE_THUNK_DATA<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">IMAGE_SNAP_BY_ORDINAL</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span>  <span class=\"token function\">IMAGE_SNAP_BY_ORDINAL32</span><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span></span></span>\n<span class=\"token keyword\">typedef</span> IMAGE_TLS_DIRECTORY32           IMAGE_TLS_DIRECTORY<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> PIMAGE_TLS_DIRECTORY32          PIMAGE_TLS_DIRECTORY<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span></code></pre></div>\n<ul>\n<li>IMAGE_TLS_DIRECTORY 구조체는 x86/x64 bit로 설계되어 있다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9ElEQVQY033PUUvDMBAH8Hz/ryEoE9tVBlqf9+xEtzpZW6attKRZlibXmqYuuaHDsQ3193BwHHd/jlxcng3888FV4F/fDEfhbXgXhmEQBJ7n+d+Gh4Kv4v0gK1Gm70nFFVuD+vjEYwCNWAtoQAjBKial1FobY5x1iEg4Wy3TV0S0duMOWGsRMc/zh8kkjpOnx2k0nUWziHPe933XdcYYwhiL41QpwN9QSvMsrypWFmVRFHUtEXEfQEDBYj4vsjeQom3bXeCOtZZSum+dcyenSS2VN45G99n4pTL90c/WWs45/o1orZ8Xy3mSNd3mZOacA4B/lrdg+oIEw1W7fAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./1.png\"\n        title=\"./1.png\"\n        src=\"/static/047eb756a6e49b68888846fb2d4bde8e/37523/1.png\"\n        srcset=\"/static/047eb756a6e49b68888846fb2d4bde8e/e9ff0/1.png 180w,\n/static/047eb756a6e49b68888846fb2d4bde8e/f21e7/1.png 360w,\n/static/047eb756a6e49b68888846fb2d4bde8e/37523/1.png 720w,\n/static/047eb756a6e49b68888846fb2d4bde8e/47aef/1.png 1063w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>RVA 01AAF3A0 해당 위치에 구조체 멤버를 확인해보겠다.</li>\n<li><code class=\"language-text\">AddressOfCallbacks</code> 멤버는 TLS 콜백 함수 주소 (VA 형태) 배열을 가리키며 배열의 끝은 NULL로 표시한다.</li>\n<li>프로그램에 TLS Call Back Function 를 여러 개등록할 수 있다.</li>\n<li>프로세스가 시작될 때 Entry Point 코드 실행 전에 시스템에서 AddressOfCallback 의 배열에 저장된 함수를 하나씩 호출한다.</li>\n</ul>\n<h3 id=\"tls-call-back-function\" style=\"position:relative;\"><a href=\"#tls-call-back-function\" aria-label=\"tls call back function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TLS Call Back Function</h3>\n<ul>\n<li>리버싱 분야에서 Anti-Debugging 기법으로 주로 많이 사용된다.</li>\n<li>TLS Call Back Function은 EP(Entry-Point) 보다 먼저 실행되는 특징을 가지고 있다.</li>\n<li>프로세스의 스레드가 생성/종료될 때 마다 자동으로 호출되는 콜백 함수</li>\n<li>프로세스의 메인 스레드가 생성될 때도 콜백 함수가 호출된다.</li>\n<li>Entry Point 코드보다 먼저 호출되어 Anti-Debugging에서 많이 쓰인다.</li>\n<li>스레드의 생성시점과 종료시점에 2번 자동으로 호출되는 함수이다.</li>\n<li>프로세스의 EP 코드를 실해하는 메인 스레드가 실행될 때 TLS 콜백 함수가 먼저 호출되는 원리이다.</li>\n</ul>\n<h3 id=\"image_tls_callback\" style=\"position:relative;\"><a href=\"#image_tls_callback\" aria-label=\"image_tls_callback permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IMAGE_TLS_CALLBACK</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">typedef</span> <span class=\"token function\">VOID</span>\n<span class=\"token punctuation\">(</span>NTAPI <span class=\"token operator\">*</span>PIMAGE_TLS_CALLBACK<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>\n    PVOID DllHandle<span class=\"token punctuation\">,</span>\n    DWORD Reason<span class=\"token punctuation\">,</span>\n    PVOID Reserved\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>TLS 콜백 함수 정의는 DllMain() 함수 정의와 비슷 한 것을 알 수있다.</li>\n</ul>\n<h3 id=\"dllmain\" style=\"position:relative;\"><a href=\"#dllmain\" aria-label=\"dllmain permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DllMain()</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">BOOL WINAPI <span class=\"token function\">DllMain</span><span class=\"token punctuation\">(</span>\n    HINSTANCE hinstDLL<span class=\"token punctuation\">,</span>  <span class=\"token comment\">// handle to DLL module</span>\n    <span class=\"token module\">DWORD</span> fdwReason<span class=\"token punctuation\">,</span>     <span class=\"token comment\">// reason for calling function</span>\n    LPVOID lpReserved <span class=\"token punctuation\">)</span>  <span class=\"token comment\">// reserved</span></code></pre></div>\n<ul>\n<li>\n<p>파라미터의 순서와 의미도 동일하다.</p>\n</li>\n<li>\n<p>DllHandle 파라미터는 모듈의 핸들, 로딩 주소 이다.</p>\n</li>\n<li>\n<p>Reason 파라미터는 TLS 콜백 함수가 호출된 이유</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">defind</span> <span class=\"token expression\">DLL_PROCESS_ATTACH  <span class=\"token number\">1</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DLL_THREAD_ATTACH</span>   <span class=\"token expression\"><span class=\"token number\">2</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DLL_THREAD_DETACH</span>   <span class=\"token expression\"><span class=\"token number\">3</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token expression\">DEFINE </span><span class=\"token macro-name\">DLL_PROCESS_DETACH</span>  <span class=\"token expression\"><span class=\"token number\">0</span></span></span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"dll_process_attach\" style=\"position:relative;\"><a href=\"#dll_process_attach\" aria-label=\"dll_process_attach permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DLL_PROCESS_ATTACH</h3>\n<ul>\n<li>프로세스의 메인 스레드가 main 함수를 호출하기 전에 등록된 TLS 콜백 함수들이 호출된다.</li>\n<li>이때 Reason  값은 1(DLL_PROCESS_ATTACH)</li>\n</ul>\n<h3 id=\"dll_thread_attach\" style=\"position:relative;\"><a href=\"#dll_thread_attach\" aria-label=\"dll_thread_attach permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DLL_THREAD_ATTACH</h3>\n<ul>\n<li>TLS 콜백 함수들이 모두 종료되면 main 함수가 실행된다.</li>\n<li>사용자 스레드를 생성하는 순간 Reason = 2(DLL_THREAD_ATTACH)로 TLS 콜백 함수들이 동작한다.</li>\n</ul>\n<h3 id=\"dll_thread_detach\" style=\"position:relative;\"><a href=\"#dll_thread_detach\" aria-label=\"dll_thread_detach permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DLL_THREAD_DETACH</h3>\n<ul>\n<li>TLS 콜백 함수들이 모두 종료되면 사용자 스레드로 생성한 해당 함수가 실행된다.</li>\n<li>그리고 스레드 함수가 종료되는 순간 Reason = 3(DLL_THREAD_DETACH)로 TLS 콜백 함수들이 호출된다.</li>\n</ul>\n<h3 id=\"dll_process_detach\" style=\"position:relative;\"><a href=\"#dll_process_detach\" aria-label=\"dll_process_detach permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DLL_PROCESS_DETACH</h3>\n<ul>\n<li>사용자 쓰레드가 종료되면 스레드의 종료를 기다리던 main 함수(메인 스레드) 역시 종료한다.</li>\n<li>이때 마지막으로 Reason = 0 (DLL_PROCESS_DETACH) 값으로 TLS 콜백 함수들이 호출된다.</li>\n</ul>","frontmatter":{"date":"January 03, 2021","title":"TLS(Thread Local Storage CallBack)","categories":"Windows","author":"Zer0Luck","emoji":"🍯"},"fields":{"slug":"/window_5_theori/"}},"prev":{"id":"935223a9-cb61-500f-bacd-4c5f64777ab9","html":"<h1 id=\"cisc-complex-instruction-set-computer\" style=\"position:relative;\"><a href=\"#cisc-complex-instruction-set-computer\" aria-label=\"cisc complex instruction set computer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CISC (Complex Instruction Set Computer)</h1>\n<ul>\n<li>명령어가 복잡하여 명령어를 해석하는 데 시간이 오래 걸리며</li>\n<li>명령어의 수가 많고 명령을 처리하는 시간이 길어 명령 처리 대기 시간이 길다.</li>\n</ul>\n<h3 id=\"명령어가-복잡하다\" style=\"position:relative;\"><a href=\"#%EB%AA%85%EB%A0%B9%EC%96%B4%EA%B0%80-%EB%B3%B5%EC%9E%A1%ED%95%98%EB%8B%A4\" aria-label=\"명령어가 복잡하다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>명령어가 복잡하다?</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">하나의 명령어가 할 수 있는 일의 양이 RISC 대비하여 많다는 것을 의미\n명령어 마다 길이가 다르며 동작에 있어 사이클 수도 다르기 때문에 pipelining 설계가 어렵다<span class=\"token punctuation\">.</span>\n<span class=\"token number\">1</span><span class=\"token operator\">~</span><span class=\"token number\">100</span> byte 이상 되는 명령어들 도 있다<span class=\"token punctuation\">.</span></code></pre></div>\n<h1 id=\"risc-reduced-instruction-set-computer\" style=\"position:relative;\"><a href=\"#risc-reduced-instruction-set-computer\" aria-label=\"risc reduced instruction set computer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RISC (Reduced Instruction Set Computer)</h1>\n<ul>\n<li>CPU 명령어의 개수를 줄여 하드웨어 구조를 좀 더 간단하게 만드는 방식</li>\n<li>32비트로 명령어의 크기가 동일 하며 고정 길이를 갖는다.</li>\n<li>명령어의 개수가 적다.</li>\n<li>핵심적인 명령어를 기반으로 최소한의 명령어 집합을 구성하여 pipelining 기술을 도입하여 빠른 동작 속도와 하드웨어의 단순화와 효율성을 갖을 수 있으며 가격 경쟁령에서도 우위를 점하였다.</li>\n</ul>\n<h3 id=\"arm-에서-risc-방식을-사용하는-이유\" style=\"position:relative;\"><a href=\"#arm-%EC%97%90%EC%84%9C-risc-%EB%B0%A9%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"arm 에서 risc 방식을 사용하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM 에서 RISC 방식을 사용하는 이유</h3>\n<ul>\n<li>ARM은 Berkeley RISC에서 파생되었다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">Load<span class=\"token operator\">-</span>Store 방식\nFixed<span class=\"token operator\">-</span>Length <span class=\"token number\">32</span>bit Instruction\n<span class=\"token number\">3</span><span class=\"token operator\">-</span>address Instruction</code></pre></div>\n<h1 id=\"arm-processor-operation-mode\" style=\"position:relative;\"><a href=\"#arm-processor-operation-mode\" aria-label=\"arm processor operation mode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM Processor Operation Mode</h1>\n<ul>\n<li>ARM 프로세서에는 총 7개의 동작 모드가 있다.</li>\n<li>동작 모드는 프로세서가 어떠한 권한을 가지고 어떠한 일을 처리하고 있는지 나타내는 프로세서의 동작상태를 의미한다.</li>\n<li>각각의 7개의 모드는 따로 SP(Stack Point)를 갖는다.</li>\n<li>User,System은 같은 Stack을 사용한다.</li>\n</ul>\n<h3 id=\"user-mode-us---cpsr-m10000\" style=\"position:relative;\"><a href=\"#user-mode-us---cpsr-m10000\" aria-label=\"user mode us   cpsr m10000 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Mode (US) - CPSR M[10000]</h3>\n<ul>\n<li>일반적인 어플리케이션 실행 모드</li>\n<li>사용자 작업이나 Application을 수행 할 때의 동작 모드로 모든 동작 모드 중 유일하게 Non-Privileged 권한이다.</li>\n<li>메모리, I/O 장치와 같은 시스템 자원을 사용하는데 제한을 두어 사용자의 실수를 방지한다.</li>\n<li>SVC 모드로 이동하기 위해서는 Software Interrupt를 발생시킨다.</li>\n</ul>\n<h3 id=\"fast-interrupt-mode-fiq----cpsr-m10001\" style=\"position:relative;\"><a href=\"#fast-interrupt-mode-fiq----cpsr-m10001\" aria-label=\"fast interrupt mode fiq    cpsr m10001 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fast Interrupt Mode (FIQ)  - CPSR M[10001]</h3>\n<ul>\n<li>빠른 인터럽트 처리를 위한 모드</li>\n<li>2개의 인터럽트 소스 중 빠르게 인터럽트를 처리할 수 있다.</li>\n<li>빠른 처리를 위해서 Exception Vector에서도 최하단에 존재하며 별도의 레지스터를 소유한다.</li>\n</ul>\n<h3 id=\"supervisor-mode-svc----cpsr-m10011\" style=\"position:relative;\"><a href=\"#supervisor-mode-svc----cpsr-m10011\" aria-label=\"supervisor mode svc    cpsr m10011 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Supervisor Mode (SVC)  - CPSR M[10011]</h3>\n<ul>\n<li>OS 보호 모드 (SW 인터럽트)</li>\n<li>시스템 자원을 자유롭게 관리 할 수 있는 동작 모드로 주로 커널, 디바이스 드라이버를 처리할 때 System Call 동작되는 모드</li>\n<li>Reset 신호 입력 시 및 SWI가 발생하면 SVC mode로 전환된다.</li>\n</ul>\n<h3 id=\"abort-mode-abt---cpsr-m10111\" style=\"position:relative;\"><a href=\"#abort-mode-abt---cpsr-m10111\" aria-label=\"abort mode abt   cpsr m10111 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Abort Mode (ABT) - CPSR M[10111]</h3>\n<ul>\n<li>데이터, 명령어 Prefetch 중단 시 동작</li>\n<li>메모리에서 명령을 읽거나 데이터를 읽거나 쓸때 오류가 발생할 때 Abort Mode로 전환하여 오류를 처리한다.</li>\n<li>커널들의 패닉시 Abort Mode로 잔환되어 스택 내용이 전달됨을 알 수 있다.</li>\n</ul>\n<h3 id=\"interrupt-mode-irq---cpsr-m10010\" style=\"position:relative;\"><a href=\"#interrupt-mode-irq---cpsr-m10010\" aria-label=\"interrupt mode irq   cpsr m10010 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Interrupt Mode (IRQ) - CPSR M[10010]</h3>\n<ul>\n<li>범용 인터럽트 처리 모드</li>\n<li>일반적으로 사용되는 인터럽트로 외부 장치에서 요청되는 하드웨어적인 IRQ의 발생에 의해 ARM Core는 IRQ 모드로 전환하고 인터럽트를 처리한다.</li>\n</ul>\n<h3 id=\"system-mode-sys---cpsr-m11111\" style=\"position:relative;\"><a href=\"#system-mode-sys---cpsr-m11111\" aria-label=\"system mode sys   cpsr m11111 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>System Mode (SYS) - CPSR M[11111]</h3>\n<ul>\n<li>OS 가 사용하는 특권 모드</li>\n<li>user mode와 동일한 Register를 사용하고 동일한 용도로 사용된다.</li>\n<li>권한이 있고 없고 차이다.</li>\n</ul>\n<h3 id=\"undifined-mode-und---cpsr-m11011\" style=\"position:relative;\"><a href=\"#undifined-mode-und---cpsr-m11011\" aria-label=\"undifined mode und   cpsr m11011 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Undifined Mode (UND) - CPSR M[11011]</h3>\n<ul>\n<li>정의 되지 않은 명령어 예외 발생</li>\n</ul>\n<h3 id=\"cpsr\" style=\"position:relative;\"><a href=\"#cpsr\" aria-label=\"cpsr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPSR</h3>\n<ul>\n<li>5bit 데이터로 구성된 Status Register 내에 저장된 데이터이다.</li>\n<li>현재 모드의 Status 값을 저장하고 있다.</li>\n<li>우축 0~4bit인 총 5bit는 각 모드의 정보를 담고 있다.</li>\n<li>32bit중 나머지 bit는 N, Z, C, V로 컨디션 코드 및 기타 정보로 사용된다.</li>\n</ul>\n<h3 id=\"모드-변경\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%9C-%EB%B3%80%EA%B2%BD\" aria-label=\"모드 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모드 변경</h3>\n<ul>\n<li>\n<p>인터럽트, 에러 또는 프로그래머로 인하여 모드가 변경된다.</p>\n</li>\n<li>\n<p>예외에 인하여 모드가 변경된다.</p>\n</li>\n<li>\n<p>System Mode, User Mode는 동일한 Stack을 사용하여 Mode간의 차이가 없지만, User Mode에서 Device등의 자원을 사용하는데 있어 제한이 있다.</p>\n</li>\n<li>\n<p>SVC Mode는 처음으로 Reset 되었을 때 접근되는 Mode이며 시스템 자원을 자유롭게 관리가 가능하여 별도의 Stack 공간을 사용한다.</p>\n</li>\n<li>\n<p>UserMode에서 OS 단위를 사용하고자 할 때 시스템 자원이기 때문에 SVC Mode로 전환되어 사용할 권한을 얻으며 System Call이라고 부른다.</p>\n</li>\n</ul>\n<h1 id=\"arm-thumb-상태\" style=\"position:relative;\"><a href=\"#arm-thumb-%EC%83%81%ED%83%9C\" aria-label=\"arm thumb 상태 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM Thumb 상태</h1>\n<ul>\n<li>v4T 이상은 Thumb 명령어 집합이라고 하는 16비트 명령어 집합을 정의한다.</li>\n<li>Thumb 명령어 집합이 기능은 32비트 ARM 명령어 집합 기능의 하위 집합이다.</li>\n<li>Thumb 명령어를 실행하는 프로세서는 Thumb 상태에서 작동한다.</li>\n<li>ARM 명령어를 실행하는 프로세서는 ARM 상태에서 작동한다.</li>\n<li>ARM 상태의 프로세서는 Thumb 명령어를 실행할 수 없고 Thumb 상태의 프로세서는 ARM 명령어를 실행할 수 없다.</li>\n<li>각 명령어 집합에는 프로세서 상태를 변경하는 명령어가 포함되어 있다.</li>\n<li>ARM 프로세서는 항상 ARM 상태에서 코드 실행을 시작한다.</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EB%AA%85%EB%A0%B9%EC%96%B4%EA%B0%80-%EB%B3%B5%EC%9E%A1%ED%95%98%EB%8B%A4\">명령어가 복잡하다?</a></li>\n<li><a href=\"#arm-%EC%97%90%EC%84%9C-risc-%EB%B0%A9%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">ARM 에서 RISC 방식을 사용하는 이유</a></li>\n<li><a href=\"#user-mode-us---cpsr-m10000\">User Mode (US) - CPSR M[10000]</a></li>\n<li><a href=\"#fast-interrupt-mode-fiq----cpsr-m10001\">Fast Interrupt Mode (FIQ)  - CPSR M[10001]</a></li>\n<li><a href=\"#supervisor-mode-svc----cpsr-m10011\">Supervisor Mode (SVC)  - CPSR M[10011]</a></li>\n<li><a href=\"#abort-mode-abt---cpsr-m10111\">Abort Mode (ABT) - CPSR M[10111]</a></li>\n<li><a href=\"#interrupt-mode-irq---cpsr-m10010\">Interrupt Mode (IRQ) - CPSR M[10010]</a></li>\n<li><a href=\"#system-mode-sys---cpsr-m11111\">System Mode (SYS) - CPSR M[11111]</a></li>\n<li><a href=\"#undifined-mode-und---cpsr-m11011\">Undifined Mode (UND) - CPSR M[11011]</a></li>\n<li><a href=\"#cpsr\">CPSR</a></li>\n<li><a href=\"#%EB%AA%A8%EB%93%9C-%EB%B3%80%EA%B2%BD\">모드 변경</a></li>\n</ul>\n</div>","frontmatter":{"date":"February 09, 2021","title":"ARM hack overview","categories":"ARM","author":"Zer0Luck","emoji":"🍤"},"fields":{"slug":"/arm-0/"}},"site":{"siteMetadata":{"siteUrl":"https://zer0luck.kr","comments":{"utterances":{"repo":"dnsdudrla97/dnsdudrla97.github.io"}}}}},"pageContext":{"slug":"/arm-1/","nextSlug":"/window_5_theori/","prevSlug":"/arm-0/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}