{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/arm-5/",
    "result": {"data":{"cur":{"id":"8c9e93e4-7a68-57de-9c83-92d41fc6d51a","html":"<h1 id=\"레지스터에-주소-로드\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%A7%80%EC%8A%A4%ED%84%B0%EC%97%90-%EC%A3%BC%EC%86%8C-%EB%A1%9C%EB%93%9C\" aria-label=\"레지스터에 주소 로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레지스터에 주소 로드</h1>\n<ul>\n<li>레지스터에 주소를 로드해야 하는 경우가 종종 있다.</li>\n<li>변수의 주소 값, 문자열 상수 또는 점프 테이블의 시작 위치…</li>\n<li>주소는 일반적으로 현재 pc 또는 다른 레지스터의 오프셋으로 표현된다.</li>\n<li>레지스터를 직접로드하려면 ADR, ADRL 을 사용한 직접로드</li>\n<li>리터러 풀에서 주소 로드 (LDR, Rd, = label)</li>\n</ul>\n<h2 id=\"adr-adrl-직접-로딩\" style=\"position:relative;\"><a href=\"#adr-adrl-%EC%A7%81%EC%A0%91-%EB%A1%9C%EB%94%A9\" aria-label=\"adr adrl 직접 로딩 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ADR, ADRL 직접 로딩</h2>\n<ul>\n<li>ADR, ADRL 의사 명령어를 사용하면 데이터 로드를 수행하지 않고 특정 범위 내에서 주소를 생성할 수 있다.\n<ul>\n<li>선택적 오프셋이 있는 레이블 인 프로그램 기준 표현식 이며 여기서 레이블의 주소는 현재 PC에 상대적이다.</li>\n<li>선택적 오프셋이 있는 레이블 인 레지스터 기준 식 이며 여기서 레이블의 주소는 지정된 범용 레지스터에 있는 주소에 상대적이다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"어셈블러는-다음을-생성하여-code-classlanguage-textadr-rn-labelcode-의사-명령어를-변환한다\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%85%88%EB%B8%94%EB%9F%AC%EB%8A%94-%EB%8B%A4%EC%9D%8C%EC%9D%84-%EC%83%9D%EC%84%B1%ED%95%98%EC%97%AC-code-classlanguage-textadr-rn-labelcode-%EC%9D%98%EC%82%AC-%EB%AA%85%EB%A0%B9%EC%96%B4%EB%A5%BC-%EB%B3%80%ED%99%98%ED%95%9C%EB%8B%A4\" aria-label=\"어셈블러는 다음을 생성하여 code classlanguage textadr rn labelcode 의사 명령어를 변환한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어셈블러는 다음을 생성하여 <code class=\"language-text\">ADR rn, label</code> 의사 명령어를 변환한다.</h3>\n<ul>\n<li>주소가 범위내에 있는 경우 주소를로드하는 단일 ADD, SUB 명령어</li>\n<li>단일 명령어에서 주소에 도달할 수 없는 경우 오류 메시지</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token operator\">-</span> 오프셋 범위는 word 로 정렬되지 않은 주소에 대한 오프셋의 경우 <span class=\"token operator\">+</span><span class=\"token operator\">-</span><span class=\"token number\">255</span> 바이트이고\n<span class=\"token operator\">-</span> word로 정렬된 주소에 대한 오프셋의 경우 <span class=\"token operator\">+</span><span class=\"token operator\">-</span><span class=\"token number\">1020</span> 바이트 <span class=\"token punctuation\">(</span><span class=\"token number\">255</span> word<span class=\"token punctuation\">)</span> 이다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span> Thumb 의 경우 주소는 word로 정렬되고 오프셋은 양수여야 한다<span class=\"token punctuation\">.</span></code></pre></div>\n<h3 id=\"어셈블러는-다음을-생성하여-code-classlanguage-textadrl-rn-labelcode-의사-명령어를-반환한다\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EC%85%88%EB%B8%94%EB%9F%AC%EB%8A%94-%EB%8B%A4%EC%9D%8C%EC%9D%84-%EC%83%9D%EC%84%B1%ED%95%98%EC%97%AC-code-classlanguage-textadrl-rn-labelcode-%EC%9D%98%EC%82%AC-%EB%AA%85%EB%A0%B9%EC%96%B4%EB%A5%BC-%EB%B0%98%ED%99%98%ED%95%9C%EB%8B%A4\" aria-label=\"어셈블러는 다음을 생성하여 code classlanguage textadrl rn labelcode 의사 명령어를 반환한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어셈블러는 다음을 생성하여 <code class=\"language-text\">ADRL rn, label</code> 의사 명령어를 반환한다.</h3>\n<ul>\n<li>주소가 범위 내에 있는 경우 주소를 로드하는 두 개의 데이터 처러 명령어</li>\n<li>두 명령어로 주소를 구성할 수 없는 경우 오류 메시지</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token operator\">-</span> ADRL 의사 명령어의 범위는 word로 정렬되지 않은 주소의 경우 ± <span class=\"token number\">64</span>KB이고\n<span class=\"token operator\">-</span> word로 정렬 된 주소의 경우 ± <span class=\"token number\">256</span>KB이다<span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>Thumb 용 ADRL 의사 명령어는 없습니다<span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token operator\">-</span> 만약 성공한 경우 ADLR은 두 개의 명령어로 어셈블된다<span class=\"token punctuation\">.</span>\n<span class=\"token operator\">-</span> 어셈블러는 주소를 단일 명령어로 로드 할 수 있는 경우에도 두 개의 명령어를 생성한다<span class=\"token punctuation\">.</span></code></pre></div>\n<h3 id=\"adr-adrl과-함께-사용되는-레이블은-동일한-코드-섹션내에-있어야-한다\" style=\"position:relative;\"><a href=\"#adr-adrl%EA%B3%BC-%ED%95%A8%EA%BB%98-%EC%82%AC%EC%9A%A9%EB%90%98%EB%8A%94-%EB%A0%88%EC%9D%B4%EB%B8%94%EC%9D%80-%EB%8F%99%EC%9D%BC%ED%95%9C-%EC%BD%94%EB%93%9C-%EC%84%B9%EC%85%98%EB%82%B4%EC%97%90-%EC%9E%88%EC%96%B4%EC%95%BC-%ED%95%9C%EB%8B%A4\" aria-label=\"adr adrl과 함께 사용되는 레이블은 동일한 코드 섹션내에 있어야 한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ADR, ADRL과 함께 사용되는 레이블은 동일한 코드 섹션내에 있어야 한다.</h3>\n<ul>\n<li>어셈블러 오류는 동일한 섹션에서 범위를 벗어난 레이블을 참조한다.</li>\n<li>링커 오류는 다른 코드 섹션에서 범위를 벗어난 레이블을 참조한다.</li>\n<li>Thumb 상태에서 ADR은 워드로 정렬 된 주소만 생성할 수있다.</li>\n<li>Thumb 코드에서는 ADRL을 사용할 수 없다. ARM 코드에서만 사용하라</li>\n</ul>\n<h3 id=\"연습1\" style=\"position:relative;\"><a href=\"#%EC%97%B0%EC%8A%B51\" aria-label=\"연습1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>연습1</h3>\n<ul>\n<li>ADR, ADRL 의사 명령어를 어셈블 할 때 어셈블러에서 생성 한 코드 유형이다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">AREA    adrlabel<span class=\"token punctuation\">,</span> CODE<span class=\"token punctuation\">,</span>READONLY\n            ENTRY                          <span class=\"token punctuation\">;</span> 첫 ENTRY\nStart\n            BL      func                   <span class=\"token punctuation\">;</span> 브랜치 서브 루틴 <span class=\"token punctuation\">(</span>func<span class=\"token punctuation\">)</span>\nstop        MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0x18</span>              <span class=\"token punctuation\">;</span> angel_SWIreason_ReportException\n            LDR     r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x20026</span>           <span class=\"token punctuation\">;</span> ADP_Stopped_ApplicationExit\n            SWI     <span class=\"token number\">0x123456</span>               <span class=\"token punctuation\">;</span> ARM semihosting SWI\n            LTORG                          <span class=\"token punctuation\">;</span> 리터럴 생성\nfunc        ADR     r0<span class=\"token punctuation\">,</span> Start              <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> SUB r0<span class=\"token punctuation\">,</span> PC<span class=\"token punctuation\">,</span> #offset to Start\n            ADR     r1<span class=\"token punctuation\">,</span> DataArea           <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> ADD r1<span class=\"token punctuation\">,</span> PC<span class=\"token punctuation\">,</span> #offset to DataArea\n            <span class=\"token punctuation\">;</span> ADR   r2<span class=\"token punctuation\">,</span> DataArea<span class=\"token operator\">+</span><span class=\"token number\">4300</span>      <span class=\"token punctuation\">;</span> 오프셋 때문에 실패함<span class=\"token punctuation\">,</span> ADD의 operand2로 표현할 수 없음\n            ADRL    r2<span class=\"token punctuation\">,</span> DataArea<span class=\"token operator\">+</span><span class=\"token number\">4300</span>      <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> ADD r2<span class=\"token punctuation\">,</span> PC<span class=\"token punctuation\">,</span> #offset1\n                                           <span class=\"token punctuation\">;</span>    ADD r2<span class=\"token punctuation\">,</span> r2<span class=\"token punctuation\">,</span> #offset2\n            MOV     pc<span class=\"token punctuation\">,</span> lr                 <span class=\"token punctuation\">;</span> Return\nDataArea    SPACE   <span class=\"token number\">8000</span>                   <span class=\"token punctuation\">;</span> Starting at the current location<span class=\"token punctuation\">,</span>\n                                           <span class=\"token punctuation\">;</span> clears a <span class=\"token number\">8000</span> byte area of memory\n                                           <span class=\"token punctuation\">;</span> to zero\n            END</code></pre></div>\n<h2 id=\"adr로-점프-테이블-구현\" style=\"position:relative;\"><a href=\"#adr%EB%A1%9C-%EC%A0%90%ED%94%84-%ED%85%8C%EC%9D%B4%EB%B8%94-%EA%B5%AC%ED%98%84\" aria-label=\"adr로 점프 테이블 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ADR로 점프 테이블 구현</h2>\n<ul>\n<li>다음 연습2는 점프 테이블을 구현하는 ARM 코드를 보여준다.</li>\n<li>ADR의사 명령어는 점프 테이블의 주소를 로드한다.</li>\n<li>해당 연습2에서 함수 arithfunc는 세 개의 인수를 사용하여 r0에 결과를 반환한다.</li>\n<li>첫 번째 인수는 두 번째 및 세 번째 인수에 대해 수행되는 작업을 결정한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">arg1<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n\tResult <span class=\"token operator\">=</span> arg2 <span class=\"token operator\">+</span> arg3\narg1<span class=\"token operator\">=</span><span class=\"token number\">1</span>\n\tResult <span class=\"token operator\">=</span> arg2 <span class=\"token operator\">-</span> arg3</code></pre></div>\n<ul>\n<li>점프 테이블은 다음 명령어와 어셈블러 지시문으로 구현된다.</li>\n</ul>\n<h3 id=\"equ\" style=\"position:relative;\"><a href=\"#equ\" aria-label=\"equ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EQU</h3>\n<ul>\n<li>어셈블러 지시문</li>\n<li>기호에 값을 부여하는 데 사용한다.</li>\n<li>해당 연습 2에서는 값 2를 num에 할당한다.</li>\n<li>num이 코드의 다른 곳에서 사용되면 값 2가 대체된다.</li>\n<li>이런 방식으로 EQU를 사용하는 것은 C에서 상수를 정의하기 위해 <code class=\"language-text\">#define</code>과 유사하다.</li>\n</ul>\n<h3 id=\"dcd\" style=\"position:relative;\"><a href=\"#dcd\" aria-label=\"dcd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DCD</h3>\n<ul>\n<li>하나 이상의 STORE words를 선언한다</li>\n<li>해당 연습2에서 각 DCD는 점프 테이블의 특정 문맥을 처리하는 루튼의 주소를 저장한다.</li>\n</ul>\n<h3 id=\"ldr\" style=\"position:relative;\"><a href=\"#ldr\" aria-label=\"ldr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LDR</h3>\n<ul>\n<li><code class=\"language-text\">LDR pc, [r3, r0, LSL #2]</code> 명령어는 점프 테이블의 필수 절 주소를 pc로 로드 한다.</li>\n<li>word offset을 제공하기 위해 r0의 line 번호에 4를 곱한다.</li>\n<li>점프 테이블이 주소에 결과를 추가한다.</li>\n<li>결합 된 주소의 내용을 프로그램 카운터에 로드한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">AREA    Jump<span class=\"token punctuation\">,</span> CODE<span class=\"token punctuation\">,</span> READONLY     \n        CODE32                           \nnum     EQU     <span class=\"token number\">2</span>                        <span class=\"token punctuation\">;</span> jump table의 항목수 \n        ENTRY                            \nstart                                    \n        MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0</span>                   \n        MOV     r1<span class=\"token punctuation\">,</span> #<span class=\"token number\">3</span>\n        MOV     r2<span class=\"token punctuation\">,</span> #<span class=\"token number\">2</span>\n        BL      arithfunc                \nstop    MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0x18</span>                <span class=\"token punctuation\">;</span> angel_SWIreason_ReportException\n        LDR     r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x20026</span>             <span class=\"token punctuation\">;</span> ADP_Stopped_ApplicationExit\n        SWI     <span class=\"token number\">0x123456</span>                 <span class=\"token punctuation\">;</span> ARM semihosting SWI\narithfunc                                <span class=\"token punctuation\">;</span> Label the function\n        CMP     r0<span class=\"token punctuation\">,</span> #num                 <span class=\"token punctuation\">;</span> function code를 <span class=\"token keyword\">unsigned</span> integer 취급\n        MOVHS   pc<span class=\"token punctuation\">,</span> lr                   <span class=\"token punctuation\">;</span> If code is <span class=\"token operator\">>=</span> num then simply <span class=\"token keyword\">return</span>\n        ADR     r3<span class=\"token punctuation\">,</span> JumpTable            <span class=\"token punctuation\">;</span> JumpTable 을 r3 레지스트로 로드\n        LDR     pc<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>r3<span class=\"token punctuation\">,</span>r0<span class=\"token punctuation\">,</span>LSL#<span class=\"token number\">2</span><span class=\"token punctuation\">]</span>        <span class=\"token punctuation\">;</span> 적절할 루틴으로 jump\nJumpTable\n        DCD     DoAdd\n        DCD     DoSub\nDoAdd   ADD     r0<span class=\"token punctuation\">,</span> r1<span class=\"token punctuation\">,</span> r2               <span class=\"token punctuation\">;</span> Operation <span class=\"token number\">0</span>\n        MOV     pc<span class=\"token punctuation\">,</span> lr                   <span class=\"token punctuation\">;</span> Return\nDoSub   SUB     r0<span class=\"token punctuation\">,</span> r1<span class=\"token punctuation\">,</span> r2               <span class=\"token punctuation\">;</span> Operation <span class=\"token number\">1</span>\n        MOV     pc<span class=\"token punctuation\">,</span> lr                   <span class=\"token punctuation\">;</span> Return\n        END                              <span class=\"token punctuation\">;</span> Mark the end of <span class=\"token keyword\">this</span> file</code></pre></div>\n<h3 id=\"thumb-로-변환하기\" style=\"position:relative;\"><a href=\"#thumb-%EB%A1%9C-%EB%B3%80%ED%99%98%ED%95%98%EA%B8%B0\" aria-label=\"thumb 로 변환하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thumb 로 변환하기</h3>\n<ul>\n<li>Thumb 코드로 변환 된 점프 테이블 구현</li>\n<li>Thumb 버전은 ARM 코드와 동일하며 차이점은 Thumb version</li>\n<li>Thumb 상태에서는 다음을 수행 할 수 없다.\n<ul>\n<li>LDR, STR 명령어의 기본 레지스터 증가</li>\n<li>LDR 명령어를 사용하여 값을  PC에 로드</li>\n<li>레지스터에 있는 값이 인라인 시프트를 수행</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">AREA    Jump<span class=\"token punctuation\">,</span> CODE<span class=\"token punctuation\">,</span> READONLY\n        CODE16                          \nnum     EQU     <span class=\"token number\">2</span>\n        ENTRY\nstart\n        MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0</span>\n        MOV     r1<span class=\"token punctuation\">,</span> #<span class=\"token number\">3</span>\n        MOV     r2<span class=\"token punctuation\">,</span> #<span class=\"token number\">2</span>\n        BL      arithfunc\nstop    MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0x18</span>\n        LDR     r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x20026</span>\n        SWI     <span class=\"token number\">0xAB</span>                     <span class=\"token punctuation\">;</span> Thumb semihosting SWI\narithfunc\n        CMP     r0<span class=\"token punctuation\">,</span> #num\n        BHS     exit                     <span class=\"token punctuation\">;</span> MOV pc<span class=\"token punctuation\">,</span> lr cannot be conditional\n        ADR     r3<span class=\"token punctuation\">,</span> JumpTable\n        LSL     r0<span class=\"token punctuation\">,</span> r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">2</span>               <span class=\"token punctuation\">;</span> <span class=\"token number\">3</span> instructions needed to replace\n        LDR     r0<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>r3<span class=\"token punctuation\">,</span>r0<span class=\"token punctuation\">]</span>              <span class=\"token punctuation\">;</span> LDR pc<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>r3<span class=\"token punctuation\">,</span>r0<span class=\"token punctuation\">,</span>LSL#<span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n        MOV     pc<span class=\"token punctuation\">,</span> r0\n        ALIGN                            <span class=\"token punctuation\">;</span> Ensure that the table is aligned on a\n                                         <span class=\"token punctuation\">;</span> <span class=\"token number\">4</span><span class=\"token operator\">-</span>byte boundary\nJumpTable\n        DCD     DoAdd\n        DCD     DoSub\nDoAdd   ADD     r0<span class=\"token punctuation\">,</span> r1<span class=\"token punctuation\">,</span> r2\nexit    MOV     pc<span class=\"token punctuation\">,</span> lr\nDoSub   SUB     r0<span class=\"token punctuation\">,</span> r1<span class=\"token punctuation\">,</span> r2\n        MOV     pc<span class=\"token punctuation\">,</span> lr\n        END</code></pre></div>\n<h2 id=\"ldr-rd-label-주소-로딩\" style=\"position:relative;\"><a href=\"#ldr-rd-label-%EC%A3%BC%EC%86%8C-%EB%A1%9C%EB%94%A9\" aria-label=\"ldr rd label 주소 로딩 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LDR Rd, =label 주소 로딩</h2>\n<ul>\n<li>\n<p><code class=\"language-text\">LDR Rd, =</code> pseudo-instruction 는 32bit 상수를 레지스터로 로드 할 수 있다.</p>\n</li>\n<li>\n<p>또한 레이블 및 오프셋이 있는 레이블과 같은 프로그램 기준 표현식을 사용한다.</p>\n</li>\n<li>\n<p>레이블 주소를 리터럴 풀(상수 값을 유지하기 위해 코드에 포함된 메모리의 일부)에 배치한다.</p>\n</li>\n<li>\n<p>리터럴 풀에서 주소를 읽는 프로그램 기준 LDR 명령어를 생성한다.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">LDR      rn <span class=\"token punctuation\">[</span>pc<span class=\"token punctuation\">,</span> #offset to literal pool<span class=\"token punctuation\">]</span> \t<span class=\"token punctuation\">;</span> load <span class=\"token keyword\">register</span> n with one word\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"token punctuation\">;</span> from the address <span class=\"token punctuation\">[</span>pc <span class=\"token operator\">+</span> offset<span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>\n<p>ADR, ADRL 의사 명령어와 달리 현재 섹션 외부에 있는 레이블과 함께 LDR을 사용할 수 있다.</p>\n</li>\n<li>\n<p>레이블이 현재 섹션 외부에 있는 경우 어셈블러는 소스 파일이 어셈블 될 때 개체 코드에 재배치 지시문을 배치한다.</p>\n</li>\n<li>\n<p>재배치 지시문은 링크 타임에 주소를 확인하도록 링커에 지시한다.</p>\n</li>\n<li>\n<p>링커가 LDR 및 리터럴 풀을 포함하는 섹션을 배치할 때마다 주소는 유효하다.</p>\n</li>\n<li>\n<p>연습 3</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">AREA    LDRlabel<span class=\"token punctuation\">,</span> CODE<span class=\"token punctuation\">,</span>READONLY\n        ENTRY                              \nstart\n        BL      func1                      \n        BL      func2                      \nstop    MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0x18</span>                  <span class=\"token punctuation\">;</span> angel_SWIreason_ReportException\n        LDR     r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x20026</span>               <span class=\"token punctuation\">;</span> ADP_Stopped_ApplicationExit\n        SWI     <span class=\"token number\">0x123456</span>                   <span class=\"token punctuation\">;</span> ARM semihosting SWI\nfunc1\n        LDR     r0<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span>start                 <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> LDR R0<span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>PC<span class=\"token punctuation\">,</span> 리터럴 풀<span class=\"token number\">1</span> 오프셋<span class=\"token punctuation\">]</span>\n        LDR     r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span>Darea <span class=\"token operator\">+</span> <span class=\"token number\">12</span>            <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> LDR R1<span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>PC<span class=\"token punctuation\">,</span> 리터럴 풀<span class=\"token number\">1</span> 오프셋<span class=\"token punctuation\">]</span>\n        LDR     r2<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span>Darea <span class=\"token operator\">+</span> <span class=\"token number\">6000</span>          <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> LDR R2<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>PC<span class=\"token punctuation\">,</span> 리터럴 풀<span class=\"token number\">1</span> 오프셋<span class=\"token punctuation\">]</span>\n        MOV     pc<span class=\"token punctuation\">,</span>lr                      <span class=\"token punctuation\">;</span> Return\n        LTORG                              <span class=\"token punctuation\">;</span> Literal Pool <span class=\"token number\">1</span>\nfunc2\n        LDR     r3<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span>Darea <span class=\"token operator\">+</span> <span class=\"token number\">6000</span>          <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> LDR r3<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>PC<span class=\"token punctuation\">,</span> 리터럴 풀<span class=\"token number\">1</span> 오프셋<span class=\"token punctuation\">]</span>\n                                           <span class=\"token punctuation\">;</span> 이전 리터럴과 공유 한다<span class=\"token punctuation\">.</span>\n        <span class=\"token punctuation\">;</span> LDR   r4<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span>Darea <span class=\"token operator\">+</span> <span class=\"token number\">6004</span>          <span class=\"token punctuation\">;</span> 만약 주석이 해제된다면 에러가 발생한다<span class=\"token punctuation\">.</span>\n                                           <span class=\"token punctuation\">;</span> 리터럴 풀 <span class=\"token number\">2</span>가 범위를 벗어났기 때문\n        MOV     pc<span class=\"token punctuation\">,</span> lr                     <span class=\"token punctuation\">;</span> Return\nDarea   SPACE   <span class=\"token number\">8000</span>                       <span class=\"token punctuation\">;</span> 현재 위치에서 시작\n                                           <span class=\"token punctuation\">;</span> <span class=\"token number\">8000</span> 바이트 메모리 영역을 지운다<span class=\"token punctuation\">.</span>\n        END                                <span class=\"token punctuation\">;</span> 리터럴 풀<span class=\"token number\">2</span>가 범위를 벗어났다<span class=\"token punctuation\">.</span>\n                                           <span class=\"token punctuation\">;</span> the LDR instructions above</code></pre></div>\n<h3 id=\"ldr-rd-label-문자열-복사-연습\" style=\"position:relative;\"><a href=\"#ldr-rd-label-%EB%AC%B8%EC%9E%90%EC%97%B4-%EB%B3%B5%EC%82%AC-%EC%97%B0%EC%8A%B5\" aria-label=\"ldr rd label 문자열 복사 연습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LDR Rd, =label 문자열 복사 연습</h3>\n<ul>\n<li>한 문자열을 다른 문자열로 덮어 쓰는 ARM 코드 루틴</li>\n<li>LDR 의사 명령어를 사용하여 데이터 섹션에서 두 문자열의 주소를 로드한다.</li>\n</ul>\n<h3 id=\"dcb\" style=\"position:relative;\"><a href=\"#dcb\" aria-label=\"dcb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DCB</h3>\n<ul>\n<li>DCB 명령은 하나 이상의 저장소 바이트를 정의한다.</li>\n<li>정수 값 외에도 DCB는 인용된 문자열을 허용한다.</li>\n<li>문자열의 각 문자는 연속 바이트에 배치된다.</li>\n</ul>\n<h3 id=\"ldrstr\" style=\"position:relative;\"><a href=\"#ldrstr\" aria-label=\"ldrstr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LDR/STR</h3>\n<ul>\n<li>LDR 및 STR 명령어는 post-indexed 주소 지정을 사용하여 주소 레지스터를 업데이트 한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">LDRB    r2<span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>r1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>#<span class=\"token number\">1</span></code></pre></div>\n<ul>\n<li>r1이 가리키는 주소의 내용으로 r2를 로드 한다음 r1을 1씩 증가시킨다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">AREA    strCopy<span class=\"token punctuation\">,</span> CODE<span class=\"token punctuation\">,</span> READONLY\n        ENTRY                             \nstart   LDR     r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span>srcstr               <span class=\"token punctuation\">;</span> 첫 번째 문자열에 대한 포인터\n        LDR     r0<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span>dststr               <span class=\"token punctuation\">;</span> 두 번째 문자열에 대한 포인터\n        BL      strCopy                   <span class=\"token punctuation\">;</span> 복사를 위해 서브 루틴 호출\nstop    MOV     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0x18</span>                 <span class=\"token punctuation\">;</span> angel_SWIreason_ReportException\n        LDR     r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x20026</span>              <span class=\"token punctuation\">;</span> ADP_Stopped_ApplicationExit\n        SWI     <span class=\"token number\">0x123456</span>                  <span class=\"token punctuation\">;</span> ARM semihosting SWI\nstrCopy\n        LDRB    r2<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>r1<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>#<span class=\"token number\">1</span>               <span class=\"token punctuation\">;</span> 바이트 로드 및 주소 업데이트\n        STRB    r2<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>r0<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>#<span class=\"token number\">1</span>               <span class=\"token punctuation\">;</span> 바이트 저장 및 주소 업데이트\n        CMP     r2<span class=\"token punctuation\">,</span> #<span class=\"token number\">0</span>                    <span class=\"token punctuation\">;</span> Check <span class=\"token keyword\">for</span> zero terminator\n        BNE     strCopy                   <span class=\"token punctuation\">;</span> Keep going <span class=\"token keyword\">if</span> <span class=\"token operator\">not</span>\n        MOV     pc<span class=\"token punctuation\">,</span>lr                     <span class=\"token punctuation\">;</span> Return\n        AREA    Strings<span class=\"token punctuation\">,</span> DATA<span class=\"token punctuation\">,</span> READWRITE\nsrcstr  DCB     <span class=\"token string\">\"First string - source\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span>\ndststr  DCB     <span class=\"token string\">\"Second string - destination\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span>\n        END</code></pre></div>\n<h3 id=\"thumb로-변환\" style=\"position:relative;\"><a href=\"#thumb%EB%A1%9C-%EB%B3%80%ED%99%98\" aria-label=\"thumb로 변환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thumb로 변환</h3>\n<ul>\n<li>Thumb LDR, STR 명령어에 대해서는 post-indexed 주소 지정 모드가 없다.</li>\n<li>따라서 ADD 명령어를 사용하여 LDR, STR 명령어 다음에 주소 레지스터를 증가시켜야 한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">LDRB  r2<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>r1<span class=\"token punctuation\">]</span>        <span class=\"token punctuation\">;</span> load <span class=\"token keyword\">register</span> <span class=\"token number\">2</span>\nADD   r1<span class=\"token punctuation\">,</span> #<span class=\"token number\">1</span>          <span class=\"token punctuation\">;</span> increment the address in\n                      <span class=\"token punctuation\">;</span> <span class=\"token keyword\">register</span> <span class=\"token number\">1.</span></code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#adr-adrl-%EC%A7%81%EC%A0%91-%EB%A1%9C%EB%94%A9\">ADR, ADRL 직접 로딩</a></p>\n<ul>\n<li><a href=\"#%EC%96%B4%EC%85%88%EB%B8%94%EB%9F%AC%EB%8A%94-%EB%8B%A4%EC%9D%8C%EC%9D%84-%EC%83%9D%EC%84%B1%ED%95%98%EC%97%AC-adr-rn-label-%EC%9D%98%EC%82%AC-%EB%AA%85%EB%A0%B9%EC%96%B4%EB%A5%BC-%EB%B3%80%ED%99%98%ED%95%9C%EB%8B%A4\">어셈블러는 다음을 생성하여 <code class=\"language-text\">ADR rn, label</code> 의사 명령어를 변환한다.</a></li>\n<li><a href=\"#%EC%96%B4%EC%85%88%EB%B8%94%EB%9F%AC%EB%8A%94-%EB%8B%A4%EC%9D%8C%EC%9D%84-%EC%83%9D%EC%84%B1%ED%95%98%EC%97%AC-adrl-rn-label-%EC%9D%98%EC%82%AC-%EB%AA%85%EB%A0%B9%EC%96%B4%EB%A5%BC-%EB%B0%98%ED%99%98%ED%95%9C%EB%8B%A4\">어셈블러는 다음을 생성하여 <code class=\"language-text\">ADRL rn, label</code> 의사 명령어를 반환한다.</a></li>\n<li><a href=\"#adr-adrl%EA%B3%BC-%ED%95%A8%EA%BB%98-%EC%82%AC%EC%9A%A9%EB%90%98%EB%8A%94-%EB%A0%88%EC%9D%B4%EB%B8%94%EC%9D%80-%EB%8F%99%EC%9D%BC%ED%95%9C-%EC%BD%94%EB%93%9C-%EC%84%B9%EC%85%98%EB%82%B4%EC%97%90-%EC%9E%88%EC%96%B4%EC%95%BC-%ED%95%9C%EB%8B%A4\">ADR, ADRL과 함께 사용되는 레이블은 동일한 코드 섹션내에 있어야 한다.</a></li>\n<li><a href=\"#%EC%97%B0%EC%8A%B51\">연습1</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#adr%EB%A1%9C-%EC%A0%90%ED%94%84-%ED%85%8C%EC%9D%B4%EB%B8%94-%EA%B5%AC%ED%98%84\">ADR로 점프 테이블 구현</a></p>\n<ul>\n<li><a href=\"#equ\">EQU</a></li>\n<li><a href=\"#dcd\">DCD</a></li>\n<li><a href=\"#ldr\">LDR</a></li>\n<li><a href=\"#thumb-%EB%A1%9C-%EB%B3%80%ED%99%98%ED%95%98%EA%B8%B0\">Thumb 로 변환하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#ldr-rd-label-%EC%A3%BC%EC%86%8C-%EB%A1%9C%EB%94%A9\">LDR Rd, =label 주소 로딩</a></p>\n<ul>\n<li><a href=\"#ldr-rd-label-%EB%AC%B8%EC%9E%90%EC%97%B4-%EB%B3%B5%EC%82%AC-%EC%97%B0%EC%8A%B5\">LDR Rd, =label 문자열 복사 연습</a></li>\n<li><a href=\"#dcb\">DCB</a></li>\n<li><a href=\"#ldrstr\">LDR/STR</a></li>\n<li><a href=\"#thumb%EB%A1%9C-%EB%B3%80%ED%99%98\">Thumb로 변환</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"레지스터에 주소 로드 레지스터에 주소를 로드해야 하는 경우가 종종 있다. 변수의 주소 값, 문자열 상수 또는 점프 테이블의 시작 위치… 주소는 일반적으로 현재 pc 또는 다른 레지스터의 오프셋으로 표현된다. 레지스터를 직접로드하려면 ADR, ADRL 을 사용한 직접로드 리터러 풀에서 주소 로드 (LDR, Rd, = label) ADR, ADRL 직접 로딩 ADR, ADRL 의사 명령어를 사용하면 데이터 로드를 수행하지 않고 특정 범위 내에서 주소를 생성할 수 있다. 선택적 오프셋이 있는 레이블 인 프로그램 기준 표현식 이며 여기서 레이블의 주소는 현재 PC에 상대적이다. 선택적 오프셋이 있는 레이블 인 레지스터 기준 식 이며 여기서 레이블의 주소는 지정된 범용 레지스터에 있는 주소에 상대적이다. 어셈블러는 다음을 생성하여  의사 명령어를 변환한다. 주소가 범위내에 있는 경우 주소를로드하는 단일 ADD, SUB 명령어 단일 명령어에서 주소에 도달할 수 없는 경우 오류 메시지 어셈블러…","frontmatter":{"date":"February 10, 2021","title":"ARM Register Address load","categories":"ARM","author":"Zer0Luck","emoji":"🍄"},"fields":{"slug":"/arm-5/"}},"next":{"id":"bb13f006-b820-5125-b139-d5e5374efd82","html":"<h1 id=\"레지스터에-상수-값-로드\" style=\"position:relative;\"><a href=\"#%EB%A0%88%EC%A7%80%EC%8A%A4%ED%84%B0%EC%97%90-%EC%83%81%EC%88%98-%EA%B0%92-%EB%A1%9C%EB%93%9C\" aria-label=\"레지스터에 상수 값 로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>레지스터에 상수 값 로드</h1>\n<ul>\n<li>\n<p>메모리에서 데이터 로드를 수행하지 않고는 단일 명령어의 레지스터에 임의의 32비트 상수를 로드할 수 없다.</p>\n</li>\n<li>\n<p>ARM 명령어의 길이가 32 비트에 불과 하기 때문</p>\n</li>\n<li>\n<p>Thumb 명령어에는 비슷한 제한이 걸려 있다.</p>\n</li>\n<li>\n<p>데이터 로드와 함께 32 비트 값을 레지스터에 로드 할 수 있지만 일반적으로 사용되는 많은 상수를 로드하는 보다 직접적이고 효율적인 방법이 있다.</p>\n</li>\n<li>\n<p>또한 일반적으로 사용되는 많은 상수를 별도의 로드 작업 없이 데이터 처리 명령어 내에서 피연산자로 직접 포함할 수 있다.</p>\n</li>\n</ul>\n<h2 id=\"직접-로딩-mov-mvn-instruction\" style=\"position:relative;\"><a href=\"#%EC%A7%81%EC%A0%91-%EB%A1%9C%EB%94%A9-mov-mvn-instruction\" aria-label=\"직접 로딩 mov mvn instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>직접 로딩 MOV, MVN Instruction</h2>\n<h3 id=\"mov-register\" style=\"position:relative;\"><a href=\"#mov-register\" aria-label=\"mov register permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MOV Register</h3>\n<ul>\n<li>MOV 명령은 모든 8 비트 상수 값을 로드 하여 0x0 ~ 0xFF (0-255) 범위를 제공한다.</li>\n<li>또한 이러한 값을 짝수로 회전 할 수 도 있다.</li>\n</ul>\n<h3 id=\"mvn-register\" style=\"position:relative;\"><a href=\"#mvn-register\" aria-label=\"mvn register permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MVN Register</h3>\n<ul>\n<li>\n<p>MVN은 이러한 값의 비트 보수를 로드 할 수 있다.</p>\n</li>\n<li>\n<p>숫자 값은 <code class=\"language-text\">-(n+1)</code></p>\n</li>\n<li>\n<p>필요한 회전에 대해 계산할 필요가 없으며 어셈블러가 계산을 수행한다.</p>\n</li>\n<li>\n<p>MOV, MVN을 사용할지 결정할 필요가 없다.</p>\n</li>\n<li>\n<p>어셈블러는 적절한 것을 사용한다.</p>\n</li>\n<li>\n<p>값이 어셈블리 시간 변수 인 경우 유용하다.</p>\n</li>\n<li>\n<p>생성 할 수 없는 상수 를 사용하여 명령어를 작성하면 어셈블러에서 오류를 보고한다.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">Immediate n out of range <span class=\"token keyword\">for</span> <span class=\"token keyword\">this</span> operation<span class=\"token punctuation\">.</span></code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%A7%81%EC%A0%91-%EB%A1%9C%EB%94%A9-mov-mvn-instruction\">직접 로딩 MOV, MVN Instruction</a></p>\n<ul>\n<li><a href=\"#mov-register\">MOV Register</a></li>\n<li><a href=\"#mvn-register\">MVN Register</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"February 10, 2021","title":"ARM Register const load","categories":"ARM","author":"Zer0Luck","emoji":"🍃"},"fields":{"slug":"/arm-6/"}},"prev":{"id":"e62d7b61-0989-52a1-8d5f-80625f86c8e8","html":"<h1 id=\"ldr-rd-const\" style=\"position:relative;\"><a href=\"#ldr-rd-const\" aria-label=\"ldr rd const permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LDR Rd, =const</h1>\n<ul>\n<li><code class=\"language-text\">LDR Rd, =const</code> 의사 명령은 단일 명령어에서 32비트 숫자 상수를 생성할 수 있다.</li>\n<li>이 의사 명령어를 사용하여 MOV, MVN 명령어 범위를 벗어난 상수를 생성한다.</li>\n</ul>\n<h3 id=\"ldr-의사명령은-특정-상수에-대해-가장-효율적인-코드를-생성한다\" style=\"position:relative;\"><a href=\"#ldr-%EC%9D%98%EC%82%AC%EB%AA%85%EB%A0%B9%EC%9D%80-%ED%8A%B9%EC%A0%95-%EC%83%81%EC%88%98%EC%97%90-%EB%8C%80%ED%95%B4-%EA%B0%80%EC%9E%A5-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%9C%EB%8B%A4\" aria-label=\"ldr 의사명령은 특정 상수에 대해 가장 효율적인 코드를 생성한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LDR 의사명령은 특정 상수에 대해 가장 효율적인 코드를 생성한다.</h3>\n<ul>\n<li>MOV, MVN 명령어를 사용하여 상수를 생성 할 수 있는 경우 어셈블러는 적절한 명령어를 생성한다.</li>\n<li>MOV, MVN 명령어로 상수를 생성할 수 없는 경우 어셈블러는 다음을 수행한다.\n<ul>\n<li>값을 literal pool (상수 값을 유지하기 위해 코드에 포함된 메모리의 일부에 배치한다.)</li>\n<li>Literal pool에서 상수를 읽는 프로그램 기준 주소로 LDR 명령어를 생성한다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">LDR      rn<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>pc<span class=\"token punctuation\">,</span> #offset to literal pool<span class=\"token punctuation\">]</span>  <span class=\"token punctuation\">;</span> load <span class=\"token keyword\">register</span> n with one word\n                                                <span class=\"token punctuation\">;</span> from the address <span class=\"token punctuation\">[</span>pc <span class=\"token operator\">+</span> offset<span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>어셈블러에서 생성한 LDR 명령어 범위 내에 리터럴 풀이 있는지 확인해야 한다.</li>\n</ul>\n<h3 id=\"literal-pools-배치\" style=\"position:relative;\"><a href=\"#literal-pools-%EB%B0%B0%EC%B9%98\" aria-label=\"literal pools 배치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Literal pools 배치</h3>\n<ul>\n<li>어셈블러는 각 섹션의 끝에 리터럴 풀을 배치한다.</li>\n<li>이들은 다음 섹션의 시작 부분에 있는 AREA instruction  또는 어셈블리 끝에 있는 END instruction 의해 정의된다.</li>\n<li>포함된 파일 끝에 있는 END는 섹션의 끝을 알리지 않는다.</li>\n<li>큰 섹션에서 기본 리터럴 풀은 하나 이상의 LDR 명령어 범위를 벗어날 수 있다.</li>\n<li>PC에서 상수까지의 오프셋은 다음과 같다.\n<ul>\n<li>ARM 상태에서 4KB 미만이지만 어느 방향으로 가능</li>\n<li>Thumb 상태에서 앞으로 1KB 미만</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ldr-rd--const-의사-명령어에서-상수를-리터럴-풀에-배치해야-하는-경우-어셈블러는-다음과-같다\" style=\"position:relative;\"><a href=\"#ldr-rd--const-%EC%9D%98%EC%82%AC-%EB%AA%85%EB%A0%B9%EC%96%B4%EC%97%90%EC%84%9C-%EC%83%81%EC%88%98%EB%A5%BC-%EB%A6%AC%ED%84%B0%EB%9F%B4-%ED%92%80%EC%97%90-%EB%B0%B0%EC%B9%98%ED%95%B4%EC%95%BC-%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0-%EC%96%B4%EC%85%88%EB%B8%94%EB%9F%AC%EB%8A%94-%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EB%8B%A4\" aria-label=\"ldr rd  const 의사 명령어에서 상수를 리터럴 풀에 배치해야 하는 경우 어셈블러는 다음과 같다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LDR Rd, = const 의사 명령어에서 상수를 리터럴 풀에 배치해야 하는 경우 어셈블러는 다음과 같다.</h3>\n<ul>\n<li>상수를 사용할 수 있고 이전 리터럴 풀에서 주소를 지정할 수 있는지 확인하며 기존 상수를 처리한다.</li>\n<li>상수를 아직 사용할 수 없는 경우 next literal pool에 배치하려고 한다.</li>\n</ul>\n<h3 id=\"next-literal-pool\" style=\"position:relative;\"><a href=\"#next-literal-pool\" aria-label=\"next literal pool permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>next literal pool</h3>\n<ul>\n<li>범위를 벗어난 경우 어셈블러는 오류 메시지를 생성한다.</li>\n<li>해당 경우 LTORG instruction을 사용하여 코드에 추가 리터럴 풀을 배치해야 한다.</li>\n<li>LTORG는 실패한 LDR 의사 명령어 뒤에 4KB(ARM) 또는 1KB (Thumb) 내에 배치한다.</li>\n</ul>\n<h3 id=\"ltorg-instruction\" style=\"position:relative;\"><a href=\"#ltorg-instruction\" aria-label=\"ltorg instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LTORG Instruction</h3>\n<ul>\n<li>어셈블러는 모든 코드 섹션의 끝에 현재 리터럴 풀을 어셈블한다.</li>\n<li>코드 섹션 끝은 AREA 다음 섹션의 시작 부분 또는 어셈블리의 끝 부분에 있는 지시문에 의해 결정된다.</li>\n<li>이러한 기본 리터럴 풀은 때때로 일부의 범위를 벗어날 수 있다. LDR, LDFD, LDFS 의사 명령어</li>\n<li>LTORG 리터럴 풀이 범위 내에서 어셈블되었는지 확인한다.</li>\n</ul>\n<h3 id=\"프로세서가-명령으로-실행을-시도하지-않는-곳에-리터럴-풀을-배치해야-한다\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%84%B8%EC%84%9C%EA%B0%80-%EB%AA%85%EB%A0%B9%EC%9C%BC%EB%A1%9C-%EC%8B%A4%ED%96%89%EC%9D%84-%EC%8B%9C%EB%8F%84%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EA%B3%B3%EC%97%90-%EB%A6%AC%ED%84%B0%EB%9F%B4-%ED%92%80%EC%9D%84-%EB%B0%B0%EC%B9%98%ED%95%B4%EC%95%BC-%ED%95%9C%EB%8B%A4\" aria-label=\"프로세서가 명령으로 실행을 시도하지 않는 곳에 리터럴 풀을 배치해야 한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로세서가 명령으로 실행을 시도하지 않는 곳에 리터럴 풀을 배치해야 한다.</h3>\n<ul>\n<li>무조건 분기 명령어 뒤에 배치하거나 서브 루틴 끝에 반환 명령어 뒤에 배치한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">AREA     Loadcon<span class=\"token punctuation\">,</span> CODE<span class=\"token punctuation\">,</span> READONLY\n        ENTRY                              \nstart   BL       func1                     <span class=\"token punctuation\">;</span> Branch 첫 번째 서브루틴\n        BL       func2                     <span class=\"token punctuation\">;</span> Branch 두 번째 서브루틴\nstop    MOV      r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0x18</span>                 <span class=\"token punctuation\">;</span> angel_SWIreason_ReportException\n        LDR      r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x20026</span>              <span class=\"token punctuation\">;</span> ADP_Stopped_ApplicationExit\n        SWI      <span class=\"token number\">0x123456</span>                  <span class=\"token punctuation\">;</span> ARM semihosting SWI\nfunc1\n        LDR      r0<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">42</span>                   <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> MOV R0<span class=\"token punctuation\">,</span> #<span class=\"token number\">42</span>\n        LDR      r1<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x55555555</span>           <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> LDR R1<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>PC<span class=\"token punctuation\">,</span> #offset to\n                                           <span class=\"token punctuation\">;</span> Literal Pool <span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n        LDR      r2<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0xFFFFFFFF</span>           <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> MVN R2<span class=\"token punctuation\">,</span> #<span class=\"token number\">0</span>\n        MOV      pc<span class=\"token punctuation\">,</span> lr\n        LTORG                              <span class=\"token punctuation\">;</span> Literal Pool <span class=\"token number\">1</span> contains\n                                           <span class=\"token punctuation\">;</span> literal Ox55555555\nfunc2\n        LDR      r3<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x55555555</span>           <span class=\"token punctuation\">;</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> LDR R3<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>PC<span class=\"token punctuation\">,</span> #offset to\n                                           <span class=\"token punctuation\">;</span> Literal Pool <span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">;</span> LDR r4<span class=\"token punctuation\">,</span> <span class=\"token operator\">=</span><span class=\"token number\">0x66666666</span>              <span class=\"token punctuation\">;</span> 만약에 주석 처리가 아니라면\n                                           <span class=\"token punctuation\">;</span> 실패한다<span class=\"token punctuation\">.</span> 왜냐하면 두 개의 리터럴 풀이기 때문\n                                           <span class=\"token punctuation\">;</span> 범위에 벗어난다<span class=\"token punctuation\">.</span>\n        MOV      pc<span class=\"token punctuation\">,</span> lr\nLargeTable\n        SPACE    <span class=\"token number\">4200</span>                      <span class=\"token punctuation\">;</span> Starting at the current location<span class=\"token punctuation\">,</span>\n                                           <span class=\"token punctuation\">;</span> clears a <span class=\"token number\">4200</span> byte area of memory\n                                           <span class=\"token punctuation\">;</span> to zero\n        END                                <span class=\"token punctuation\">;</span> Literal Pool <span class=\"token number\">2</span> is empty</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#ldr-%EC%9D%98%EC%82%AC%EB%AA%85%EB%A0%B9%EC%9D%80-%ED%8A%B9%EC%A0%95-%EC%83%81%EC%88%98%EC%97%90-%EB%8C%80%ED%95%B4-%EA%B0%80%EC%9E%A5-%ED%9A%A8%EC%9C%A8%EC%A0%81%EC%9D%B8-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%83%9D%EC%84%B1%ED%95%9C%EB%8B%A4\">LDR 의사명령은 특정 상수에 대해 가장 효율적인 코드를 생성한다.</a></li>\n<li><a href=\"#literal-pools-%EB%B0%B0%EC%B9%98\">Literal pools 배치</a></li>\n<li><a href=\"#ldr-rd--const-%EC%9D%98%EC%82%AC-%EB%AA%85%EB%A0%B9%EC%96%B4%EC%97%90%EC%84%9C-%EC%83%81%EC%88%98%EB%A5%BC-%EB%A6%AC%ED%84%B0%EB%9F%B4-%ED%92%80%EC%97%90-%EB%B0%B0%EC%B9%98%ED%95%B4%EC%95%BC-%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0-%EC%96%B4%EC%85%88%EB%B8%94%EB%9F%AC%EB%8A%94-%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EB%8B%A4\">LDR Rd, = const 의사 명령어에서 상수를 리터럴 풀에 배치해야 하는 경우 어셈블러는 다음과 같다.</a></li>\n<li><a href=\"#next-literal-pool\">next literal pool</a></li>\n<li><a href=\"#ltorg-instruction\">LTORG Instruction</a></li>\n<li><a href=\"#%ED%94%84%EB%A1%9C%EC%84%B8%EC%84%9C%EA%B0%80-%EB%AA%85%EB%A0%B9%EC%9C%BC%EB%A1%9C-%EC%8B%A4%ED%96%89%EC%9D%84-%EC%8B%9C%EB%8F%84%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-%EA%B3%B3%EC%97%90-%EB%A6%AC%ED%84%B0%EB%9F%B4-%ED%92%80%EC%9D%84-%EB%B0%B0%EC%B9%98%ED%95%B4%EC%95%BC-%ED%95%9C%EB%8B%A4\">프로세서가 명령으로 실행을 시도하지 않는 곳에 리터럴 풀을 배치해야 한다.</a></li>\n</ul>\n</div>","frontmatter":{"date":"February 10, 2021","title":"ARM LDR Rd, =const (constant)","categories":"ARM","author":"Zer0Luck","emoji":"🥑"},"fields":{"slug":"/arm-8/"}},"site":{"siteMetadata":{"siteUrl":"https://zer0luck.kr","comments":{"utterances":{"repo":"dnsdudrla97/dnsdudrla97.github.io"}}}}},"pageContext":{"slug":"/arm-5/","nextSlug":"/arm-6/","prevSlug":"/arm-8/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}