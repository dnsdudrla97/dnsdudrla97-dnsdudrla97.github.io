{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/window_5_theori/",
    "result": {"data":{"cur":{"id":"d9819043-fd75-5e98-89fc-f65dcd88ada0","html":"<h1 id=\"thread-local-storage-tls\" style=\"position:relative;\"><a href=\"#thread-local-storage-tls\" aria-label=\"thread local storage tls permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thread Local Storage (TLS)</h1>\n<ul>\n<li>프로세스의 모든 스레드는 가상 주소 공간을 공유한다.</li>\n<li>함수의 지역 변수는 함수를 실행하는 각 스레드에 공유한다.</li>\n<li>정적 및 전역 변수는 프로세스의 모든 스레드에서 공유된다.</li>\n<li>즉, 스레드 별로 독립된 데이터 저장 공간이며 스레드 내에서 프로세스의 전역(Global) 데이터나 정적(static) 데이터를 마치 지역(Local) 데이터 처럼 독립적으로 취급하고 싶을 때 사용한다.</li>\n</ul>\n<p><a href=\"http://msdn.microsoft.com/en-us/library/ms686749(VS.85),aspx\"></a></p>\n<h3 id=\"image_data_directory9\" style=\"position:relative;\"><a href=\"#image_data_directory9\" aria-label=\"image_data_directory9 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IMAGE_DATA_DIRECTORY[9]</h3>\n<ul>\n<li>PE 헤더의 TLS Table 항목이 세팅된다.</li>\n<li>IMAGE_NT_HEADERS - IMAGE_OPTIONAL_HEADER - IMAGE_DATA_DIRECTORY[9]</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABG0lEQVQY03WOXUvDMBiF+///hYgOBFHwTu8UdKxkTTsRbdKkH28SbYtuXdMmdVulU5jo9vBcHTic4wR+ENGIMz5FHgAYY+xA1zaNEEJKaUxrD+B4aPryHFJCJ+NJzOO2bb/7uq4BALJsPl9Ya80+HOxhzjilFLkoiZOf5c4OyyCyNC3Lsuu6/csBxoQQFjHfnzHGq0WltyyrKtuilNIHcB6DGSVREsc+DrIMdre1BgAplZSqyIv9txHywpASErkuipO0blrdGm1sVWsACUIW5btuzBD+0wkDT6UMOH1Ck0Im681n36/6fr1Z2WWhFrmYv6bNx9s2/KtzfINHdy+nt+HRNT67Zxc4v/SLQZxfTcW5CycPyWic7vJffgEoS7UQi0UnMwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./0.png\"\n        title=\"./0.png\"\n        src=\"/static/951b7d99cad673b600e2b007c4632544/37523/0.png\"\n        srcset=\"/static/951b7d99cad673b600e2b007c4632544/e9ff0/0.png 180w,\n/static/951b7d99cad673b600e2b007c4632544/f21e7/0.png 360w,\n/static/951b7d99cad673b600e2b007c4632544/37523/0.png 720w,\n/static/951b7d99cad673b600e2b007c4632544/02cd5/0.png 821w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>{: width=“65%” height=“65%“}</p>\n<ul>\n<li>RVA 01AAF3A0 주소에는 IMAGE_TLS_DIRECTORY 구조체가 있다.</li>\n</ul>\n<h3 id=\"image_tls_directory\" style=\"position:relative;\"><a href=\"#image_tls_directory\" aria-label=\"image_tls_directory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IMAGE_TLS_DIRECTORY</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_IMAGE_TLS_DIRECTORY64</span> <span class=\"token punctuation\">{</span>\n    ULONGLONG StartAddressOfRawData<span class=\"token punctuation\">;</span>\n    ULONGLONG EndAddressOfRawData<span class=\"token punctuation\">;</span>\n    ULONGLONG AddressOfIndex<span class=\"token punctuation\">;</span>         <span class=\"token comment\">// PDWORD</span>\n    ULONGLONG AddressOfCallBacks<span class=\"token punctuation\">;</span>     <span class=\"token comment\">// PIMAGE_TLS_CALLBACK *;</span>\n    DWORD SizeOfZeroFill<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">union</span> <span class=\"token punctuation\">{</span>\n        DWORD Characteristics<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">struct</span> <span class=\"token punctuation\">{</span>\n            DWORD Reserved0 <span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n            DWORD Alignment <span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n            DWORD Reserved1 <span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> DUMMYSTRUCTNAME<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> DUMMYUNIONNAME<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span> IMAGE_TLS_DIRECTORY64<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">typedef</span> IMAGE_TLS_DIRECTORY64 <span class=\"token operator\">*</span> PIMAGE_TLS_DIRECTORY64<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_IMAGE_TLS_DIRECTORY32</span> <span class=\"token punctuation\">{</span>\n    DWORD   StartAddressOfRawData<span class=\"token punctuation\">;</span>\n    DWORD   EndAddressOfRawData<span class=\"token punctuation\">;</span>\n    DWORD   AddressOfIndex<span class=\"token punctuation\">;</span>             <span class=\"token comment\">// PDWORD</span>\n    DWORD   AddressOfCallBacks<span class=\"token punctuation\">;</span>         <span class=\"token comment\">// PIMAGE_TLS_CALLBACK *</span>\n    DWORD   SizeOfZeroFill<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">union</span> <span class=\"token punctuation\">{</span>\n        DWORD Characteristics<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">struct</span> <span class=\"token punctuation\">{</span>\n            DWORD Reserved0 <span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n            DWORD Alignment <span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n            DWORD Reserved1 <span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> DUMMYSTRUCTNAME<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> DUMMYUNIONNAME<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span> IMAGE_TLS_DIRECTORY32<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> IMAGE_TLS_DIRECTORY32 <span class=\"token operator\">*</span> PIMAGE_TLS_DIRECTORY32<span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifdef</span> <span class=\"token expression\">_WIN64</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">IMAGE_ORDINAL_FLAG</span>              <span class=\"token expression\">IMAGE_ORDINAL_FLAG64</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">IMAGE_ORDINAL</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span>          <span class=\"token function\">IMAGE_ORDINAL64</span><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span></span></span>\n<span class=\"token keyword\">typedef</span> IMAGE_THUNK_DATA64              IMAGE_THUNK_DATA<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> PIMAGE_THUNK_DATA64             PIMAGE_THUNK_DATA<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">IMAGE_SNAP_BY_ORDINAL</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span>  <span class=\"token function\">IMAGE_SNAP_BY_ORDINAL64</span><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span></span></span>\n<span class=\"token keyword\">typedef</span> IMAGE_TLS_DIRECTORY64           IMAGE_TLS_DIRECTORY<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> PIMAGE_TLS_DIRECTORY64          PIMAGE_TLS_DIRECTORY<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">else</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">IMAGE_ORDINAL_FLAG</span>              <span class=\"token expression\">IMAGE_ORDINAL_FLAG32</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">IMAGE_ORDINAL</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span>          <span class=\"token function\">IMAGE_ORDINAL32</span><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span></span></span>\n<span class=\"token keyword\">typedef</span> IMAGE_THUNK_DATA32              IMAGE_THUNK_DATA<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> PIMAGE_THUNK_DATA32             PIMAGE_THUNK_DATA<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">IMAGE_SNAP_BY_ORDINAL</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span>  <span class=\"token function\">IMAGE_SNAP_BY_ORDINAL32</span><span class=\"token punctuation\">(</span>Ordinal<span class=\"token punctuation\">)</span></span></span>\n<span class=\"token keyword\">typedef</span> IMAGE_TLS_DIRECTORY32           IMAGE_TLS_DIRECTORY<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> PIMAGE_TLS_DIRECTORY32          PIMAGE_TLS_DIRECTORY<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span></code></pre></div>\n<ul>\n<li>IMAGE_TLS_DIRECTORY 구조체는 x86/x64 bit로 설계되어 있다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+UlEQVQY032Pb0+DMBCH+/0/h9Esyh+zRPH1XuuiDtAAWaQGpF2BctuwndeagTFuUZ9Xd3nud5cjZ+cnE/d0cuG7l1feNLgOboIg8H3fcRx3wDvA9zxvVI7jkFVTZq8pEx2vQW53xh4AAHXdAEBTN5wx2cp+2yulEPeDRPDVMnux1hqD1uIQMcYYxH1NKZ3fzdMkfbh/DBdhtAiFEFprpZTWmnDOkyTrOrC/UVVvNKeM8bIoi6JoW/m1e4BAB0kclzRfy2az3owHRxCxqqrv1pijnyxpZefOouktnT0xpXc/HSIKIezfkL7vo+dlnObw/nHkjDEA8E/4E3T7ghgVPInCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./1.png\"\n        title=\"./1.png\"\n        src=\"/static/047eb756a6e49b68888846fb2d4bde8e/37523/1.png\"\n        srcset=\"/static/047eb756a6e49b68888846fb2d4bde8e/e9ff0/1.png 180w,\n/static/047eb756a6e49b68888846fb2d4bde8e/f21e7/1.png 360w,\n/static/047eb756a6e49b68888846fb2d4bde8e/37523/1.png 720w,\n/static/047eb756a6e49b68888846fb2d4bde8e/47aef/1.png 1063w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>RVA 01AAF3A0 해당 위치에 구조체 멤버를 확인해보겠다.</li>\n<li><code class=\"language-text\">AddressOfCallbacks</code> 멤버는 TLS 콜백 함수 주소 (VA 형태) 배열을 가리키며 배열의 끝은 NULL로 표시한다.</li>\n<li>프로그램에 TLS Call Back Function 를 여러 개등록할 수 있다.</li>\n<li>프로세스가 시작될 때 Entry Point 코드 실행 전에 시스템에서 AddressOfCallback 의 배열에 저장된 함수를 하나씩 호출한다.</li>\n</ul>\n<h3 id=\"tls-call-back-function\" style=\"position:relative;\"><a href=\"#tls-call-back-function\" aria-label=\"tls call back function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TLS Call Back Function</h3>\n<ul>\n<li>리버싱 분야에서 Anti-Debugging 기법으로 주로 많이 사용된다.</li>\n<li>TLS Call Back Function은 EP(Entry-Point) 보다 먼저 실행되는 특징을 가지고 있다.</li>\n<li>프로세스의 스레드가 생성/종료될 때 마다 자동으로 호출되는 콜백 함수</li>\n<li>프로세스의 메인 스레드가 생성될 때도 콜백 함수가 호출된다.</li>\n<li>Entry Point 코드보다 먼저 호출되어 Anti-Debugging에서 많이 쓰인다.</li>\n<li>스레드의 생성시점과 종료시점에 2번 자동으로 호출되는 함수이다.</li>\n<li>프로세스의 EP 코드를 실해하는 메인 스레드가 실행될 때 TLS 콜백 함수가 먼저 호출되는 원리이다.</li>\n</ul>\n<h3 id=\"image_tls_callback\" style=\"position:relative;\"><a href=\"#image_tls_callback\" aria-label=\"image_tls_callback permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IMAGE_TLS_CALLBACK</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">typedef</span> <span class=\"token function\">VOID</span>\n<span class=\"token punctuation\">(</span>NTAPI <span class=\"token operator\">*</span>PIMAGE_TLS_CALLBACK<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>\n    PVOID DllHandle<span class=\"token punctuation\">,</span>\n    DWORD Reason<span class=\"token punctuation\">,</span>\n    PVOID Reserved\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>TLS 콜백 함수 정의는 DllMain() 함수 정의와 비슷 한 것을 알 수있다.</li>\n</ul>\n<h3 id=\"dllmain\" style=\"position:relative;\"><a href=\"#dllmain\" aria-label=\"dllmain permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DllMain()</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">BOOL WINAPI <span class=\"token function\">DllMain</span><span class=\"token punctuation\">(</span>\n    HINSTANCE hinstDLL<span class=\"token punctuation\">,</span>  <span class=\"token comment\">// handle to DLL module</span>\n    <span class=\"token module\">DWORD</span> fdwReason<span class=\"token punctuation\">,</span>     <span class=\"token comment\">// reason for calling function</span>\n    LPVOID lpReserved <span class=\"token punctuation\">)</span>  <span class=\"token comment\">// reserved</span></code></pre></div>\n<ul>\n<li>\n<p>파라미터의 순서와 의미도 동일하다.</p>\n</li>\n<li>\n<p>DllHandle 파라미터는 모듈의 핸들, 로딩 주소 이다.</p>\n</li>\n<li>\n<p>Reason 파라미터는 TLS 콜백 함수가 호출된 이유</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">defind</span> <span class=\"token expression\">DLL_PROCESS_ATTACH  <span class=\"token number\">1</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DLL_THREAD_ATTACH</span>   <span class=\"token expression\"><span class=\"token number\">2</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DLL_THREAD_DETACH</span>   <span class=\"token expression\"><span class=\"token number\">3</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token expression\">DEFINE </span><span class=\"token macro-name\">DLL_PROCESS_DETACH</span>  <span class=\"token expression\"><span class=\"token number\">0</span></span></span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"dll_process_attach\" style=\"position:relative;\"><a href=\"#dll_process_attach\" aria-label=\"dll_process_attach permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DLL_PROCESS_ATTACH</h3>\n<ul>\n<li>프로세스의 메인 스레드가 main 함수를 호출하기 전에 등록된 TLS 콜백 함수들이 호출된다.</li>\n<li>이때 Reason  값은 1(DLL_PROCESS_ATTACH)</li>\n</ul>\n<h3 id=\"dll_thread_attach\" style=\"position:relative;\"><a href=\"#dll_thread_attach\" aria-label=\"dll_thread_attach permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DLL_THREAD_ATTACH</h3>\n<ul>\n<li>TLS 콜백 함수들이 모두 종료되면 main 함수가 실행된다.</li>\n<li>사용자 스레드를 생성하는 순간 Reason = 2(DLL_THREAD_ATTACH)로 TLS 콜백 함수들이 동작한다.</li>\n</ul>\n<h3 id=\"dll_thread_detach\" style=\"position:relative;\"><a href=\"#dll_thread_detach\" aria-label=\"dll_thread_detach permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DLL_THREAD_DETACH</h3>\n<ul>\n<li>TLS 콜백 함수들이 모두 종료되면 사용자 스레드로 생성한 해당 함수가 실행된다.</li>\n<li>그리고 스레드 함수가 종료되는 순간 Reason = 3(DLL_THREAD_DETACH)로 TLS 콜백 함수들이 호출된다.</li>\n</ul>\n<h3 id=\"dll_process_detach\" style=\"position:relative;\"><a href=\"#dll_process_detach\" aria-label=\"dll_process_detach permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DLL_PROCESS_DETACH</h3>\n<ul>\n<li>사용자 쓰레드가 종료되면 스레드의 종료를 기다리던 main 함수(메인 스레드) 역시 종료한다.</li>\n<li>이때 마지막으로 Reason = 0 (DLL_PROCESS_DETACH) 값으로 TLS 콜백 함수들이 호출된다.</li>\n</ul>","excerpt":"Thread Local Storage (TLS) 프로세스의 모든 스레드는 가상 주소 공간을 공유한다. 함수의 지역 변수는 함수를 실행하는 각 스레드에 공유한다. 정적 및 전역 변수는 프로세스의 모든 스레드에서 공유된다. 즉, 스레드 별로 독립된 데이터 저장 공간이며 스레드 내에서 프로세스의 전역(Global) 데이터나 정적(static) 데이터를 마치 지역(Local) 데이터 처럼 독립적으로 취급하고 싶을 때 사용한다.  IMAGE_DATA_DIRECTORY[9] PE 헤더의 TLS Table 항목이 세팅된다. IMAGE_NT_HEADERS - IMAGE_OPTIONAL_HEADER - IMAGE_DATA_DIRECTORY[9] {: width=“65%” height=“65%“} RVA 01AAF3A0 주소에는 IMAGE_TLS_DIRECTORY 구조체가 있다. IMAGE_TLS_DIRECTORY IMAGE_TLS_DIRECTORY 구조체는 x86/x64 bit로 설계되어 있다. …","frontmatter":{"date":"January 03, 2021","title":"TLS(Thread Local Storage CallBack)","categories":"Windows","author":"Zer0Luck","emoji":"🍯"},"fields":{"slug":"/window_5_theori/"}},"next":{"id":"8bae5613-f9be-5dec-b3bd-b1a20a7b17af","html":"<h1 id=\"metaversploit\" style=\"position:relative;\"><a href=\"#metaversploit\" aria-label=\"metaversploit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MetaVersPloit</h1>\n<h1 id=\"vulnerability-analysis-of-commercial-metaverse-based-virtual-office-platform\" style=\"position:relative;\"><a href=\"#vulnerability-analysis-of-commercial-metaverse-based-virtual-office-platform\" aria-label=\"vulnerability analysis of commercial metaverse based virtual office platform permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vulnerability analysis of commercial metaverse-based virtual office platform</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACg0lEQVQoz2WTS0+TQRiFB+hVkAIVKKVXSoEWCpRepBdaKKWl5Vool6JURDDRoBh3LEwIxgUJGxMTE+IfMLrSuNKExA0b40IT/gd7k8fMV4Kii5M5+b6Z877nzDuiWmOnRutApXP+B/ld/q9S26g1dGMw9nK90UNjcx8GoxdtnZuoZ5iTzS3O7+/zc/EAIQ+KagtCtCGE+WK94DWWS/GmFh8WR5g2S4DO7hFcXXGsjpv09SbZy63ybXOPk8IhQq3vIBKfZ2LyFsnUEulsiUJxm/nFLby+lMLLG09YKT1keu4us4VNZb8UloItZj8DniT5oQxjjlWEtOXuSRCOzBAITxEI5wlHZ4knFxkYyiqIJxcUxBILjIwW8Q1M4HBFcbpjylmzLUyTyYfdlqp06A/mGE0vE0sUGM+UGI7NkZsu4w9OKh1LLh2MpVdIpIqkcyXW1nco3d7B7oogVFYlpmSqWMlwcCiriEgrXt84U7MbpLNrlc6js4qQxFA4j80Sw1w/SnNjFM01l3JxGn0Hoqqdfn8GUaVx0NU7hj+UJzWxquQm7UtxWURalzwUmSGXKLM7eMS+7yurPW9pMWQuJqSjMhUaB8Jt9RLoCWBq9qCv76LZNKiMh4SMQwjTxe230qmL8aL7mNeh7+wFzwjZnqHSuajW2qjW2hVR8eV5gdP9ZV6uZPC2ey4tqP+BSu/EWOcjYMwTby0TbnuAtWkOrc5DfW2QtvopOhvuIc4/PObXu0ecH+/y6s4SphseqjT2K8Ot0v7hSkGdC7VO5ufEXDfPiPENOeNn0k0fEe8PVjg9WufH4RafnpbptfUj1HbUf78arfPKa6q5LGDHWbvNovFMQaThmN/Z2V2zzbbO5QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1-main.png\"\n        title=\"1-main.png\"\n        src=\"/static/cf410f29cff6a4f04c40449382d0b508/37523/1-main.png\"\n        srcset=\"/static/cf410f29cff6a4f04c40449382d0b508/e9ff0/1-main.png 180w,\n/static/cf410f29cff6a4f04c40449382d0b508/f21e7/1-main.png 360w,\n/static/cf410f29cff6a4f04c40449382d0b508/37523/1-main.png 720w,\n/static/cf410f29cff6a4f04c40449382d0b508/302a4/1-main.png 1080w,\n/static/cf410f29cff6a4f04c40449382d0b508/07a9c/1-main.png 1440w,\n/static/cf410f29cff6a4f04c40449382d0b508/29114/1-main.png 1920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h1 id=\"author\" style=\"position:relative;\"><a href=\"#author\" aria-label=\"author permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Author</h1>\n<aside>\n💡 Best of the Best 10기 취약점 분석 트랙 MetaVersPloit(이하 MVP) 팀\n</aside>\n<ul>\n<li>김재기 멘토 (주), 정광운 멘토 (부)</li>\n<li>강우원 PL</li>\n<li>김영운 PM, 김두영, 김용식, 안희성, 조준희, 전예찬</li>\n</ul>\n<h1 id=\"goal-\" style=\"position:relative;\"><a href=\"#goal-\" aria-label=\"goal  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Goal 🚀</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSUlEQVQoz5WTy09TQRTG+8ehG+Mf4MLER3zFuDWaGB/BhWEjcQEs0IWGQBMUFDFiayshukAToTZ9Qm8Ltkh77+19tvcx9/7MHQQSdp7kmzlzJnPmfN+ZScVxjG1ZuI6DaZiYhoHnedi2jeM4GIZBv99HVVV0XZfQNE0iiR/GfN8nsZQQgkwux/LKR96+X2Jx6R3ZfI75xQXyq1+o1WpUq1WKxSKlUolKpSL9BPV6nXK5LP3kcpkwiiL+lGrsbvyiXarSKVVpbRbZ2Siidfb4H0vYppLB21fx93r4PU36QjPw9roMDBPHdTFNU0pgWZZEsk6kSGLJ+UMcVVhXFLZ3WtSUBtutpsRWs8W2oqA0WyhKk0ajwU6riW1bWKYhkyY0YxFBFBNH8XGFrtHH1nUcXUNXVXrdLq7Rw+yrOIaKriUN6dPTbbzwBE0gOuZMKpmzbY276w2mKx3c8GB7oRQzuhozW4gR0QEd8fsDojxO0M7KJFEgCOfLhOM/CL53ZPJUe+ByJpfn4WaB09nPvN5toHRhZDJiLBdzakKQ2QK0dcLMZeLiFOLTRUKvSbBSxjs3iX9rhuGlaYKOTqrhGJz9lub6z2VG1maY6xQotWBkVHBtKubUo5DFAtBeI5y7CZkxorkbBGad4dJX7Au3Gdx7inX1Pp7SOaCcbm9wpZBmtJZB9V1Jb+JNxPkHEU9eCdzkzYqAIPOS8MUd/NW0pCxsG2P2Ofqzx1j5FRlLHerpCP+E1DH2ID7yD8UPh8PjJvzbdWyD3f19+Vv+AvPLIssbn+cGAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"project-intro.png\"\n        title=\"project-intro.png\"\n        src=\"/static/27f12ad7c7b564d61afdd09291b48c1d/37523/project-intro.png\"\n        srcset=\"/static/27f12ad7c7b564d61afdd09291b48c1d/e9ff0/project-intro.png 180w,\n/static/27f12ad7c7b564d61afdd09291b48c1d/f21e7/project-intro.png 360w,\n/static/27f12ad7c7b564d61afdd09291b48c1d/37523/project-intro.png 720w,\n/static/27f12ad7c7b564d61afdd09291b48c1d/302a4/project-intro.png 1080w,\n/static/27f12ad7c7b564d61afdd09291b48c1d/07a9c/project-intro.png 1440w,\n/static/27f12ad7c7b564d61afdd09291b48c1d/c6720/project-intro.png 1922w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>근 미래 메타버스는 현재의 모바일 시장을 넘어서 시공간 제약 없이 사용할 수 있어 기업, 민간, 정부 등 다양한 인프라가 구축되어 인간과 밀접한 관계성이 생성되기 때문에 물리적인 위협이 아닌 보안에 대한 위협이 증가하게 되어 안정성이 떨어질 수 있습니다.</p>\n<p>이번 프로젝트의 목적은 메타버스 플랫폼의 급격한 성장 속에 파고드는 보안 위협을 새싹부터 자르기 위해 메타버스 기반 가상오피스 플랫폼 서비스를 시작하는 스타트 업부터 시작해서 현재 Meta 회사 사명을 바꾼 Facebook의 Horizon 취약점 연구를 진행하였습니다.</p>\n<p>메타버스 가상오피스 플랫폼의 공통적인 기능, 공격 벡터를 산출하고 이를 기반으로 취약점 분석을 진행하여 공통적인 취약점과 다양한 연구를 진행함으로써 인간의 안전을 지키기 위해 수행하였던 메타버스 기반 가상 오피스 플랫폼의 사이버 공격 완화에 기여하고자 합니다.</p>\n<h1 id=\"introduction\" style=\"position:relative;\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h1>\n<h2 id=\"what-is-virtual-office\" style=\"position:relative;\"><a href=\"#what-is-virtual-office\" aria-label=\"what is virtual office permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Virtual office?</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACtklEQVQoz1WSz2scZRyHh0LxUA8eSlsRL570D+hJems3AYtIDgFzK3jxaA8ekh5SSm4tnoMpS5SqYLYGJEIgCbZQkyZNdrvb3Wx2M7szO5mZd975PZtkQ3TmkRko4uGF9/J+v5/P87wKgJSStbV1emqfJBkyPz/P8vIyw+GQdrtNtVrF8zy63S4rK3/gSAdxFNDf91CbHoctwZHukJGhZFmG67r8vrLMfqfO+T+nzM3NUS6XSdMUXdfpdDqcn/+NbQtWV1exLBOjL6ltauy90Nh90UXtHMHbgfl2tR5R/8vl9daAk+NTzs7OiscLCwv89PMTfnxSprz4mI2NDXzfx/MlXuAQxi5eIPEDjzTNUNIsQ7oOz34JePyty2/ftzEMgzAMmZiY4PLlK1y6eA1FeR9FUbh1s0QUR5imyeLiDzx8+IinlaeYpvX/hKYh0bqSgWYjpUMcJ0xOTnL16jW++OxLxm5M8eGVT7h9+3NOT0+o1WpMT08zOzvLzMwMrVYr14GSpXlCieNauL6N9ASOIxgOjxkfH+fu3W84T4+RgcH9B/colUqFuLxFpVKh0WiwtLRUJC4GQor6xmd7JeB5xWftV43GK43R6ISx8RJj17/iu68PeHBni08/vsOt0k3iOC5ECiFQVRUhHHzPJ2+rZFmKbUk6rQHN1yrtZh+9b5IkCVNTUwW39975iHcvfsAF5VKBIQwjhLARwir45/f86+VtC4Z+4DMwNNR+B8PUC2O5yf12i929Har1LWqNbXarL2kf7BMEPqYuae9J3mw71DYH6H37Pyl55G5d0tiUNPcMbNsu6vSaPgc7MfXnMdU/Q3bWHV6uaww0E2EL9J5dHK1nYlnibeWMOInx3RDHipAiKBgVnESIbYQYhyGDwwCj5zHoScIgIkliojgkTiLCKCjEjkYj/gXJmuUGJES2NQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"project-intro-1.png\"\n        title=\"project-intro-1.png\"\n        src=\"/static/8219b7d6154c41fc05b225c32a36231b/37523/project-intro-1.png\"\n        srcset=\"/static/8219b7d6154c41fc05b225c32a36231b/e9ff0/project-intro-1.png 180w,\n/static/8219b7d6154c41fc05b225c32a36231b/f21e7/project-intro-1.png 360w,\n/static/8219b7d6154c41fc05b225c32a36231b/37523/project-intro-1.png 720w,\n/static/8219b7d6154c41fc05b225c32a36231b/302a4/project-intro-1.png 1080w,\n/static/8219b7d6154c41fc05b225c32a36231b/07a9c/project-intro-1.png 1440w,\n/static/8219b7d6154c41fc05b225c32a36231b/c6720/project-intro-1.png 1922w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><code class=\"language-text\">메타버스</code>라는 키워드는 다양한 분야에서 사용되고 다양한 속성이 부여되어 독특한 특성을 갖게 되어집니다. 다양한 특성중에 크게 5가지 의 특성을 살펴볼 수 있습니다.</p>\n<ul>\n<li>Seamlessness : 메타버스 와 현실간의 연속된 작업 진행</li>\n<li>Presence : 메타버스 속 현실에 가까운 실재감</li>\n<li>Interoperability : 메타버스 와 현실의 실시간 정보 공유를 바탕으로 다양한 경험 획득</li>\n<li>Concurrence : 시공간의 제약 없이 다양한 사람들과 서로 다른경험을 할 수있는 환경</li>\n<li>Economy : 메타버스 속 경제의 흐름</li>\n</ul>\n<p>이러한 특성은 공통으로 현실과 가상세계의 실시간 상호작용으로 볼 수 있겠습니다.</p>\n<p>메타버스속 가상 오피스는 앞선 특성을 포함한 체 가상 오피스만의 기능을 활용하여 또 하나의 가상 세계라고 볼 수 있겠습니다. 현실 세계의 오피스 환경이 메타버스와 실시간으로 상호작용하면서 사용 자간의 다양한 경험을 시공간 제약 없이 어디서든지 연속적으로 접근하며 기업의 경제적 흐름을 더욱더 증진합니다.</p>\n<p>가상 오피스는 회의실, 사무실, 문서 작업, 미팅 등 현실 속 회사 업무의 환경을 그대로 메타버스 로 결합한 형태입니다.</p>\n<h2 id=\"metaverse-virtual-office-platform-service-statistics\" style=\"position:relative;\"><a href=\"#metaverse-virtual-office-platform-service-statistics\" aria-label=\"metaverse virtual office platform service statistics permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MetaVerse Virtual office platform Service statistics</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABo0lEQVQoz61S2Y7aQBD0//8dYARmvYggGbM+8dyeq6JuQ57yEiktjVxqVVfVtKcAgHHosdvtcCxLVFWFuq5xPB5xOp34ez6fcTgcGF+vV+ZQj3j7/R5lWUIIQVIopEuwAf+lcs4oXAQe3Yiv7ytCjOgGjaqqcb//glIaTdNgEQrf9xZ1/YXn84f7l8sFL6HwGBVz19VvCf26YpomdF3PDj5k9MOMbpjYoB9nCGUgtcPj2UFIhdUHNO0PjF2xaIfbveFeJsG+73G73TAMA+Z5RkoRUlssUrPj9BJwb/dhXnjw0/chIqXESVPKmyAJ0bW6rkPbtvDeQ2oDbR1yBuZFIsSEGLfBmBIfITWLEB5nwRziF8YYTkdJrbXsLpXZXHNmsjaOh4dpgXWe+/304uR02OgjGELAOI4sSJhKGwu7boO0P9olJSGjT8JZKE4V3sm3hBlFjJF/Ch3CnFAbKGN5J+NLwLr1nXaBD4Hx9JLwPrDQvKg/T6egpTrn+LrkQEXC4S1OAlIqSCn5aRCf+z4wphljLP9QumHxt8f5L5iKhGhlFOQ3iLhSC69Oc4kAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Project-intro-2.png\"\n        title=\"Project-intro-2.png\"\n        src=\"/static/a6e106673ab4d1db05a73a32238089d3/37523/Project-intro-2.png\"\n        srcset=\"/static/a6e106673ab4d1db05a73a32238089d3/e9ff0/Project-intro-2.png 180w,\n/static/a6e106673ab4d1db05a73a32238089d3/f21e7/Project-intro-2.png 360w,\n/static/a6e106673ab4d1db05a73a32238089d3/37523/Project-intro-2.png 720w,\n/static/a6e106673ab4d1db05a73a32238089d3/302a4/Project-intro-2.png 1080w,\n/static/a6e106673ab4d1db05a73a32238089d3/07a9c/Project-intro-2.png 1440w,\n/static/a6e106673ab4d1db05a73a32238089d3/29114/Project-intro-2.png 1920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>메타버스를 기반으로 서비스를 운영 중인 Gather, oVice, Kumospace, Spatial, Horizon 플랫폼의 최근 약 4개월간의 Monthly visits, Monthly unique visitors, visits/unique visitors, visit duration, pages per visit, Bounce rate 데이터를 표로 나열하였습니다.</p>\n<p>해당 데이터를 통해 COVID-19 로 인해 언택트 업무가 증가함에 따라 메타버스 가상 오피스 서비스가 추세적 상승을 하는 것을 확인할 수 있으며 뿐만 아니라 전 세계 적으로 “언택트 업무가 더 효율적이다.” 의견이 많아짐에 따라 가상 오피스에 관심이 커지고 있습니다.</p>\n<h1 id=\"project-approach-methodology\" style=\"position:relative;\"><a href=\"#project-approach-methodology\" aria-label=\"project approach methodology permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Project Approach Methodology</h1>\n<h2 id=\"project-point\" style=\"position:relative;\"><a href=\"#project-point\" aria-label=\"project point permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Project Point</h2>\n<p><img src=\"./%EA%B7%B8%EB%A3%B9_4478.png\" alt=\"그룹 4478.png\"></p>\n<p>우리는 약 4개월의 시간 동안 계층적으로 메타버스 가상오피스 플랫폼 취약점에 대해 연구를 진행했습니다. 메타버스 가상오피스 플랫폼 환경의 취약성을 판단하기 위해 웹 애플리케이션 상에서 서비스 기능과 권한 전반적인 기술 스택을 분석하였습니다. 취약성이 판단된 부분에 대해서 바이너리 애플리케이션 환경에서 해당 기능이 다른 애플리케이션에 대해 교차 검증 및 각 기술 스택에서 발생하는 취약성 및 공통적인 기능 에 대한 취약성 등을 분석하여 계층적으로 깊이 있는 분석을 진행하여 취약점을 발견할 수 있었습니다.</p>\n<h2 id=\"vulnerability-analysis-methodology\" style=\"position:relative;\"><a href=\"#vulnerability-analysis-methodology\" aria-label=\"vulnerability analysis methodology permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vulnerability analysis methodology</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB20lEQVQY0yVRTUiTAQB9rs2tqEuEQXTpoLkujYrWyQ5JZB06RHUKB3WIMDEoFEOpgQXVQYoKUuwSFkIaHmIyhqFNWq1SXM65fV/LbLbNqd83P933txefHd7h/VzeewAEhOaJt9E8XIDDZncdddgdXgAeAG4AB2x2V11lpesIgP0AaizP7nDWO7fuqD3f9gJTEvEkvAGJrADAiqEZvXF4Rr2KkxHX2ZcESfRNrJwbni621rUH9/gz/7XnE8rxYFLtuDnwq9biIon7Y6Y7mNRuPxqVvcIagUBMuVsoalxVNAZich/Abb0h7VpW0qiUdEZEJQQ3q/xvtIZYeknN5guMzC2lTj80qi900ZP4q/7eUHWKeVXpHMp58D1VHE//THJeiDOckKUan/m0Z1AVF/8IFBMxJhZW9EPNen9XL8cFYZbRT2NaXFzgpcdmv+8Og4vZZc7FJ9V8vsDX4dIVDIyWL2ZyRilX0MuDH0rNkwLR8758LJ0xs8uSwVBU67bq+V+Ze3+IRkxeMxieKr0DmrbglO78NmsE5KLB6ZT55UxLogo5mWhsXd93uV3a3MXC1xRxwifvvu4vHrQ40I2Rz8Qu7+r2G/fWDwO3bE0PJDwb4eYHvpaP9c6dDdVW9h/27COPllP6xQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vuln-analysis-method.png\"\n        title=\"vuln-analysis-method.png\"\n        src=\"/static/b78fc8f9c8f823b0835cc54e095aaf1b/37523/vuln-analysis-method.png\"\n        srcset=\"/static/b78fc8f9c8f823b0835cc54e095aaf1b/e9ff0/vuln-analysis-method.png 180w,\n/static/b78fc8f9c8f823b0835cc54e095aaf1b/f21e7/vuln-analysis-method.png 360w,\n/static/b78fc8f9c8f823b0835cc54e095aaf1b/37523/vuln-analysis-method.png 720w,\n/static/b78fc8f9c8f823b0835cc54e095aaf1b/302a4/vuln-analysis-method.png 1080w,\n/static/b78fc8f9c8f823b0835cc54e095aaf1b/07a9c/vuln-analysis-method.png 1440w,\n/static/b78fc8f9c8f823b0835cc54e095aaf1b/1f6b7/vuln-analysis-method.png 1909w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>우리는 취약점 분석 방법론을 구축하여 대상 애플리케이션에 대한 취약점을 분석하였습니다.</p>\n<ol>\n<li>Function analysis by target</li>\n<li>Technology stack analysis</li>\n<li>Architecture and attack vector configuration</li>\n<li>Attack Vector Selection</li>\n</ol>\n<p>4가지 순서대로 취약점 점검을 진행하는 대상 애플리케이션에 대한 기능을 분석하여 열거를 하였습니다. 분석 대상마다 서로 다른 기능이 존재 하지만 공통적인 기능이 존재하여 이를 분류하는 작업과 취약한 부분이 있을 경우 매칭하여 리스트를 만들었습니다.</p>\n<p>웹/바이너리 애플리케이션 환경에서 분석한 데이터를 기반으로 기술 스택 리스트를 만들어 기능 리스트와 매칭하여 각 플랫폼 마다 아키텍처를 구성하였습니다. 구성된 아키텍처에서 취약한 공격 벡터를 구성하여 최종적인 공격 벡터를 선정하였습니다.</p>\n<h2 id=\"common-functions-for-each-metaverse-virtual-office-platform\" style=\"position:relative;\"><a href=\"#common-functions-for-each-metaverse-virtual-office-platform\" aria-label=\"common functions for each metaverse virtual office platform permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Common functions for each MetaVerse Virtual office platform</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACvElEQVQoz02S3W8UVRjG9//AxAvuSASlBAoU2mgMGi5MTDAE0GDSCqIGUVJJWluBxP/ACBckXHhVYwnBC0OyUqHFQqW7s2V3u9873+xHuzv7MbNndmZ+ZGch8e7Nec75ned53zcCUK1rJNMxcsXnFEop0hmJfClJoZwik0+QySXYSK2RyUmU1c1QS2djbGbjoR69v0JSKtNteUSKSUF6zSGz7iAt2zxftYf1I5vEsv3qzOHZgy7rS13iD22ePbCJ/TPUlu9ZzJ1O8fNUhutnU0R++Mhg8oDC1KjKiZ1lPtsj8/Bum6XFFokVm+jvLf77u8vKnx2iC8M6utAMP1habBNdsPjy0Drfjq9xcXydyPwpk+8+0Ln4vs7ZvQrnx1RquktzSwy6Qd0UBPgEgY+15QIBVrMdata2S8dyuTwR59Lov0y/F38F/FDn8nGdLw6qnDukImcEpbQTPs4nbDpWn2a9j5xxcIVPfsPG6weYWouKajM9FmfmyCpXjsaJzH5i8NWExoWjGlMHVM4fVtEKgpohQqAp97A7fTqWR0UTIVAvCjzPp6q51HTBldE40+88YWZMIvLTmaHDAXRyv8K5wypKViBnnTBWYcMJp9e2BEa5g+97GFqdIAgwlA5VzWFmn8T8vlVm90tE5k6afPOuxtcTGp/ulsPIA4cvlF4IrJoWPcel23apvejSd31MpY3vB9QrXbYMh9k9ErO7njA/Ig17eOmYzvfHdSZfR84P3AwdVkKgoNXwMEq9EKhke/i+j1EWVBXB1bclrr31lOsjicHa6FwYH8Y9tUvm8xEFeVOg/D9y26PV6KPmHby+TzFph/1V8z0q5R4zb8SY2/GYH9+MEfnrtyZ//LLNnRsNFn9tcOdmI7yolxys7SFksDqDIemlHttVF63g0Ki5mLLALApufZzjxrEkt0/meAmKhd0dcrKZIQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"common-functions.png\"\n        title=\"common-functions.png\"\n        src=\"/static/a1c00b871841925ed8481d11635ffb9f/37523/common-functions.png\"\n        srcset=\"/static/a1c00b871841925ed8481d11635ffb9f/e9ff0/common-functions.png 180w,\n/static/a1c00b871841925ed8481d11635ffb9f/f21e7/common-functions.png 360w,\n/static/a1c00b871841925ed8481d11635ffb9f/37523/common-functions.png 720w,\n/static/a1c00b871841925ed8481d11635ffb9f/302a4/common-functions.png 1080w,\n/static/a1c00b871841925ed8481d11635ffb9f/07a9c/common-functions.png 1440w,\n/static/a1c00b871841925ed8481d11635ffb9f/c6720/common-functions.png 1922w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>리스트는 선정한 5가지의 메타버스 기반 가상 오피스 플랫폼별 기능 중 팀에서 연구를 통해 수많은 기능 중 공통된 13가지의 기능 리스트입니다. 세부적으로 가상 오피스 내부 공간을 space라 칭하며space 출근/퇴근 기능, 회의실 출근/퇴근, space에 초대하는 기능, Space/Room 내부에 다양한 Object를 생성/삭제/수정, 내부 콘텐츠를 공유, 채팅 (음성, 영상, 글), 접근 통제, Space 생성/삭제/수정, 사용자 권한, 외부 문서 공유 기능으로 나누었습니다. 산출된 공통 기능들 중 플랫폼별 체크리스트 형태로 정리를 하였습니다.</p>\n<h2 id=\"technology-stacks-to-metaverse-virtual-office-platform-enumeration\" style=\"position:relative;\"><a href=\"#technology-stacks-to-metaverse-virtual-office-platform-enumeration\" aria-label=\"technology stacks to metaverse virtual office platform enumeration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Technology Stacks to MetaVerse Virtual office platform Enumeration</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACt0lEQVQoz22Sy28bdRSF/R+yZsG2CyTaAoKWRiJFVFYStWkpbVrykEsfC0QQ4pUQIZEipY6TOI09Nnn4OZ7x2DOe+XnGnrHn4fF8VRKJFWdz7zm6m/PppsqHPb6/W2N9pcbzxSqr82W+SxdZTktk7hdZmS+wdFtibUHi8e0jMoslnj0o8+1snpW5Eo++klieL3Lvi0POSj1SpQODD95Lc+PqQ668n+belzmuX8mx+viIyp91Chsq+9suu5sD/lhxOc3aVLKCci6k+HpIecugtmMhbVkYakiq1TB5+M0Sa6sZlp48Ird9Rv2tz4QIv60yGdhAjDcc4zkxrjBwdBVIgBDGJnTqEA8ZOgGpZrXH/bvLzKUXWZh7wD9bZboyeLKGVW2xfyAhNxREN6BR8GnJOrWawsiLcc0hQaWGX2/iNxRsyydVP9P56MPPuXVzlmtXP2V7Q6J9GhO4I+yGijBtfD9E6D6N4hhN1ZGbCmMvYuQGhEqLcT5PKPo4IiClNPo8W13n5/VNXr1YZ2+7wVF2SLtlopbqaCdtOppNuzmgeuihdwR6x2Lo+HhuSBQGBEIQTWJs4Z9XNpm5eYc7Xy8wc2uWjd/2eZUp8OLpLxxky/z0Q57nL//mbUEm8sB2bISwONckSph2NCYnJyTOgIETkTK0ETuvJfJ7x+TeSBxLBuZeldHOG2zdwlPahJ0Oth1itHycvktfDC4qj72ASbdDWK8TmhZOPyB1UlL55NrMBcOPr3/Gjy+zZNb+Ra4oOOUKoqbiiCF626N9FqJ3TVRFYxJOGY8iJrbNRFVJwuiSoaG5bP66y1+bObZ+36VcUOl2bXrGEOO0Ra8tMK0RXc3BsUdoioUq9xDGCEt3cVQT/VSmeSxj9TxS/I+SJCGZTi8+bZokTM/38xlP/7u5zC69H0WIfp84jnkHbfsFvpfPNUcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tech-stack.png\"\n        title=\"tech-stack.png\"\n        src=\"/static/0f308b4b617d8f4954a786c0026a0ad5/37523/tech-stack.png\"\n        srcset=\"/static/0f308b4b617d8f4954a786c0026a0ad5/e9ff0/tech-stack.png 180w,\n/static/0f308b4b617d8f4954a786c0026a0ad5/f21e7/tech-stack.png 360w,\n/static/0f308b4b617d8f4954a786c0026a0ad5/37523/tech-stack.png 720w,\n/static/0f308b4b617d8f4954a786c0026a0ad5/302a4/tech-stack.png 1080w,\n/static/0f308b4b617d8f4954a786c0026a0ad5/07a9c/tech-stack.png 1440w,\n/static/0f308b4b617d8f4954a786c0026a0ad5/29114/tech-stack.png 1920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>앞서 13가지 공통 기능과 함께 아키텍처를 구성하기 위해 기술 스택 분석을 진행하였습니다. 해당 리스트는 선정한 5가지의 메타버스 기반 가상오피스 플랫폼 별 기술 스택을 정리하였습니다. 각 플랫폼 마다 바이너리/웹 애플리케이션 환경에서 사용되는 중요 기술에 대해 구분을 지었으며 공통적으로 핵심 기술 스택 부분인 front-end, back-end, ipc 카테고리로 분류하였습니다.</p>\n<p>13가지 기능과 기술 스택을 매칭하여 가중치가 높게 나온 기술 부분에 대해 중점적인 취약점 분석을 진행하였습니다.</p>\n<h2 id=\"architecture-and-attack-vectors-by-platform\" style=\"position:relative;\"><a href=\"#architecture-and-attack-vectors-by-platform\" aria-label=\"architecture and attack vectors by platform permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Architecture and attack vectors by platform</h2>\n<p>아키텍처 및 공격 벡터 선정에 있어 앞서 메타버스 기반 가상 오피스 플랫폼 별 기술 스택과 공통 기능 리스트를 분석을 통해 산출된 데이터를 기반으로 구성을 진행하였습니다.</p>\n<ul>\n<li>kumospace (web)</li>\n<li>oVice (web)</li>\n<li>Gather (web/PC binary)</li>\n<li>Spatial (web/mobile/PC VR)</li>\n<li>Horizon workrooms (web/mobile/VR)</li>\n</ul>\n<p>선정한 5가지 플랫폼에 대한 아키텍처를 구성한 후 공통 기능 13가지 부분에 대해서는 hotspot point를 잡았고 나머지 Unique 한 기능에 대해서는 cold Spot point로 잡아 최종적인 공격 벡터를 선정하였습니다.</p>\n<p>선정된 공격 벡터는 IPC 개념에서의 Web Socket 통신을 활용해 Avatar, Map, Theme 등 실시간으로 적용되는 콘텐츠와 Voice, Screen Sharing을 위한 WEB RTC 통신 과정에 대해 Hooking과 클라이언트 처리 과정에 대해서 Code Auditing을 진행하였습니다.</p>\n<p>Origin-API, Third-Party API 개념의 공격 벡터는 각 웹/바이너리 환경에서 특정 네트워크 처리를 진행하는 부분과 base Language에 관련된 모듈을 Code Auditing과 Application Request/Response 과정을 분석하였습니다.</p>\n<p>oculus VR 장비의 Application으로 Android APK의 전반적인 공격 벡터로 Code Auditing과 관련 모듈에 대해 JNI, Third-party lb에 대해서 Hooking을 통해 흐름 분석을 진행하였습니다.</p>\n<p>각 플랫폼별 내부 콘텐츠/오브젝트에 관해 구현된 언어와 기능적 부분을 공격 벡터로 선정하여 로직 버그 및 보호 대책 미흡 부분을 우회하는 방안으로 분석을 진행하였습니다.</p>\n<h3 id=\"kumospace\" style=\"position:relative;\"><a href=\"#kumospace\" aria-label=\"kumospace permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kumospace</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACjElEQVQoz1XTy08TURTA4cbErSvFFX+KIcaFiWFlWLkwMTEa48qdJmgU38bEGA0GNT5QAXkUQVAotWCtFCgU7dCOaSl98Sh9DHSgddqZuT/TAUFPcpJ7b3K/e3JOrg0hsEIIhDCAaprbKVjLZ4iGZcIhCSWb3joXJhjV1BGmwb+GzdpUMQSkw+g/RtEmHGiBXsiOMt3/lrq6Bg7XHUce6IYpB2XfAHqiDzPwBRIRxLaxAwpzG4zMUI6Mo8x0sRQYoxjpIDbn5WbTdZouX2FlXoZcispiBF2JYi5FENKkBf5FbeJvudWIS5jrSYqZH6gxF1ouCmg8aunkQ5/DagGaCuVN0HVYz0MksHNdWBUClbJGYdnLhqcVtb+V3LSbNSVGMpEiHo9xpP48p881kllJs5hKUljLoiR9qJKdjd6nFNzDVDTNQi1wdSWDLzDNlOTH4/yG3/WRQdcYE1KcqeAvDh07y4kzFwkmlnH7g4x6J/kVDTMhTfJ9fJqvPe0k54O74OKCH4+rk5EvHnrs/dx+cx+vHKD6phSN8LLtHa2dHaSUVVQM5lNh5qbsDDnGcDrdXG2+y7DPuQuGQm6e9p3m+eA97rxr4tqzRkLxWLVj6LsdttYVIJmN8955iZZPjTzufkBj8wW+Tbh2wXRRZWDBz61ZJ/c9PoLyPOFsmievX/Oqo5233V202XtoefmCrpHPLG/kcPwc46E0xA2fD28ibQ2sWsB/U06USuRUhd+Kwmwyzr4D+6nZs5f6mlqOHqzFZrPRcOok6/ompcwKiaJC3tzENCoUCgV0Xd+qsIoapknZEBQNgWoK678sZTJIc3PIskwgGCQgh1BLRcqAKnQ0o0JZGBRLJfL5PIZh8Af9JAQ5AkKmtAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"21 – 1.png\"\n        title=\"21 – 1.png\"\n        src=\"/static/64b8477123f0830e2dc6b1bb47f5a150/37523/21__1.png\"\n        srcset=\"/static/64b8477123f0830e2dc6b1bb47f5a150/e9ff0/21__1.png 180w,\n/static/64b8477123f0830e2dc6b1bb47f5a150/f21e7/21__1.png 360w,\n/static/64b8477123f0830e2dc6b1bb47f5a150/37523/21__1.png 720w,\n/static/64b8477123f0830e2dc6b1bb47f5a150/302a4/21__1.png 1080w,\n/static/64b8477123f0830e2dc6b1bb47f5a150/07a9c/21__1.png 1440w,\n/static/64b8477123f0830e2dc6b1bb47f5a150/29114/21__1.png 1920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"ovice\" style=\"position:relative;\"><a href=\"#ovice\" aria-label=\"ovice permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>oVice</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClUlEQVQoz1WTa08TQRSG/Uca4x/xoxoTo4nxC/ESbzECKgRIECIioIiCVEDl1iACJVwMUiorha7FLt22btkWC922tmq3wO72MVtB8U3emTnJnCdvcmYOFYtFbNm7aRpYlmlXewZd3yYYVJCkMPl8gf37tgzTwjQtDjIO2Ytd26CZOYGmtlfcb+6hrr6FtrZWKu+2c/TYSQ4fOc6dqifUt7yh/qGD6uoaGh91894tUiz+gf4FWnY6Y4fXQ5M4R2fp7B6i780wva8GmZ8XuHylnLKyGywKPvyBCO5FkUXBy8KiSO/gdCmlZR0A7mvU5SYoR4iEwyzMziH6/CQSCbLZLNlsjs0tjaSWRtMy7BgWsW8Z3ro8f/tLQPtQ0AtUVpRz4swlTp2vorljgGh8g0DkK2oyhZrUWN/aIqZpyGqMeOY7nY6XnDx9jtMX7nHz7lN+/syXoCVgQA7T0NlFj3OE+45hBvv7CKxHSe0aLHwW8fj9CGsRPAGZ1K6OFFPpGxvn4bPndDhd1DW1EvR7/wHfiQGeuSbxjPfR3tJPg3MQIbRKPJ3l6vVb1NQ2UF7dyrXbjcTTSVaiCq0fPMxPOel/4aD68QDDHycOAH0iF0cGqHB0cP7xANeHXEhxlbVwFHF5lczGJnoyTUZRkWQZaXOD8qlJKoZecrW9m7NdY0wsffoHjP/QGA0JPFiZp3kpxEo0wQ/TZFrw4upxIkzOkA4pKF4/bq+XlKEzoSzTHXRTu+RjTtmEveH+N+UZLcqyFicUTbCmrrOiqnhXZb7IIfxrMj5JQowpSGocRVVZSH1FyifAMsjlchiG8Sfh/qNMbesk9TyFXYOCaWL/GQPY3bNRcpGCZaAbO2zpOX6ZO+h6gXQ6jWma/Ab/q/t7U/e3GgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"28 – 1.png\"\n        title=\"28 – 1.png\"\n        src=\"/static/9023e97fb499398a9bf926f68326a23b/37523/28__1.png\"\n        srcset=\"/static/9023e97fb499398a9bf926f68326a23b/e9ff0/28__1.png 180w,\n/static/9023e97fb499398a9bf926f68326a23b/f21e7/28__1.png 360w,\n/static/9023e97fb499398a9bf926f68326a23b/37523/28__1.png 720w,\n/static/9023e97fb499398a9bf926f68326a23b/302a4/28__1.png 1080w,\n/static/9023e97fb499398a9bf926f68326a23b/07a9c/28__1.png 1440w,\n/static/9023e97fb499398a9bf926f68326a23b/29114/28__1.png 1920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"gather\" style=\"position:relative;\"><a href=\"#gather\" aria-label=\"gather permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gather</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpklEQVQoz02Ty09TQRSHCQsTd/4Prly4wRijhrVL3bjQRGOiUVcmYGQhGlEDJCIIFQSj+ADKq5UCsRahlIK8Wh4t7S2FvngFLYVKW9tie+/tZ26LgV9yZk5mku/8cs5MXiaTQZGyi2IGSQRZBknKIMsZ9hJp3K4AbpefZDyFrJxnQySdEhHTEocZecqSC3BYNtC+G6W19htdjTPo29apeaaj4NQVCk5d5s0LDR2qAdR1Rtpfe/jSPIl9apkDxj5QViwBw70OJgfd6LsmqK/oYlS/xoTZRenDSh7cL8M+68EnbCLM+Fmyh3BaVxjUTpNjHAJCzvLk4BIbgV0sJjdttUO4ZoKk/kBVfTfqLiOIEA0niIaTpPdS/FoPMW5Y4L+yQCX5u5fCrF+ntlRPdUkrPS1jbPyM4RCC2BwrFF64xdUbJXg8WwjuTTaD24wZ/bTUTFNx7wOdjQYS8b0sNAv0egJ0Giz0DVspf/wIXWc7/UMmJux+fFvbXLx2l+LH5QRCEcxzLgbMZoxTTnpGnNSrGqh+9pQV7/IBsFtjQNfxmRW7Ad2bMlRtz/nhtJEAQsk4VpeDBd8yO6k4CURMljneNzWzKhgZUdfxUlXM4PTAAbDho4aiotuM971C/baG1sZKnMs+lFEl9zus5In9XlmFJa7fvMOErppPTVU0q8oYNX0/AO78jfE1ME/5nIniUQv9Xh8L4Z+oe3WotRratRratN2ov2ho7+thNrxG09IIT2b6qbDamVrdyQ1FAf5/lIpWE3Gc0S2E2Da230HOFBaSn5/H8YITnDx3iSNHj3H6/Flsu5ssxkMIsV9E5DiSlCIajSKKYs5h9pfIMmkpgyiBKOWK7EQi2AQnTp+XRa+feccC25Hd7J0oSYiyREqWSCSThMNhJEniHwX275WDyQQLAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"38 – 1.png\"\n        title=\"38 – 1.png\"\n        src=\"/static/62973378c4f9873a4c5fe3be44d1f56a/37523/38__1.png\"\n        srcset=\"/static/62973378c4f9873a4c5fe3be44d1f56a/e9ff0/38__1.png 180w,\n/static/62973378c4f9873a4c5fe3be44d1f56a/f21e7/38__1.png 360w,\n/static/62973378c4f9873a4c5fe3be44d1f56a/37523/38__1.png 720w,\n/static/62973378c4f9873a4c5fe3be44d1f56a/302a4/38__1.png 1080w,\n/static/62973378c4f9873a4c5fe3be44d1f56a/07a9c/38__1.png 1440w,\n/static/62973378c4f9873a4c5fe3be44d1f56a/29114/38__1.png 1920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"spatial\" style=\"position:relative;\"><a href=\"#spatial\" aria-label=\"spatial permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Spatial</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQElEQVQoz3WR3UtTcRjHve3f6Kar6LaLICi6iKIu8iK7KS+UKGapvdELhuEbpEaiTSdpBNor4jRzbpYbWzLbkLY13VbnbG6e+b6p2TnZ2T6xo5sv4Rd+8Hu+8Hx4nu+Tl06nySitqkTDYeLxKDPxGOuKrPmSFMNqtTFsthARRLIKBgO43W7tBQKBDUY6TV5qEzi1sMCtykdcL6vj9NlihmxOFmXQ6Sppbm6kQf+Ed+bBHNBkstDa2ob+mR673aF5qVRqCzg2LWGwj/LYOMHRmm663/RgqW3iwP4TlBTepvBOE/dq9Mh2K2uSRH+Hh0mPiMs1yrDFjCAIGicvu7LyWyYihnlp7KOu3YCts4O+omscPniKrs4hWpt6aSm5T6j6IabPY+g+OqkyfqHkRjuldxtJJBK7gMoforFp1lZX4O86obkFap87yL/YwIP6F1Tbxjn3vh+3NItTlLD+iOENx7E6/ExNz29lmP1klY1gLpHkg81F14ADi9PHp5CE0ePH9M2Hb2qWqDhHPD6PrCg5mAbMXXnTyNbLKwqvjX4KLhsor2hHEGY03x6JEUwus13b+/YEzsyv8rbPS3lFN1UNr5iYjNATXOT84BhlI/bMKjt6chOyS5nTZ+QaD1Gsq+dKaSNFV2sxdPTSZv7KvkNnuFDzdGOIVGpHXNqEu4GqugEcHnFx5Ngl8gvKOX6ymNKbdSTWZAYGbXhDItuzVxSFZDKJqqr/A7cy/IXHF8Q/+RPv9yCCGN0zN1mWWVpa0oD/ACj/ArR7bObJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"45 – 1.png\"\n        title=\"45 – 1.png\"\n        src=\"/static/e21b93b40acd173b390a0cb4c2f49fb2/37523/45__1.png\"\n        srcset=\"/static/e21b93b40acd173b390a0cb4c2f49fb2/e9ff0/45__1.png 180w,\n/static/e21b93b40acd173b390a0cb4c2f49fb2/f21e7/45__1.png 360w,\n/static/e21b93b40acd173b390a0cb4c2f49fb2/37523/45__1.png 720w,\n/static/e21b93b40acd173b390a0cb4c2f49fb2/302a4/45__1.png 1080w,\n/static/e21b93b40acd173b390a0cb4c2f49fb2/07a9c/45__1.png 1440w,\n/static/e21b93b40acd173b390a0cb4c2f49fb2/29114/45__1.png 1920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"horizon-workrooms\" style=\"position:relative;\"><a href=\"#horizon-workrooms\" aria-label=\"horizon workrooms permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Horizon Workrooms</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC7klEQVQoz0XTT0yTBxzGcU8aTwuiHvRgnAIudh40wtSIDDjMVUxED1XGthQajUaBuRUE0eIsKbZgBYRClYkof1apmIKvQBHLWpyBIm+p8kdJ1kaMKbBMiW0Mga+hyfJefsnzO3yS5/AsA5ifn2d4YAiX3Yn1z/v0d9zlaWcrJlMt5utmhAaBh2126uqqaWmop8PWjtVyD6FdoFvoxNHzmFAotESxbOm88U+hSFRQoMpDZ6iiVpvF+ZwfSVZkknnwF7ITLnLyaCHZqjMoFUrkqmyKtDqulpTyQ8p+IlcsxyOKEvhuaorjhxWYqyrxvfUzNjqGWqPmStlN2k0Ojh36iZNHT9N98ymG4jJUeWpGRjz4/f9QeqmQiJURDA4OS+B/M28oPpNMUqyM2B27iYvbxp7tm1F+n4A2PZXM/XtQyRPQpKeSvlPGhi+Ws0UmY+v2b1gXGcHO9auYHB+VwLkP72luMCGP/45DexUY1Hosd+7jetTMmKOFv+1tOIR7eHubGBRacAptNFtb0ZZVoSsxYCo3Mvn6tQQuVczNz0dXVEpng52/6l24hCEmJ17R88RJr6Mfp8tNRbUFQ/kdhK4+vN5RctW/ERu3i33fJtHZ1SWBw8Mi+xIT2R0bT97PZTxqcSI881LUaiEqKoYkuRxzYxM5BZc5f/kqVmsHjr5+5CkHiFy9hjVr12IwGCTQ7XYTFfMVX26Kxqi7hc3cQ1O7iwtWCxs3RhOfmoy6toCCWxpuPKjD2dvH8+dDmGpquKgpQpWRwcGUFAkcGBgkOmYLW2Vfo0g9gqmigsetHTRX1pGXpeZcVi6Xzmmo0VdT/ruRypJyGv9oJBCY5mPoE6L7GTnZWRIoiiJKpZJfz54lLS2NK3o9Pp+f+tu3sdlsaIu1nDh1ItzkpfcFI6IHj+hBr9djNF7jQmE+dnu3BC4sLITD4uIi/+dgMMiHuTmmZ2eYnplm9t9ZgqFQ+B8MBcPL8Pl8jI+PMzHxikAgEF7cZ2DPexB1yF+RAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"54 – 2.png\"\n        title=\"54 – 2.png\"\n        src=\"/static/94e6b93c53fa646d55e635713f440df5/37523/54__2.png\"\n        srcset=\"/static/94e6b93c53fa646d55e635713f440df5/e9ff0/54__2.png 180w,\n/static/94e6b93c53fa646d55e635713f440df5/f21e7/54__2.png 360w,\n/static/94e6b93c53fa646d55e635713f440df5/37523/54__2.png 720w,\n/static/94e6b93c53fa646d55e635713f440df5/302a4/54__2.png 1080w,\n/static/94e6b93c53fa646d55e635713f440df5/07a9c/54__2.png 1440w,\n/static/94e6b93c53fa646d55e635713f440df5/29114/54__2.png 1920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"metaverse-virtual-office-platform-common-attack-impact-list\" style=\"position:relative;\"><a href=\"#metaverse-virtual-office-platform-common-attack-impact-list\" aria-label=\"metaverse virtual office platform common attack impact list permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MetaVerse Virtual Office Platform Common Attack Impact List</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC30lEQVQozyWR709aBxSG+ff2wWTZF/fFpJqYZpuJ2fhg1qVLszWmVtsIrK3WgIDiBbkFAa1SEK4IFLmKgoqACBZQfmhJJKKDOJ/F25Oc5OQk583zvkf1tdZl3Z3D506y6cvhdaZZ+5DG+yHLmpghsJLBJezgEQ5YsuyxYjtA+phn05dV7tzCHlsbBbZD5zTr/6HakVrMTVSwTxcR/skjvr1g8vdd1H0O1H1LuGbLRNxdlg0t/MItVl2Z10/CGF7JjI+EMU7kmHoRYeKJhOQpobqsdjktnrEj77Mtp6hXWwQDIcZf/8WkbgzRsUB8O0z4s59oLMiC1Ujfo14GHz/i+x++IxT2I234cC0vUqs2UdUrXRJyDqfdi2cpwHG6wWYwwczMexZtdt69m0KvNzA29hJRdBBYl/jtVzW9vT8yOPiY49wJ2UwOWZbp3IDqS/6KRDyD5I/j90Y5TJZZcQd59uxPtBotOp0OrVZLIpHg/PycRqOBIAiMjo5itVoplcoIgpV5yxynJzVUZ8U2xfwFnzdTxCL7VMs32IUVfv7lJ0ZGRhgeHkatVmMwGDCbzbx585b+/n4GBgbo6elBkjbwuD0YTbN8bbRRVQrXlApNUrsF9vcKVEs3SOtx3s9Ms7q6iiiKxGIxut2u0vVaHaPRyNDQEHq9nna7TSqVIi5vcXvNN8GPHgm7dRmb4CYUSCjWxydeUigUqdfrXF5eKmIPlclkFVKLxcL8/DzlUplwOILP5+Wq2UHVqHRJJvK4HD5sC25y6RpB/xYa7SRTU9OYTCai0Sh3d3fc38PRUUbZOZ1OhTQejysurDaBo8PTB8Ibdh++LH7C5fCTPawp89Onf/D87+d4vV7K5TKdTkcRrVTOFDqNRqM8JX+cx2JZwDxn4stJHdVDZplUDf+aTGg9yWmuRUQ6wLrgxCmuYp5dJOCLcn11p4Tebt1zdFDE5fhEMV+lewsJOc1WNEnz4l/+B+acwiITUgZUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"common-attack-Impact.png\"\n        title=\"common-attack-Impact.png\"\n        src=\"/static/75d6cfa75c8a71d24b09c6df3fd6f723/37523/common-attack-Impact.png\"\n        srcset=\"/static/75d6cfa75c8a71d24b09c6df3fd6f723/e9ff0/common-attack-Impact.png 180w,\n/static/75d6cfa75c8a71d24b09c6df3fd6f723/f21e7/common-attack-Impact.png 360w,\n/static/75d6cfa75c8a71d24b09c6df3fd6f723/37523/common-attack-Impact.png 720w,\n/static/75d6cfa75c8a71d24b09c6df3fd6f723/302a4/common-attack-Impact.png 1080w,\n/static/75d6cfa75c8a71d24b09c6df3fd6f723/07a9c/common-attack-Impact.png 1440w,\n/static/75d6cfa75c8a71d24b09c6df3fd6f723/c6720/common-attack-Impact.png 1922w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>메타버스 가상오피스 플랫폼에서만 발생할 수 있는 공격 영향을 선정하여 실제 가상 오피스에서 보안 위협이 발생하였을 때 위협이 될 만한 자원 대상별 공격 영향을 산출하였다. 각 공격 영향을 산출하여 핵심적으로 취약점과 연관된 영향 총 10가지를 선정하였다. 도청은 가상 오피스에서 회의 나 1:1 대화 시 송수신되는 데이터를 중간에서 가로채는 방식으로 엿듣는 과정이 실제 물리적 환경이 아닌 사이버 공간에서 발생하여 파급력이 높으며 시공간 제약 없이 내부 데이터를 실시간으로 훔쳐 올 수 있는 피해가 존재합니다.</p>\n<p>정보 노출은 현실의 기업에서도 내부 기밀 유출에 대해 내부, 외부 상관없이 보안 측면에서 신경을 많이 쓰지만 사이버 공간에서 데이터가 밀접하게 노출된 가상 오피스에서는 민감 데이터의 노출 여부가 엄청난 파급력이 발생합니다.</p>\n<p>그 외에도 다양한 리스트에 정리한 임팩트 부분에서 실제 물리적 환경에서 발생할 수 없는 케이스로 DOS로 가상의 공간에서 DOS로 인해 회사 업무를 처리할 수 없는 상황이 발생할 수 있으며 외부의 사용자가 회사 내에 접근하여 데이터 탈취가 가능할 수 있고 실제 회사에서만 사용할 수 있는 기능, 제품을 강제로 사용할 수 있는 부분 등 리스트에 열거한 공격 임팩트가 가상 오피스에 발생할 수 있습니다.</p>\n<p>다음 대표적으로 가상 오피스를 운영하는 애플리케이션 환경에서 로직 적 결함 및 버그 케이스로 인하여 RCE 취약점이 허용되면 기존의 물리적 환경에서의 기업을 운영하는 처지에서 기업 내부망에 결함이 생긴 것은 동일하지만 왜/내부망 상관없이 가상 오피스에서는 실제 기업 환경의 내부에 침입하여 매우 위험한 상황이 발생할 수 있습니다.</p>\n<h1 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.7777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFL0lEQVRIx3VVW2xUVRTd8uVXZ6YxNU0MiSMhmBgjpfKm1BgV0SBoIgkhEhODxuhHTZAY/FA+UAraKCmVCHwIKArhUWJAwBDUdlpsaTvTmc6r08e0Q2k773Ze95y9zDl3OgwUT7Jz9t13n3XX2vucc4mIXiait4loQ3GuL8beIqLnieg1IlpDRDVEtKX47iUierOYv6n4fnPxPT1hs9merq6uXmK1WtfZbLYVVqt1jcViWV9VVfWMxWKps1qtaysrK5fZbLaVyiorK5dbLJZ6lWe1Wlfb7faFFRUVtUS0hBYsWEDNzc1069YtBb6ciOqIaDERvUBES4sslb+SiJ4koheJaC0RPUdEr6pYa2srNTU1aSwCQIVCYauU8hCArwA0AtjPzGo+MPc8a86NkDgoJR9UsaI1CiEOZTKZbQqLmHkxADCzNikl5kZ3txsXr97E1PlrSF+6iRu+FOK5NBgCgmVpjRpqndfrfZaklLXFYF5KNgAYzGzs/rzJqHhshVH3+k6je/8xI9v4s7Hr3F3j2OG0EesxdB7YzFVrFUZ/f3+9Alxa/JKUUiNzw65GtlWv4Z9OXeJcLs8SYAFwzgD/dW6GP7t6gb8bushKlxYHlgrD5XKtU4A1ip4QQmnlP663w1K1Cudb/8RcKaQQEIYBVrAA9gRP45Fr7yOcTukUySXAOg2oHoTQxeNtO3Zjw6YP9ELDMO6rqfYlkBUFXHB8guTgVfWo5M0HVPlK3op127Cv8ccSoBoOhwPt7e0mqChAZ3duB1+vVT5rklLeA5TSBJyZyXDt6q1o+v5ECTCfz6O3txd9fX3I5XJgaUAJF7c/Bl9frguo1t4HONcUJXnj5g+x4709GjCfyyMajSIej+t5cvIupCqDSrxRB27bYjJkcb9kk43ZlCNHz+DxhesxEBgymyLMupkmTblTV4BfCTz6m06ZB1jOMJ8vYP0r76J+9TtID8fMuulVpmW7kkgf34787Z1qaxQZljeF2WyKZCkMoQkMjAzj6EdHMLrsNKJ7OpA+F0T6TADTn7Yh/NQJRPa1IVP8EpsdLQMUosbkbRLh4hYxcjkkW1y4s/ESxleexfiqs7jzxu9IHvdAzqjuC/PoAQ8AAjWYzQLDEYnhCHMyjUQqhUw2U9rYYjIDMZUBo2wUPz2PIYAaMXIHuZOXZe7kZc47A/AOBjE2GlZpKrNUP81IyDlm5qGbD8g1oZTEEZ8hf/AJ7p4yMDo0iAGvF263W+8/n9eHgD9QRo7L/QcBRU0sDDhOQbafBI+7gZFwCF6vDwMDA3A6nfB4POomQTAYVGce5dfdQyUPRKPY2+mQX3S0c1tkHEPBIHx+P2ZnZ5FMJpFIJLSl0+l5LB8KOJYO4LT/gPzF38ieaAdGQmGMjI6gUCggk8no45fNZjEzM1MC/V+GhupyLAB0fivReZAx1oFAaBTufhcCgYCWq6QruV6vF6FQ6N61JnWD2LxLZYnh0pwvheg3PhE94ONsZ5T9QwEecHvY5XKxx+Nhp9PJ4XCYyw4MF5nNmSiXvMzrD2Hv14fx5b5m/OPoxthYGH6/XzNSDJU/x1Q1KRwOa5aK7cTEhL6FVHncbne9AqyIx5N/Dw2Fc4Oh0WQslkglk8nU9PR0Kh6PpxKJRCoWi2l/ampKx1UMQMrpdKa6urqShUIhG41G/21paanWv9FQoP/RRGxiUWw6Yu939tq7u2/b3W63va+vz97T02N3uVza93q9do/Ho2NXrlyxT05O2iORiN3hcCxqaGioUL/R/wCpDrvu5mr74gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vuln-chart-.png\"\n        title=\"vuln-chart-.png\"\n        src=\"/static/93262f560ed14aa94d7966d31ab636ce/37523/vuln-chart-.png\"\n        srcset=\"/static/93262f560ed14aa94d7966d31ab636ce/e9ff0/vuln-chart-.png 180w,\n/static/93262f560ed14aa94d7966d31ab636ce/f21e7/vuln-chart-.png 360w,\n/static/93262f560ed14aa94d7966d31ab636ce/37523/vuln-chart-.png 720w,\n/static/93262f560ed14aa94d7966d31ab636ce/a1792/vuln-chart-.png 780w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>BoB 프로젝트를 통해 약 4개월간 취약점에 대한 경각심을 갖고 사용 메타버스 기반 가상 오피스 플랫폼에 대한 보안성 향상을 목적으로 분석을 진행하였습니다. 총 31건의 취약점을 발견할 수 있었습니다. 분석을 진행하였던 5개의 플랫폼에서 각기 다른 웹/바이너리 애플리케이션 환경에서 저희가 구성한 취약점 분석 방법론에 맞춰서 분석을 진행하였습니다. 공격 벡터 선정에 있어서 13가지의 가상 오피스 공통 기능과 기술 스택을 기반으로 아키텍처를 구성하여 각각의 hotspot, coldspot 영역을 참고하면서 기능적 흐름에서 버그가 발생하는 부분에 대해 Security Misconfiguration 취약점이 큰 비중을 차지하여 로직 버그가 발생하였습니다. 로직 버그 취약점을 활용하여 공격 시나리오에서 연계 공격으로 DOS, 기능 우회 방안 등 이용할 수 있었습니다.</p>\n<p>대상 애플리케이션 환경에서 Third-party API와 Origin-API를 활용하여 통신하는 과정에서 API Manipulation 취약점을 활용해 특이성을 발생 시켜 권한 상승, 정보 노출 등 크리티컬한 취약점까지 연계가 가능하였습니다. 가상 오피스에서 자신의 아바타를 이동하거나, 다양한 콘텐츠를 활용하는 경우 web Socket을 활용하여 실시간으로 데이터를 처리하는 데 있어 클라이언트 환경에서 서버 측으로 받아온 데이터 처리가 미흡하여 발생한 Socket Manipulation 취약성을 통해 음성, 영상 도청 등 내부 콘텐츠에 대한 취약성을 찾을 수 있었습니다.</p>\n<p>현실의 물리적 공간으로 사용되는 회의실, 미팅룸 등 공간적인 개념을 가상 오피스에서는  Space, Room 개체를 활용해서 내부에 Object를 생성하는 기능을 구현하는 데 있어서 각기 다른 방식으로 개발을 진행합니다. 공통된 기능이지만, 오피스에 속하지 않는 사람이 실제 해당 오피스에 접근할 수 없도록 권한 분리 및 접근 통제 기능이 구현되어 있습니다. 하지만 이러한 기능에서 개발적인 실수 로 인하여 접근할 수 없는 사람이 강제적으로 해당 오피스에 접근을 할 수 있어 가상 오피스 내에 데이터를 탈취하거나, 모든 데이터를 삭제하는 등 악의적인 행위를 발생할 수 있는 취약성이 존재하였습니다. 각기 다른 방식으로 구현된 가상 오피스에서는 웹/바이너리에 사용되는 기술에서 Unity Engine과 멀티 플레이 최적화를 위해 Photon Server와 실시간 통신을 하기 위한 WEB RTC 개념이 사용되고 있지만, 개발 당시 클라이언트, 서버 측에서 제대로 권한 관리 및 세션 노출 등 교차 검증이 미흡하여 손쉽게 공격자가 중간에서 데이터를 탈취하거나 데이터를 악의적으로 변조하여 클라이언트 측에서 공격을 수행하는 과정이 발생하였습니다.</p>\n<p>특정 가상 오피스 애플리케이션 환경에서는 구현된 내부 오브젝트로 가상의 책상, 화이트보드, 화면, 화분 등이 사용되고 있습니다. 물리적 환경에서의 회사는 이러한 물건들을 대상으로 시각적인 효과 기능적인 요소로 사용되고 있지만, 가상의 공간에서는 사용자와 밀접한 연관이 있게 되며 평범한 오브젝트라도 사용자 클라이언트 측에서 자원을 사용하게 되어 같은 메모리 공간에 존재하기 때문에 해당 객체의 기능적 결함으로 인한 취약점이 발생하여 사용자에게 공격이 가능한 벡터가 존재합니다. 이번 취약점 분석에서 웹 애플리케이션 환경의 외부 콘텐츠를 불러올 수 있는 객체 기능의 보안 결함으로 XSS 취약점이 발생하여 해당 취약점을 이용해 권한 상승 및 다른 사용자들의 세션 탈취, 내부 함수를 이용한 특정 DOS 등 다양한 공격이 연계될 수 있었으며 또한 code Execution이 가능하여 실제 window/mac OS 환경에서 Remote Code Execution 취약점까지 수행이 되어 실제 가상 사무실을 이용하였을 때 크리티컬한 취약점이 수행될 수 있었습니다.</p>\n<p>본 팀은 기간 내에 성공적으로 목표 달성을 수행하며, 상용 메타버스 기반 가상 오피스 플랫폼 취약점을 연구하고 관련 취약한 부분에 대한 대응책과 취약점 분석 방법론을 공유하며 이후 계속해서 발전하는 메타버스 환경의 취약점을 분석하는 사람들에게 도움이 되었으면 합니다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#what-is-virtual-office\">What is Virtual office?</a></p>\n</li>\n<li>\n<p><a href=\"#metaverse-virtual-office-platform-service-statistics\">MetaVerse Virtual office platform Service statistics</a></p>\n</li>\n<li>\n<p><a href=\"#project-point\">Project Point</a></p>\n</li>\n<li>\n<p><a href=\"#vulnerability-analysis-methodology\">Vulnerability analysis methodology</a></p>\n</li>\n<li>\n<p><a href=\"#common-functions-for-each-metaverse-virtual-office-platform\">Common functions for each MetaVerse Virtual office platform</a></p>\n</li>\n<li>\n<p><a href=\"#technology-stacks-to-metaverse-virtual-office-platform-enumeration\">Technology Stacks to MetaVerse Virtual office platform Enumeration</a></p>\n</li>\n<li>\n<p><a href=\"#architecture-and-attack-vectors-by-platform\">Architecture and attack vectors by platform</a></p>\n<ul>\n<li><a href=\"#kumospace\">Kumospace</a></li>\n<li><a href=\"#ovice\">oVice</a></li>\n<li><a href=\"#gather\">Gather</a></li>\n<li><a href=\"#spatial\">Spatial</a></li>\n<li><a href=\"#horizon-workrooms\">Horizon Workrooms</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#metaverse-virtual-office-platform-common-attack-impact-list\">MetaVerse Virtual Office Platform Common Attack Impact List</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 24, 2020","title":"[KR]Vulnerability analysis of commercial metaverse-based virtual office platform","categories":"projects","author":"Zer0Luck","emoji":"🔎"},"fields":{"slug":"/project_MetaVersPloit/"}},"prev":{"id":"221bd0db-e02b-58bb-9a44-6e40646b30e7","html":"<h1 id=\"teb-thread-environment-block\" style=\"position:relative;\"><a href=\"#teb-thread-environment-block\" aria-label=\"teb thread environment block permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TEB (Thread Environment Block)</h1>\n<ul>\n<li>프로세스에서 실행되는 스레드에 대한 정보를 담고 있는 구조체</li>\n<li>스레드별로 TEB 구조체가 하나씩 할당된다.</li>\n<li>OS 종류별로 해당 모양이 조금씩 달라진다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_TEB</span> <span class=\"token punctuation\">{</span>\n  PVOID Reserved1<span class=\"token punctuation\">[</span><span class=\"token number\">12</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  PPEB  ProcessEnvironmentBlock<span class=\"token punctuation\">;</span>\n  PVOID Reserved2<span class=\"token punctuation\">[</span><span class=\"token number\">399</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  BYTE  Reserved3<span class=\"token punctuation\">[</span><span class=\"token number\">1952</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  PVOID TlsSlots<span class=\"token punctuation\">[</span><span class=\"token number\">64</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  BYTE  Reserved4<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  PVOID Reserved5<span class=\"token punctuation\">[</span><span class=\"token number\">26</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  PVOID ReservedForOle<span class=\"token punctuation\">;</span>\n  PVOID Reserved6<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  PVOID TlsExpansionSlots<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> TEB<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>PTEB<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token number\">0</span><span class=\"token operator\">:</span><span class=\"token number\">001</span><span class=\"token operator\">></span> dt _TEB\nntdll<span class=\"token operator\">!</span>_TEB\n   <span class=\"token operator\">+</span><span class=\"token number\">0x000</span> NtTib            <span class=\"token operator\">:</span> _NT_TIB\n   <span class=\"token operator\">+</span><span class=\"token number\">0x01c</span> EnvironmentPointer <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x020</span> ClientId         <span class=\"token operator\">:</span> _CLIENT_ID\n   <span class=\"token operator\">+</span><span class=\"token number\">0x028</span> ActiveRpcHandle  <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x02c</span> ThreadLocalStoragePointer <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x030</span> ProcessEnvironmentBlock <span class=\"token operator\">:</span> Ptr32 _PEB\n   <span class=\"token operator\">+</span><span class=\"token number\">0x034</span> LastErrorValue   <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x038</span> CountOfOwnedCriticalSections <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x03c</span> CsrClientThread  <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x040</span> Win32ThreadInfo  <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x044</span> User32Reserved   <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">26</span><span class=\"token punctuation\">]</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x0ac</span> UserReserved     <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x0c0</span> WOW32Reserved    <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x0c4</span> CurrentLocale    <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x0c8</span> FpSoftwareStatusRegister <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x0cc</span> ReservedForDebuggerInstrumentation <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">16</span><span class=\"token punctuation\">]</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x10c</span> SystemReserved1  <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">26</span><span class=\"token punctuation\">]</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x174</span> PlaceholderCompatibilityMode <span class=\"token operator\">:</span> Char\n   <span class=\"token operator\">+</span><span class=\"token number\">0x175</span> PlaceholderHydrationAlwaysExplicit <span class=\"token operator\">:</span> UChar\n   <span class=\"token operator\">+</span><span class=\"token number\">0x176</span> PlaceholderReserved <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span> Char\n   <span class=\"token operator\">+</span><span class=\"token number\">0x180</span> ProxiedProcessId <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x184</span> _ActivationStack <span class=\"token operator\">:</span> _ACTIVATION_CONTEXT_STACK\n   <span class=\"token operator\">+</span><span class=\"token number\">0x19c</span> WorkingOnBehalfTicket <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span> UChar\n   <span class=\"token operator\">+</span><span class=\"token number\">0x1a4</span> ExceptionCode    <span class=\"token operator\">:</span> Int4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x1a8</span> ActivationContextStackPointer <span class=\"token operator\">:</span> Ptr32 _ACTIVATION_CONTEXT_STACK\n   <span class=\"token operator\">+</span><span class=\"token number\">0x1ac</span> InstrumentationCallbackSp <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x1b0</span> InstrumentationCallbackPreviousPc <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x1b4</span> InstrumentationCallbackPreviousSp <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x1b8</span> InstrumentationCallbackDisabled <span class=\"token operator\">:</span> UChar\n   <span class=\"token operator\">+</span><span class=\"token number\">0x1b9</span> SpareBytes       <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">23</span><span class=\"token punctuation\">]</span> UChar\n   <span class=\"token operator\">+</span><span class=\"token number\">0x1d0</span> TxFsContext      <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x1d4</span> GdiTebBatch      <span class=\"token operator\">:</span> _GDI_TEB_BATCH\n   <span class=\"token operator\">+</span><span class=\"token number\">0x6b4</span> RealClientId     <span class=\"token operator\">:</span> _CLIENT_ID\n   <span class=\"token operator\">+</span><span class=\"token number\">0x6bc</span> GdiCachedProcessHandle <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x6c0</span> GdiClientPID     <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x6c4</span> GdiClientTID     <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x6c8</span> GdiThreadLocalInfo <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x6cc</span> Win32ClientInfo  <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">62</span><span class=\"token punctuation\">]</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x7c4</span> glDispatchTable  <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">233</span><span class=\"token punctuation\">]</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xb68</span> glReserved1      <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">29</span><span class=\"token punctuation\">]</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xbdc</span> glReserved2      <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xbe0</span> glSectionInfo    <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xbe4</span> glSection        <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xbe8</span> glTable          <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xbec</span> glCurrentRC      <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xbf0</span> glContext        <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xbf4</span> LastStatusValue  <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xbf8</span> StaticUnicodeString <span class=\"token operator\">:</span> _UNICODE_STRING\n   <span class=\"token operator\">+</span><span class=\"token number\">0xc00</span> StaticUnicodeBuffer <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">261</span><span class=\"token punctuation\">]</span> Wchar\n   <span class=\"token operator\">+</span><span class=\"token number\">0xe0c</span> DeallocationStack <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xe10</span> TlsSlots         <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">64</span><span class=\"token punctuation\">]</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf10</span> TlsLinks         <span class=\"token operator\">:</span> _LIST_ENTRY\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf18</span> Vdm              <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf1c</span> ReservedForNtRpc <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf20</span> DbgSsReserved    <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf28</span> HardErrorMode    <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf2c</span> Instrumentation  <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf50</span> ActivityId       <span class=\"token operator\">:</span> _GUID\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf60</span> SubProcessTag    <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf64</span> PerflibData      <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf68</span> EtwTraceData     <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf6c</span> WinSockData      <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf70</span> GdiBatchCount    <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf74</span> CurrentIdealProcessor <span class=\"token operator\">:</span> _PROCESSOR_NUMBER\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf74</span> IdealProcessorValue <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf74</span> ReservedPad0     <span class=\"token operator\">:</span> UChar\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf75</span> ReservedPad1     <span class=\"token operator\">:</span> UChar\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf76</span> ReservedPad2     <span class=\"token operator\">:</span> UChar\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf77</span> IdealProcessor   <span class=\"token operator\">:</span> UChar\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf78</span> GuaranteedStackBytes <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf7c</span> ReservedForPerf  <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf80</span> ReservedForOle   <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf84</span> WaitingOnLoaderLock <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf88</span> SavedPriorityState <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf8c</span> ReservedForCodeCoverage <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf90</span> ThreadPoolData   <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf94</span> TlsExpansionSlots <span class=\"token operator\">:</span> Ptr32 Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf98</span> MuiGeneration    <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xf9c</span> IsImpersonating  <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfa0</span> NlsCache         <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfa4</span> pShimData        <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfa8</span> HeapData         <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfac</span> CurrentTransactionHandle <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfb0</span> ActiveFrame      <span class=\"token operator\">:</span> Ptr32 _TEB_ACTIVE_FRAME\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfb4</span> FlsData          <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfb8</span> PreferredLanguages <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfbc</span> UserPrefLanguages <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfc0</span> MergedPrefLanguages <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfc4</span> MuiImpersonation <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfc8</span> CrossTebFlags    <span class=\"token operator\">:</span> Uint2B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfc8</span> SpareCrossTebBits <span class=\"token operator\">:</span> Pos <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span> Bits\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> SameTebFlags     <span class=\"token operator\">:</span> Uint2B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> SafeThunkCall    <span class=\"token operator\">:</span> Pos <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> InDebugPrint     <span class=\"token operator\">:</span> Pos <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> HasFiberData     <span class=\"token operator\">:</span> Pos <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> SkipThreadAttach <span class=\"token operator\">:</span> Pos <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> WerInShipAssertCode <span class=\"token operator\">:</span> Pos <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> RanProcessInit   <span class=\"token operator\">:</span> Pos <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> ClonedThread     <span class=\"token operator\">:</span> Pos <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> SuppressDebugMsg <span class=\"token operator\">:</span> Pos <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> DisableUserStackWalk <span class=\"token operator\">:</span> Pos <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> RtlExceptionAttached <span class=\"token operator\">:</span> Pos <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> InitialThread    <span class=\"token operator\">:</span> Pos <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> SessionAware     <span class=\"token operator\">:</span> Pos <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> LoadOwner        <span class=\"token operator\">:</span> Pos <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> LoaderWorker     <span class=\"token operator\">:</span> Pos <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> SkipLoaderInit   <span class=\"token operator\">:</span> Pos <span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfca</span> SpareSameTebBits <span class=\"token operator\">:</span> Pos <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> Bit\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfcc</span> TxnScopeEnterCallback <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfd0</span> TxnScopeExitCallback <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfd4</span> TxnScopeContext  <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfd8</span> LockCount        <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfdc</span> WowTebOffset     <span class=\"token operator\">:</span> Int4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfe0</span> ResourceRetValue <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfe4</span> ReservedForWdf   <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0xfe8</span> ReservedForCrt   <span class=\"token operator\">:</span> Uint8B\n   <span class=\"token operator\">+</span><span class=\"token number\">0xff0</span> EffectiveContainerId <span class=\"token operator\">:</span> _GUID</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token number\">0</span><span class=\"token operator\">:</span><span class=\"token number\">001</span><span class=\"token operator\">></span> dt _TEB\nntdll<span class=\"token operator\">!</span>_TEB\n   <span class=\"token operator\">+</span><span class=\"token number\">0x000</span> NtTib            <span class=\"token operator\">:</span> _NT_TIB\n   <span class=\"token operator\">+</span><span class=\"token number\">0x01c</span> EnvironmentPointer <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x020</span> ClientId         <span class=\"token operator\">:</span> _CLIENT_ID\n   <span class=\"token operator\">+</span><span class=\"token number\">0x028</span> ActiveRpcHandle  <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x02c</span> ThreadLocalStoragePointer <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x030</span> ProcessEnvironmentBlock <span class=\"token operator\">:</span> Ptr32 _PEB\n\t <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<h3 id=\"processenvironmentblock-member\" style=\"position:relative;\"><a href=\"#processenvironmentblock-member\" aria-label=\"processenvironmentblock member permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ProcessEnvironmentBlock member</h3>\n<ul>\n<li>0x30 offset 에 위치한 ProcessEnvironmentBlock member</li>\n<li>PEB(Process Environment Block) 구조체의 포인터이다.</li>\n<li>PEB는 프로세스 별로 하나만 생성된다.</li>\n</ul>\n<h3 id=\"nttib-member\" style=\"position:relative;\"><a href=\"#nttib-member\" aria-label=\"nttib member permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NtTib member</h3>\n<ul>\n<li>TEB 구조체의 첫 번째 멤버는 <code class=\"language-text\">_NT_TIB</code> 구조체이다.</li>\n<li>_NT_TIB (_NT_Thread information Block)</li>\n<li>현재 실행 중인 스레드에 대한 정보를 저장하고 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_NT_TIB</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_EXCEPTION_REGISTRATION_RECORD</span> <span class=\"token operator\">*</span>ExceptionList<span class=\"token punctuation\">;</span>\n    PVOID StackBase<span class=\"token punctuation\">;</span>\n    PVOID StackLimit<span class=\"token punctuation\">;</span>\n    PVOID SubSystemTib<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">if</span> <span class=\"token expression\"><span class=\"token function\">defined</span><span class=\"token punctuation\">(</span>_MSC_EXTENSIONS<span class=\"token punctuation\">)</span></span></span>\n    <span class=\"token keyword\">union</span> <span class=\"token punctuation\">{</span>\n        PVOID FiberData<span class=\"token punctuation\">;</span>\n        DWORD Version<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">else</span></span>\n    PVOID FiberData<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span>\n    PVOID ArbitraryUserPointer<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_NT_TIB</span> <span class=\"token operator\">*</span>Self<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> NT_TIB<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">typedef</span> NT_TIB <span class=\"token operator\">*</span>PNT_TIB<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>ExceptionList member는 _EXCEPTION_REGISTRATION_RECORD 구조체 연결 리스트를 가리키고 있다. 이것은 SEH(Structured Exception Handler) 라고 하는 Window OS의 예외 처리 메커니즘에 사용된다.</li>\n<li>Self 멤버는 _NT_TIB 구조체의 셀프 포인터이며 곧 TEB 구조체 포인터이기도 한다. (TEB 구조체 첫 번째 멤버가 _NT_TIB 구조체이기 때문이다.)</li>\n</ul>\n<h2 id=\"유저-모드-teb-접근-방법\" style=\"position:relative;\"><a href=\"#%EC%9C%A0%EC%A0%80-%EB%AA%A8%EB%93%9C-teb-%EC%A0%91%EA%B7%BC-%EB%B0%A9%EB%B2%95\" aria-label=\"유저 모드 teb 접근 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>유저 모드 TEB 접근 방법</h2>\n<h3 id=\"ntdllntcurrentteb\" style=\"position:relative;\"><a href=\"#ntdllntcurrentteb\" aria-label=\"ntdllntcurrentteb permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ntdll.NtCurrentTeb()</h3>\n<ul>\n<li>Ntdll.NtCurrentTeb() API는 현재 스레드의 TEB 구조체 주소를 리턴하는 함수이다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAklEQVQY0y3L626CMABAYd7/pXRmA21LhQKl1AHCLKXcBEWUDWRxWfLl/Dsadh2Xx8TnXhCalm3vEaOUscB2XBrwKI6Px0TKXGZSiOwkxJcQWZZJmedKaRgDCLbM9yyMLAx2+huGAO4Mj5i+RwLqcN+j1N0jgExoQYCBTl3CGQ0PgSZCRuC7SvmROyKk2NggfWXtNirlY6fGTrUqbYrTT199X8upr+ZbPQ/Nq7daK0Tk26Ar0uTgioiaxhp9rBiBj4tapn6Z+vu17Cr5HNtpOM/DeRm75dG+jJ0G9bVPUCHiiDvJwXPw1jaNT2rVeXqp5KWWlUzaUj7v5+nWzEPzf/75BVzfBr9LA2GLAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./0.png\"\n        title=\"./0.png\"\n        src=\"/static/313b08180b86b127459eec3e7216e166/37523/0.png\"\n        srcset=\"/static/313b08180b86b127459eec3e7216e166/e9ff0/0.png 180w,\n/static/313b08180b86b127459eec3e7216e166/f21e7/0.png 360w,\n/static/313b08180b86b127459eec3e7216e166/37523/0.png 720w,\n/static/313b08180b86b127459eec3e7216e166/302a4/0.png 1080w,\n/static/313b08180b86b127459eec3e7216e166/b5cea/0.png 1140w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHklEQVQY02XJ2W6CQACFYd7/edqLXmnsokRZZoXADMMyOoDKprVirdNIbNrU5Lv4T45xOTb61O2qPIJWGpCEeyrl2zzFHggZLbIsD8hGiarI6lI269VAVSrtpDCWMVMZj5nvzE1oWxi6CLgUwRlwbeBgALC1IMglCAQ+TeIoFvwqYgkLjPUyKiXfLHkpWV0k77Xab1eHSuljc9O3l4/65vBjmIY+7/Xn7urUDVrdt/rYXrtvf93eP/rOCHwPAdujGDgWQQDYDkEupZA4pocRwTCgmEIQcRaL6B/jbTJ6Hr1M56+2a46no4fHp8l07EDTJ7YISOjBusjatWzK7J6B4YxJEEonzgHP3XSLKF/Y2BSCFkrINOwqpb/2+ry79w1wqnZgsaBaUQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./1.png\"\n        title=\"./1.png\"\n        src=\"/static/0ddfab9384ee51c255ffd546801bd9a8/37523/1.png\"\n        srcset=\"/static/0ddfab9384ee51c255ffd546801bd9a8/e9ff0/1.png 180w,\n/static/0ddfab9384ee51c255ffd546801bd9a8/f21e7/1.png 360w,\n/static/0ddfab9384ee51c255ffd546801bd9a8/37523/1.png 720w,\n/static/0ddfab9384ee51c255ffd546801bd9a8/eafa0/1.png 939w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>NtCurrentTeb() 의 내부 코드는 아주 간단하게 구성되어 있다.</li>\n<li><code class=\"language-text\">FS:[18]</code> 주소의 값을 리턴 한다.</li>\n<li>FS:[18] 실제 주소 <code class=\"language-text\">00281018</code> 을 확인할 수 있는데 메모리 창에서 주소를 확인해보면 <code class=\"language-text\">00281000</code> 값이 들어 있다.</li>\n<li>NtCuurentTeb() API 는 이 값을 리턴하고 있다.</li>\n<li>따라서 이 값이 바로 현재 스레드의 TEB 주소 이다.</li>\n<li>TEB 주소(00281000) 주소는 FS 세그먼트 레지스터가 가리키는 세그먼트 메모리의 베이스 주소와 일치한다.</li>\n</ul>\n<h2 id=\"fs-segment-register\" style=\"position:relative;\"><a href=\"#fs-segment-register\" aria-label=\"fs segment register permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FS Segment Register</h2>\n<ul>\n<li>FS 세그먼트 레지스터는 현재 스레드의 TEB를 지시하는데 사용한다.</li>\n<li><code class=\"language-text\">IA32</code> 시스템에서는 프로세스의 가상 메모리 크기가 4GB이므로 32비트 크기의 포인터를 이용해야 전체 메모리 공간에 접근이 가능하다.</li>\n<li>FS 레지스터의 크기는 16비트밖에 안된다.</li>\n<li>FS 레지스터는 직접 TEB 주소를 가리키는 것이 아니라, 실제 TEB 주소를 가지고 있는 <code class=\"language-text\">Segment Descriptor Table</code> 의 Index를 가지고 있는것이다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">Segment Descriptor Table은 커널 메모리 영역에 존재하며\n특수 레지스터인 <span class=\"token function\">GDTR</span><span class=\"token punctuation\">(</span>Global Descriptor Table Register<span class=\"token punctuation\">)</span>에 그 주소가 저장되어 있다<span class=\"token punctuation\">.</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUUlEQVQoz3WS3UsUURjG95/JdeecmTMzO64frLtq67q6bquuaWkZq5uaBUEJhWQpCHWRghRSBFb4hZn2BUFEhUUX4YUE1VXdSF1UhFFCCbK/2GmjoLp4eF7OOfx43vO+HiHNrBAKIZTrUrfwaQbB8koSDSmqY3Fi8R1E6xLU1icJFJeh5d8Jaf6WbrlnHqGbSNOflZaDK2Xj0xSOU8LyxU5ez2d4OZNhbbGbq8O78Ek/QiqkNDEME6UslGEhpXLBHqnb2eDhRzSdeZONjazhJAcQhV4su5jnY+18m0rzaXIfW7Od3Dyxk20+E123CIajJFN7iMabSTS2Eaqs+wW0qG3qp75lkPrWIUpDjQhh4DjFvLp8gK17x/ly6yjcP8ad0x14pY0Sisj4OPFnT2l/vEzi6ROi83MoswhPjmqaCqV0V4ah0ISJbRexej7N12t9vJ/u4ftiH4tDuynQLPQcsL+HugunSJ4bJD5xkujIkZ/A3F/4CgWFXg2fV3PT5YCWVcSLiQ42F7pYn+kku5Th9nCr27Jh2FQGq4mU11AVjLq+vbwmn1C3MMMJiiIpnEgzRqACTTNc4OpEBxvXM3yY7WTzxn6W8kDdsAiGIoSrYoQra1wPVUQxlINHkzbV/Sukxz/SevYzgYYhhK8A21/Cyuhe1q908e5Smo2pDAsDLRRouaGY7or8Sx4hc0UJUi9F6mVI3XEvbDvA2+k0POiFu92w3MfD0bb8lM2/9zAvj9RzhfGHFLrhx7aLGUsnmT7YxGRvI3OHUgy01lEocrD/J/wByl+GNmQQIYoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./SGT.png\"\n        title=\"./SGT.png\"\n        src=\"/static/072d5e551d215b08984b841e81b2b639/37523/SGT.png\"\n        srcset=\"/static/072d5e551d215b08984b841e81b2b639/e9ff0/SGT.png 180w,\n/static/072d5e551d215b08984b841e81b2b639/f21e7/SGT.png 360w,\n/static/072d5e551d215b08984b841e81b2b639/37523/SGT.png 720w,\n/static/072d5e551d215b08984b841e81b2b639/302a4/SGT.png 1080w,\n/static/072d5e551d215b08984b841e81b2b639/07a9c/SGT.png 1440w,\n/static/072d5e551d215b08984b841e81b2b639/74e37/SGT.png 1732w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>세그먼트 레지스터는 실제로 Segment Descriptor Table의 Index를 가지고 있기 때문에 Segment Selector 라는 별칭을 가지고 있다.</li>\n<li>FS 세그먼트 셀렉터가 가리키는 세그먼트 메모리의 시작주소 (base address) 에 TEB 구조체가 위치하는 것을 확인할 수 있다.</li>\n</ul>\n<h3 id=\"fs0x18--teb-base-address\" style=\"position:relative;\"><a href=\"#fs0x18--teb-base-address\" aria-label=\"fs0x18  teb base address permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FS:[0x18] = TEB base address</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">FS<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token number\">0x18</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> TEB<span class=\"token punctuation\">.</span>NtTib<span class=\"token punctuation\">.</span>Self <span class=\"token operator\">=</span> address of TIB <span class=\"token operator\">=</span> address of TEB <span class=\"token operator\">=</span> FS<span class=\"token operator\">:</span><span class=\"token number\">0</span> <span class=\"token operator\">=</span> <span class=\"token number\">0x2810100</span>\n\nFS<span class=\"token operator\">:</span><span class=\"token number\">0</span> 의 의미는 FS 레지스터가 Indexing 하는 Segment Descriptor가 가리키는 Segment Memory의\n시작 주소이다<span class=\"token punctuation\">.</span></code></pre></div>\n<h3 id=\"fs0x30--peb-base-address\" style=\"position:relative;\"><a href=\"#fs0x30--peb-base-address\" aria-label=\"fs0x30  peb base address permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FS:[0x30] = PEB base address</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">FS<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token number\">0x30</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> TEB<span class=\"token punctuation\">.</span>ProcessEnvironmentBlock <span class=\"token operator\">=</span> address of PEB</code></pre></div>\n<h3 id=\"fs0x0--seh-base-address\" style=\"position:relative;\"><a href=\"#fs0x0--seh-base-address\" aria-label=\"fs0x0  seh base address permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FS:[0x0] = SEH base address</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">FS<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> TEB<span class=\"token punctuation\">.</span>NtTib<span class=\"token punctuation\">.</span>ExceptionList <span class=\"token operator\">=</span> address of SEH</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<ul>\n<li><a href=\"#processenvironmentblock-member\">ProcessEnvironmentBlock member</a></li>\n<li><a href=\"#nttib-member\">NtTib member</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9C%A0%EC%A0%80-%EB%AA%A8%EB%93%9C-teb-%EC%A0%91%EA%B7%BC-%EB%B0%A9%EB%B2%95\">유저 모드 TEB 접근 방법</a></p>\n<ul>\n<li><a href=\"#ntdllntcurrentteb\">Ntdll.NtCurrentTeb()</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#fs-segment-register\">FS Segment Register</a></p>\n<ul>\n<li><a href=\"#fs0x18--teb-base-address\">FS:[0x18] = TEB base address</a></li>\n<li><a href=\"#fs0x30--peb-base-address\">FS:[0x30] = PEB base address</a></li>\n<li><a href=\"#fs0x0--seh-base-address\">FS:[0x0] = SEH base address</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"January 03, 2021","title":"TEB (Thread Environment Block)","categories":"Windows","author":"Zer0Luck","emoji":"🍬"},"fields":{"slug":"/window_4_theori/"}},"site":{"siteMetadata":{"siteUrl":"https://dnsdudrla97.github.io","comments":{"utterances":{"repo":"dnsdudrla97/dnsdudrla97.github.io"}}}}},"pageContext":{"slug":"/window_5_theori/","nextSlug":"/project_MetaVersPloit/","prevSlug":"/window_4_theori/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}