{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/codegate2017_angrybird_ctf_writeup/",
    "result": {"data":{"cur":{"id":"093caa3f-71ec-5562-a741-87d4d08470d1","html":"<h1 id=\"취약점-분석\" style=\"position:relative;\"><a href=\"#%EC%B7%A8%EC%95%BD%EC%A0%90-%EB%B6%84%EC%84%9D\" aria-label=\"취약점 분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>취약점 분석</h1>\n<h2 id=\"angry-bird-바이너리-동작-결과\" style=\"position:relative;\"><a href=\"#angry-bird-%EB%B0%94%EC%9D%B4%EB%84%88%EB%A6%AC-%EB%8F%99%EC%9E%91-%EA%B2%B0%EA%B3%BC\" aria-label=\"angry bird 바이너리 동작 결과 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Angry Bird 바이너리 동작 결과</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 5.555555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOElEQVQI12OwtbW1NDdXt3fTNzI20Nc3NDQ0NzMztjSL0LJPFjfSl1WSl5YVEBQQ4OcXQgX8/PwATlwI0etcYhwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./0.png\"\n        title=\"./0.png\"\n        src=\"/static/3b5865e318632473c734c46d979a6987/37523/0.png\"\n        srcset=\"/static/3b5865e318632473c734c46d979a6987/e9ff0/0.png 180w,\n/static/3b5865e318632473c734c46d979a6987/f21e7/0.png 360w,\n/static/3b5865e318632473c734c46d979a6987/37523/0.png 720w,\n/static/3b5865e318632473c734c46d979a6987/302a4/0.png 1080w,\n/static/3b5865e318632473c734c46d979a6987/07a9c/0.png 1440w,\n/static/3b5865e318632473c734c46d979a6987/f33fc/0.png 1905w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>바이너리 실행시 아무 결과가 안나오는 것을 확인할 수 있다.</li>\n</ul>\n<h2 id=\"main-함수-분석\" style=\"position:relative;\"><a href=\"#main-%ED%95%A8%EC%88%98-%EB%B6%84%EC%84%9D\" aria-label=\"main 함수 분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>main 함수 분석</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.555555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAkUlEQVQI102MSw6CMBQAuf+pLAIHoG4sKpGoSe039Edp6TNGTZztZKbCGCOEmmZPyINSmOeSM5QCAODcypgTIjClXbJutTHFbdvgR4VxX9e7tkWE3McRpql4/42tjVov7OmPtyubpVtCTEtO+T++INR33WEY6PmkOJMhuI/zPhkTKQ1CWQAwxkohlVac85zfixdmyad8f7owJgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./1.png\"\n        title=\"./1.png\"\n        src=\"/static/00449beb5b381832f69e68bba481a5dc/37523/1.png\"\n        srcset=\"/static/00449beb5b381832f69e68bba481a5dc/e9ff0/1.png 180w,\n/static/00449beb5b381832f69e68bba481a5dc/f21e7/1.png 360w,\n/static/00449beb5b381832f69e68bba481a5dc/37523/1.png 720w,\n/static/00449beb5b381832f69e68bba481a5dc/108f8/1.png 777w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li><code class=\"language-text\">Stack Smahsing Protector(SSP)</code> 보호기법이 적용되어 있어 Stack Prlog를 거치면서 <code class=\"language-text\">Stack Canary</code> 를 <code class=\"language-text\">rax</code> 레지스터에 <code class=\"language-text\">TEB</code>에서 생성된 값을 가져와 해당 값을 스택에 집어넣는 것을 확인할 수가 있으며</li>\n<li><code class=\"language-text\">eax</code> 레지스터를 0으로 초기화 한후 0과 비교를 하여 <code class=\"language-text\">exit</code> 함수로 점프하는 것을 볼 수 있다.</li>\n<li>그래서, 해당 바이너리를 실행하였을 때 바로 끝나는 모습을 확인할 수 있다.</li>\n</ul>\n<h2 id=\"nop-sled-적용\" style=\"position:relative;\"><a href=\"#nop-sled-%EC%A0%81%EC%9A%A9\" aria-label=\"nop sled 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nop Sled 적용</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAmklEQVQI1y3NQQ6CMBBAUe5/Fhcu3egZjIlCrJ3SqQJSZwaoFllIDca3//mZ/UF0RPWNtoq06wvgjWZnBExntL/k5531K+vXDe+ZUggfkTRNKfvHFv2jBcmP7UmzKh4HEHMdnOuw7EroUbFTYuuB3jHFODOncUwZIqJbsLB/kRFTim2e9ypUVaiAQZECBs0Ku5IijTENYSZazl99j6KSKC3PhgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./2.png\"\n        title=\"./2.png\"\n        src=\"/static/d69e02d27fa50f6c7aab28bacd1866c4/0a47e/2.png\"\n        srcset=\"/static/d69e02d27fa50f6c7aab28bacd1866c4/e9ff0/2.png 180w,\n/static/d69e02d27fa50f6c7aab28bacd1866c4/f21e7/2.png 360w,\n/static/d69e02d27fa50f6c7aab28bacd1866c4/0a47e/2.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li><code class=\"language-text\">_exit</code> Hex 값을 90(Nop)으로 패치하여 점프를 뛰어도 끝날 수 없도록 진행하였다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgUlEQVQI12WLsQrDIBRF/f8fagdfhm7JEKUpZMge0Grsw1RfFGJrlgZ6hguHy2HT5Np27rp5HJ3WBbGcWdcNX1sIt5jqQUTWWkT03hMRGwYBcG2aixB3Y37ZvtdFpGWJh1YPITwPcs6lFCal5BwAeN8//mPnojHvc6y1VkqllL7xB8kpqFh4nz+pAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./3.png\"\n        title=\"./3.png\"\n        src=\"/static/c7c71e94b6a14b08fcd20f3dd63e27c0/37523/3.png\"\n        srcset=\"/static/c7c71e94b6a14b08fcd20f3dd63e27c0/e9ff0/3.png 180w,\n/static/c7c71e94b6a14b08fcd20f3dd63e27c0/f21e7/3.png 360w,\n/static/c7c71e94b6a14b08fcd20f3dd63e27c0/37523/3.png 720w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABT0lEQVQY013LzUvCYBzA8YduW1sxEXzJg46ITOlNsOhUXeov6O+KoKCQgqhDgxxFHlTMbAOdm9ODh7SUEruU4lut5R73i6QO9eF7/SJOzsefamJTy77pBcP4l6rrZYDjy8hqYGVzbX15KehfDDinvA6bzWq1ooPbwnmpnmz1Y622aGiSibMmyPCThHER4PQisuUObnjn/T7vzNwC65tlPe4JlwuFhBRfrqQ6erLbkwysAKQ1Tey0M7quDOc7gH0+PG5lJr3TLMuyHo/TYbfZ7QzDoJAghEvVzOdABVBMMwcgdnup14Y8MBUTJON73uO4EYQsjIWmaYqiSHKUJEmCINBhWuArFeG9H+u+xJudq3pb1D5UwDkAFUDG+B5glztDCFE0TQyRv9AOL5yI1cuixuUb0Wo/+mAkHvF1zUjWzZtnSNSw0oPtIw4hRNNj5F9fREfVWM7jgIsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./4.png\"\n        title=\"./4.png\"\n        src=\"/static/8ce7efe9ddd4a1730a488b3f708c2ef9/37523/4.png\"\n        srcset=\"/static/8ce7efe9ddd4a1730a488b3f708c2ef9/e9ff0/4.png 180w,\n/static/8ce7efe9ddd4a1730a488b3f708c2ef9/f21e7/4.png 360w,\n/static/8ce7efe9ddd4a1730a488b3f708c2ef9/37523/4.png 720w,\n/static/8ce7efe9ddd4a1730a488b3f708c2ef9/302a4/4.png 1080w,\n/static/8ce7efe9ddd4a1730a488b3f708c2ef9/71e8d/4.png 1304w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>디버거를 바탕으로 <code class=\"language-text\">_exit</code> 함수로 점프하는 것은 우회를 하여 <code class=\"language-text\">you shoul return 21 not 1 :(</code> 문자열을 반환하는 것을 확인할 수있다.</li>\n</ul>\n<h2 id=\"you-should-return-21-not-1-\" style=\"position:relative;\"><a href=\"#you-should-return-21-not-1-\" aria-label=\"you should return 21 not 1  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>you should return 21 not 1 :(</h2>\n<ul>\n<li>출력된 결과를 확인해 보면 21을 반환해야 한다고 한다.</li>\n<li>해당 함수를 분석해보도록 하겠다.</li>\n</ul>\n<h2 id=\"sub_4006f6-함수-분석\" style=\"position:relative;\"><a href=\"#sub_4006f6-%ED%95%A8%EC%88%98-%EB%B6%84%EC%84%9D\" aria-label=\"sub_4006f6 함수 분석 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sub_4006F6 함수 분석</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtUlEQVQI1z2N0QqDMAxF/f+fEhV9U9jDRDYpbHSgKG52mMYmbUYVdgh5uNzkJEqpsizzPG/bDkC8FxExhseREL0xtG1EFFPyDgndsYMEEUmUUlVVFUXRdbfHQ55P+X7lxFpaFhhHGIYNd0Z0FqwFy8RExMxJ3/dZlqVperlcXy95v+OE+FcA3Dxvy7Kv676uOE0GLCAiHUSz1rppmrqu7/eeKJxOY3ia3OcTtOajFvHe88H/+Ads1uEm9gowtwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./5.png\"\n        title=\"./5.png\"\n        src=\"/static/e78579349755a3bd0a09187171016d3a/37523/5.png\"\n        srcset=\"/static/e78579349755a3bd0a09187171016d3a/e9ff0/5.png 180w,\n/static/e78579349755a3bd0a09187171016d3a/f21e7/5.png 360w,\n/static/e78579349755a3bd0a09187171016d3a/37523/5.png 720w,\n/static/e78579349755a3bd0a09187171016d3a/5a6dd/5.png 802w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>앞의 문자열을 출력한 함수 블록 내부이며 반환 되는 값 <code class=\"language-text\">dword_606060</code> 영역을 확인해보자</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 539px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAZklEQVQI142LMQ6DMBAE+f8bEQQcpTGggLk4B77dyMKmzmiKKXablADgPI3kMm+jez29/4iyAhSvNitNsuk6GQZx7q1q/WPqx9byCPdTJKvKGLmu3HceRz2HgBAMyIrgG0FYSvYPP30Ur3oQ9tIgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./6.png\"\n        title=\"./6.png\"\n        src=\"/static/3d0e2f0da47d21a8e2bf152607d98c5b/10f9a/6.png\"\n        srcset=\"/static/3d0e2f0da47d21a8e2bf152607d98c5b/e9ff0/6.png 180w,\n/static/3d0e2f0da47d21a8e2bf152607d98c5b/f21e7/6.png 360w,\n/static/3d0e2f0da47d21a8e2bf152607d98c5b/10f9a/6.png 539w\"\n        sizes=\"(max-width: 539px) 100vw, 539px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>확인 결과 <code class=\"language-text\">1</code>을 담고 있는 것을 확인하였다.</li>\n<li>우리는 21을 반환해야 하기 때문에 <code class=\"language-text\">21</code> 로 패치하도록 한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 676px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.222222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAWElEQVQI1yXKwQqAMAwDUP//HwdexCmOsYN2addFqu8QAslynkyJObOU2ZrVKr2PbWtrPh4IP2MQoCrNKBL5W1R53zG4z31HrQLoVUwQF/+YOeCqkb1H+b2EcXRRrUQvpQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./7.png\"\n        title=\"./7.png\"\n        src=\"/static/8a2839d7516f5eef637a43f191a408ed/9bb7a/7.png\"\n        srcset=\"/static/8a2839d7516f5eef637a43f191a408ed/e9ff0/7.png 180w,\n/static/8a2839d7516f5eef637a43f191a408ed/f21e7/7.png 360w,\n/static/8a2839d7516f5eef637a43f191a408ed/9bb7a/7.png 676w\"\n        sizes=\"(max-width: 676px) 100vw, 676px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>하지만 중요한 사실은 반환된 결과 값을 mov 명령어를 바탕으로 <code class=\"language-text\">[rbp+n]</code> 대입 하는 것을 확인할 수 있는 데 OPER2에 해당하는 <code class=\"language-text\">eax</code> 레지스터는 32bit 형식이기에 <code class=\"language-text\">mov</code> 명령을 사용하게 되면 성질이 맞지 않아 <code class=\"language-text\">Segment Falut</code> 가 뜨고 만다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 685px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.222222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAIAAABR8BlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAARUlEQVQI1wXB0QqAIAwF0P7/y3wSfJYCYbCEkHC1tqDdzllaO3PmlKgUrlWJ0DtEACAiAIzxzOm8y7od9/VGfGamqu7+A4gON/qaZvMlAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./8.png\"\n        title=\"./8.png\"\n        src=\"/static/2381009df4e303ad2da06ca16d484748/8ce22/8.png\"\n        srcset=\"/static/2381009df4e303ad2da06ca16d484748/e9ff0/8.png 180w,\n/static/2381009df4e303ad2da06ca16d484748/f21e7/8.png 360w,\n/static/2381009df4e303ad2da06ca16d484748/8ce22/8.png 685w\"\n        sizes=\"(max-width: 685px) 100vw, 685px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAi0lEQVQY04WOyw6EMAhF/f+/NDG6kKZWWwuWx8TWUReTzFkQcsMBunG0YbCUzMxUz+p9di6FwNNE24bMuq6r9x4AYoxHpZSiqt3t3M2yIEB65yEEAHDOMbO9+C3P8yV/k2Wu/Jfb26VIKdLyGGOoMLNWHrnBbETtztH3SCQi1xBWiAgRc877voucez/XpSSmUwifAgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./9.png\"\n        title=\"./9.png\"\n        src=\"/static/56523e94bfc63dede1162e9089c0362a/1f083/9.png\"\n        srcset=\"/static/56523e94bfc63dede1162e9089c0362a/e9ff0/9.png 180w,\n/static/56523e94bfc63dede1162e9089c0362a/f21e7/9.png 360w,\n/static/56523e94bfc63dede1162e9089c0362a/1f083/9.png 660w\"\n        sizes=\"(max-width: 660px) 100vw, 660px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li><code class=\"language-text\">NOP</code> 명령으로 해당 값 부분을 패치하여 우회하도록 한다.</li>\n<li>sub_40070C  부분도 똑같이 NOP으로 채워 우회하도록 한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 677px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwUlEQVQoz42QUY7DIAwFe/9jVoJAggJbB4yB2KtCGlVt1d359jDiXaZJvBciYZZaZWDMBkDTdAOgUhpRa21n5r0jDy5KyfUqSt39E2O2lKrWFEIGIGt/nAshBAAopTDzIRsj71i7ldJEZJzljK7TWns+u5ffMWYrZR8ys8SY5nlZluVfslK3UR7EGG2nnqt8kbWGUR6klObOq6z13/Iof5C/DHauiojrunrvX//s3MfBALEiHh0iijGmlHLO2Bnv/gKuUA6+QXzFMwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./10.png\"\n        title=\"./10.png\"\n        src=\"/static/0cc3c4dd543f217c7fd015061c86f0a5/68de2/10.png\"\n        srcset=\"/static/0cc3c4dd543f217c7fd015061c86f0a5/e9ff0/10.png 180w,\n/static/0cc3c4dd543f217c7fd015061c86f0a5/f21e7/10.png 360w,\n/static/0cc3c4dd543f217c7fd015061c86f0a5/68de2/10.png 677w\"\n        sizes=\"(max-width: 677px) 100vw, 677px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"sub_40072a-함수\" style=\"position:relative;\"><a href=\"#sub_40072a-%ED%95%A8%EC%88%98\" aria-label=\"sub_40072a 함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>sub_40072A 함수</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7klEQVQY003I0UuDQBwAYP/6Pfe4CLJFsBpu1FoUzSaE0zO1RVQ0ETdYG2nF9Jw7z/PuFyOCg+/pU/qz+RFCqjXW3kNjXQ0TMi6pD+D9e6jrHVa7nHvSewDKRZSoKFStoPO6usf0Ns4Gq9jAzM90f33ucuowhihFtHJq7gLIlEEUtZDVsk3tLTBzanxt9ATbhD4BTAB8DvaWPQo+AfgbmdJ8njV0qzE095zpybI8DMnBlLQTpqWim4OWivYCny2zzmehZaKLQaacBvN9221azvFLePVDe4viMibXKbsjYlTBqBT9j+LmO9fxdjcUZL9NsgPvjFhhwAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./11.png\"\n        title=\"./11.png\"\n        src=\"/static/5eb37b2d4169c724b4719f2c2aa7cc0e/37523/11.png\"\n        srcset=\"/static/5eb37b2d4169c724b4719f2c2aa7cc0e/e9ff0/11.png 180w,\n/static/5eb37b2d4169c724b4719f2c2aa7cc0e/f21e7/11.png 360w,\n/static/5eb37b2d4169c724b4719f2c2aa7cc0e/37523/11.png 720w,\n/static/5eb37b2d4169c724b4719f2c2aa7cc0e/d7542/11.png 810w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>앞 조건을 마치고 해당 함수로 들어오는데 여기서는 <code class=\"language-text\">\"hello\"</code> 문자열 과 입려 값을 비교하여 동일할 경우 정상적으로 반환하는 것을 확인할 수 있다.</li>\n<li><code class=\"language-text\">0x606038</code> 주소가 어디인지 확인하였으나 <code class=\"language-text\">__libc_start_main</code> got 영역의 주소  값인 것을 알았으며 해당 부분에서 어떤 문자열을 가져와 비교하는지를 모르기 때문에 <code class=\"language-text\">Ghidra</code> 디컴파일을 통해 확인하여</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 615px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAu0lEQVQY04XQW47DIAwF0KykbXgYY7ADBBLSzCP7X9VoMr+ZVrL8caUjXXvIcxsp3nh6cHpwuktWpfm2oSRlUYN/McPc91zXXFfjaDwjZVH97bdYto+pNAiiMTgfwUdHDBSR2GIYndPoLYZr3PfvedlgXurnUdc+lVbXZ2l96TtxugUDEqOUyxYDpdK/jtp6Li1IJk4UEwYhTsaRtl5b/1//ASQbnhyxAm/OyDj6ZUCvDz5xrjbw299c4h8Kb0N6MJOGRgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./12.png\"\n        title=\"./12.png\"\n        src=\"/static/aeb0f08356c2c8ac7de4a2010e105f1f/f6b72/12.png\"\n        srcset=\"/static/aeb0f08356c2c8ac7de4a2010e105f1f/e9ff0/12.png 180w,\n/static/aeb0f08356c2c8ac7de4a2010e105f1f/f21e7/12.png 360w,\n/static/aeb0f08356c2c8ac7de4a2010e105f1f/f6b72/12.png 615w\"\n        sizes=\"(max-width: 615px) 100vw, 615px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>해당 조건을 마찬가지로 <code class=\"language-text\">NOP</code> 으로 채워 우회하도록 하겠다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABD0lEQVQoz3XRYWuDMBAGYP//fypSokYpbIN96WxkbQMOmpjEWZM0xtyYlWJLex9z75M7uKiqqizDm02x3/82DVwuwXsAAKWslOYkWu/H89n0vXHuEkKARUVl+YXQuigSQtrtFk6nua2UEUJ/H5lQWilrjAOAewvRbndA6A3j96rq6hqMmftSGqXcT22dG7tOa917PwI8YorQB8aflPbTxzNuGn1LSykZY+P4BJdJss7zhNJ2iYW4w5zzJ5gQkiQpxvh4fI5DeI3LskQIZVl6OKgHfEu/XJsQkqZpnmNK2+llxoz11vppchBCcM611tba5bX+J69WqziOOW+uUaWclJ6x0HXhurafahgG59wS/wE/Gf+sQWdCdgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./13.png\"\n        title=\"./13.png\"\n        src=\"/static/91a12462ee47d9525dddf6a6ee85e4d1/37523/13.png\"\n        srcset=\"/static/91a12462ee47d9525dddf6a6ee85e4d1/e9ff0/13.png 180w,\n/static/91a12462ee47d9525dddf6a6ee85e4d1/f21e7/13.png 360w,\n/static/91a12462ee47d9525dddf6a6ee85e4d1/37523/13.png 720w,\n/static/91a12462ee47d9525dddf6a6ee85e4d1/7e4a6/13.png 952w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>싹따 채워 버렸다. 😀</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 8.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAaklEQVQI12MwMzMzMTY2MDEVMndS09BUU1VVVQMBVVVVdXV1VVVVXV1dTU1NbR0dbU2tCDHjJFFzGz4xeXFxMUERBi4uLnYODg52di4WJlZWVlY2KIAzWVhYWGGAgZOZgZOZiZMDpIWTEwC20AsfEByN4wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./14.png\"\n        title=\"./14.png\"\n        src=\"/static/3993938352d4ec16d5ef3f0085933325/37523/14.png\"\n        srcset=\"/static/3993938352d4ec16d5ef3f0085933325/e9ff0/14.png 180w,\n/static/3993938352d4ec16d5ef3f0085933325/f21e7/14.png 360w,\n/static/3993938352d4ec16d5ef3f0085933325/37523/14.png 720w,\n/static/3993938352d4ec16d5ef3f0085933325/302a4/14.png 1080w,\n/static/3993938352d4ec16d5ef3f0085933325/72372/14.png 1149w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>패치후 <code class=\"language-text\">fget</code> 함수를 바탕으로 입력을 받을 수 있도록 되었다.</li>\n</ul>\n<h2 id=\"미친-조건들\" style=\"position:relative;\"><a href=\"#%EB%AF%B8%EC%B9%9C-%EC%A1%B0%EA%B1%B4%EB%93%A4\" aria-label=\"미친 조건들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>미친 조건들</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVQoz3XK207DMBCEYb//0yFAAiRUkebktKSkOXrt3R0UWllOI6Tv6p8xDNwo0I9j3ZxEIQAr4vQfQ4qIgW6c8tqSiFeQIF33zCyIJlYCfqYlq+3E7BTpumcGRqoPOgPt7A6lvVKYFAPrwycyV8aDLuig+F7os7St872sZX+7Mswl4BLQen3QCU6L/yhtM1Mn6+H2TJlzwMnreeuvoGU0xG9lU43uIlingJSxHjWp9UjF0gTUjl8Lm/XLWWC3T1MRSqcVIRVLSag8KpLn3B66yfLmZnLC0eleTrhzKAiFx1PRvLdD4REn8+WwWnTjFhOZw5HwYn8Os2R0j7/pNXuglRLCMAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./15.png\"\n        title=\"./15.png\"\n        src=\"/static/d264ef6c46a7e66f6c4d61866acc2f8e/37523/15.png\"\n        srcset=\"/static/d264ef6c46a7e66f6c4d61866acc2f8e/e9ff0/15.png 180w,\n/static/d264ef6c46a7e66f6c4d61866acc2f8e/f21e7/15.png 360w,\n/static/d264ef6c46a7e66f6c4d61866acc2f8e/37523/15.png 720w,\n/static/d264ef6c46a7e66f6c4d61866acc2f8e/302a4/15.png 1080w,\n/static/d264ef6c46a7e66f6c4d61866acc2f8e/07a9c/15.png 1440w,\n/static/d264ef6c46a7e66f6c4d61866acc2f8e/29114/15.png 1920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>무수히 많은 조건들을 거치고 거쳐 마지막에 “you typed : %s\\n” 출력하는 곳으로 가봐야 될 것 같다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVQY002NTUvDQBCG8/+Pnjx49U8UFAStDQVp6TEJSRtrs9pmZ3ey7k72Y6RNoT6HF+blfZhsPv9cLvd9b5k5JfY+SmmHYZzOS6aUWJMGC+jwZE4UiC9kT893eX5flm1V8eFwHhKFGBnAIpIQuN1JrZ0eEDQoVD30ox+v8tvrw2r12DSirrksk/dTz1Japdz+61chBZ+cG8md4X9ks9lLnn8UxVAU3DTJ2puMSF1ndt23NOCsmyCiGONVXizeN5t126IQDHD7rDUZMwpB9dZUtTn+oFIgpTTGhBAm+Q+UGRn5uCcIFAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./16.png\"\n        title=\"./16.png\"\n        src=\"/static/be304a44ada0a4f1949b9eb66cc4e24a/37523/16.png\"\n        srcset=\"/static/be304a44ada0a4f1949b9eb66cc4e24a/e9ff0/16.png 180w,\n/static/be304a44ada0a4f1949b9eb66cc4e24a/f21e7/16.png 360w,\n/static/be304a44ada0a4f1949b9eb66cc4e24a/37523/16.png 720w,\n/static/be304a44ada0a4f1949b9eb66cc4e24a/5a190/16.png 800w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>angr 모듈을 사용하여 solve 를 작성해보겠다.</li>\n</ul>\n<h1 id=\"해결-방안\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EC%95%88\" aria-label=\"해결 방안 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결 방안</h1>\n<h2 id=\"solved-code\" style=\"position:relative;\"><a href=\"#solved-code\" aria-label=\"solved code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solved Code</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> angr\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">solved</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    p<span class=\"token operator\">=</span>angr<span class=\"token punctuation\">.</span>Project<span class=\"token punctuation\">(</span><span class=\"token string\">'./angrybird_3'</span><span class=\"token punctuation\">,</span> auto_load_libs<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token comment\"># state를 임의로 위 함수를 무시한채 해당 지역부터 시작하도록 한다.</span>\n    state <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>blank_state<span class=\"token punctuation\">(</span>addr<span class=\"token operator\">=</span><span class=\"token number\">0x4007C2</span><span class=\"token punctuation\">)</span>\n\n    sm <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>simgr<span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span>\n    sm<span class=\"token punctuation\">.</span>explore<span class=\"token punctuation\">(</span>find<span class=\"token operator\">=</span><span class=\"token number\">0x404fab</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 최하단 True 주소 값</span>\n\n    flag <span class=\"token operator\">=</span> sm<span class=\"token punctuation\">.</span>found<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>posix<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"solved-code2\" style=\"position:relative;\"><a href=\"#solved-code2\" aria-label=\"solved code2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solved Code2</h2>\n<ul>\n<li>앞에서 해당 함수들을 패치를 진행하였는데 해당 패치를 하지 않고 angr 모듈을 사용하여 우회하는 방안도 존재한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 645px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA3UlEQVQY01WPy26DMBQF+f+/KqwraBcV0GDH2EVFwQTb2Fz8ulXURZtZnN1IcwpWVvNbQy/nlWHX5nHE40BEzPmxnCvnwjCshC3bHbZ9X7VapZPSSmkLVlXfTU36g1Kcpmwt/kcI7VzgXHfsa1l371MMD84TYgzFWL7MzSvpgVDs+3y7PcmcK2s954rw2VpIKXt/en8CgPeh+KzqsW6H/qRXHC55mjDGv2wh9K880EVtATMq7YwBYwwAFB9lx94ZuQRKcVlw358+C6EAwjybkemWLJuxRqOUMcaQUvoBjpkY697mva0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./17.png\"\n        title=\"./17.png\"\n        src=\"/static/d021af799dffbfa1be4bfde9355fde46/af192/17.png\"\n        srcset=\"/static/d021af799dffbfa1be4bfde9355fde46/e9ff0/17.png 180w,\n/static/d021af799dffbfa1be4bfde9355fde46/f21e7/17.png 360w,\n/static/d021af799dffbfa1be4bfde9355fde46/af192/17.png 645w\"\n        sizes=\"(max-width: 645px) 100vw, 645px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>해당 <code class=\"language-text\">sub_4006F6</code>, <code class=\"language-text\">sub_40070C</code> 함수를 무시한채 <code class=\"language-text\">rbp</code> 기준 값을 현재 <code class=\"language-text\">0x4007c2</code> 주소로 기준을 잡도록 수정하도록 한다. 즉, 메인 함수 프롤로그를 해당 주소로 바꾸는 것이다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.555555555555557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfElEQVQI1y3LSw6CMAAFQK7rGTyZMdGwMtGFnwbSWqrQCv0uKCSSEMvThbOfTJK62N+K3ZUfn52G1mAMwwAAKSXnlnE8iGr1UrPoVCU1vwfGPKUeQObLssnzx3ajTpe6AaULIZimf7b2E+OZi7U1cxucCb01b6WilP0vfwFlp2txCBQzVwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./18.png\"\n        title=\"./18.png\"\n        src=\"/static/c3c30d9bc922d388bdf0ba6515463301/37523/18.png\"\n        srcset=\"/static/c3c30d9bc922d388bdf0ba6515463301/e9ff0/18.png 180w,\n/static/c3c30d9bc922d388bdf0ba6515463301/f21e7/18.png 360w,\n/static/c3c30d9bc922d388bdf0ba6515463301/37523/18.png 720w,\n/static/c3c30d9bc922d388bdf0ba6515463301/c8e86/18.png 758w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> angr\n\nSTART_ADDR <span class=\"token operator\">=</span> <span class=\"token number\">0x4007c2</span>\nFIND_ADDR <span class=\"token operator\">=</span> <span class=\"token number\">0x404fab</span>  <span class=\"token comment\"># This is right before the printf</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    proj <span class=\"token operator\">=</span> angr<span class=\"token punctuation\">.</span>Project<span class=\"token punctuation\">(</span><span class=\"token string\">'./angrybird'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># 해당 바이너리에서 함수 부분을 우회 한다.</span>\n    state <span class=\"token operator\">=</span> proj<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>entry_state<span class=\"token punctuation\">(</span>addr<span class=\"token operator\">=</span>START_ADDR<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># 함수 프롤로그 변경</span>\n    state<span class=\"token punctuation\">.</span>regs<span class=\"token punctuation\">.</span>rbp <span class=\"token operator\">=</span> state<span class=\"token punctuation\">.</span>regs<span class=\"token punctuation\">.</span>rsp\n    <span class=\"token comment\"># 0x40의 길이 값</span>\n    state<span class=\"token punctuation\">.</span>mem<span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">.</span>regs<span class=\"token punctuation\">.</span>rbp <span class=\"token operator\">-</span> <span class=\"token number\">0x74</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">0x40</span>\n\n    state<span class=\"token punctuation\">.</span>mem<span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">.</span>regs<span class=\"token punctuation\">.</span>rbp <span class=\"token operator\">-</span> <span class=\"token number\">0x70</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">long</span> <span class=\"token operator\">=</span> <span class=\"token number\">0x1000</span> <span class=\"token comment\"># strncmp@got</span>\n    state<span class=\"token punctuation\">.</span>mem<span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">.</span>regs<span class=\"token punctuation\">.</span>rbp <span class=\"token operator\">-</span> <span class=\"token number\">0x68</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">long</span> <span class=\"token operator\">=</span> <span class=\"token number\">0x1008</span> <span class=\"token comment\"># puts@got</span>\n    state<span class=\"token punctuation\">.</span>mem<span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">.</span>regs<span class=\"token punctuation\">.</span>rbp <span class=\"token operator\">-</span> <span class=\"token number\">0x60</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">long</span> <span class=\"token operator\">=</span> <span class=\"token number\">0x1010</span> <span class=\"token comment\"># _stack_chk_fail@got</span>\n    state<span class=\"token punctuation\">.</span>mem<span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">.</span>regs<span class=\"token punctuation\">.</span>rbp <span class=\"token operator\">-</span> <span class=\"token number\">0x58</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">long</span> <span class=\"token operator\">=</span> <span class=\"token number\">0x1018</span> <span class=\"token comment\"># _lib_start_main</span>\n\n    sm <span class=\"token operator\">=</span> proj<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>simulation_manager<span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 시뮬레이션 생성</span>\n    sm<span class=\"token punctuation\">.</span>explore<span class=\"token punctuation\">(</span>find<span class=\"token operator\">=</span>FIND_ADDR<span class=\"token punctuation\">)</span>\n\n    found <span class=\"token operator\">=</span> sm<span class=\"token punctuation\">.</span>found<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n    flag <span class=\"token operator\">=</span> found<span class=\"token punctuation\">.</span>posix<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>flag<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>    \n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAm0lEQVQI1xXLQQ6DIBAAQP/RZfHWVERAZMWKClqxifX/32lM5jrFfP3c/hmvs10Tffc2bzx0EB1sBJFYJEhULgSHZ5PFTkOwqBtGuiRTmLyKNKmcxBJkjtURMXSwdJAcrI5FB4l46h/ZQ3SoJFqFdY1alkoVlHeX9/E6mzm8xuE59txp5g0b2ltv2Nty30KwrDe8FvevBDYShfgDNDQjUMpl6PYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./19.png\"\n        title=\"./19.png\"\n        src=\"/static/d86792bff2be708d2a6fcf4ad09b0b58/37523/19.png\"\n        srcset=\"/static/d86792bff2be708d2a6fcf4ad09b0b58/e9ff0/19.png 180w,\n/static/d86792bff2be708d2a6fcf4ad09b0b58/f21e7/19.png 360w,\n/static/d86792bff2be708d2a6fcf4ad09b0b58/37523/19.png 720w,\n/static/d86792bff2be708d2a6fcf4ad09b0b58/6d2da/19.png 936w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#angry-bird-%EB%B0%94%EC%9D%B4%EB%84%88%EB%A6%AC-%EB%8F%99%EC%9E%91-%EA%B2%B0%EA%B3%BC\">Angry Bird 바이너리 동작 결과</a></li>\n<li><a href=\"#main-%ED%95%A8%EC%88%98-%EB%B6%84%EC%84%9D\">main 함수 분석</a></li>\n<li><a href=\"#nop-sled-%EC%A0%81%EC%9A%A9\">Nop Sled 적용</a></li>\n<li><a href=\"#you-should-return-21-not-1-\">you should return 21 not 1 :(</a></li>\n<li><a href=\"#sub_4006f6-%ED%95%A8%EC%88%98-%EB%B6%84%EC%84%9D\">Sub_4006F6 함수 분석</a></li>\n<li><a href=\"#sub_40072a-%ED%95%A8%EC%88%98\">sub_40072A 함수</a></li>\n<li><a href=\"#%EB%AF%B8%EC%B9%9C-%EC%A1%B0%EA%B1%B4%EB%93%A4\">미친 조건들</a></li>\n<li><a href=\"#solved-code\">Solved Code</a></li>\n<li><a href=\"#solved-code2\">Solved Code2</a></li>\n</ul>\n</div>","excerpt":"취약점 분석 Angry Bird 바이너리 동작 결과  바이너리 실행시 아무 결과가 안나오는 것을 확인할 수 있다. main 함수 분석   보호기법이 적용되어 있어 Stack Prlog를 거치면서  를  레지스터에 에서 생성된 값을 가져와 해당 값을 스택에 집어넣는 것을 확인할 수가 있으며  레지스터를 0으로 초기화 한후 0과 비교를 하여  함수로 점프하는 것을 볼 수 있다. 그래서, 해당 바이너리를 실행하였을 때 바로 끝나는 모습을 확인할 수 있다. Nop Sled 적용   Hex 값을 90(Nop)으로 패치하여 점프를 뛰어도 끝날 수 없도록 진행하였다.   디버거를 바탕으로  함수로 점프하는 것은 우회를 하여  문자열을 반환하는 것을 확인할 수있다. you should return 21 not 1 :( 출력된 결과를 확인해 보면 21을 반환해야 한다고 한다. 해당 함수를 분석해보도록 하겠다. Sub_4006F6 함수 분석  앞의 문자열을 출력한 함수 블록 내부이며 반환 되는 값 …","frontmatter":{"date":"August 15, 2020","title":"CodeGate2017 angrybird 분석","categories":"CTF","author":"Zer0Luck","emoji":"🦩"},"fields":{"slug":"/codegate2017_angrybird_ctf_writeup/"}},"next":{"id":"1978b95d-f40f-5966-9b18-e2d2a90b39e7","html":"<h1 id=\"문제-해결\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0\" aria-label=\"문제 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 해결</h1>\n<h2 id=\"step1-error-check\" style=\"position:relative;\"><a href=\"#step1-error-check\" aria-label=\"step1 error check permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step1: error check</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">root@2d1e0b4d517a<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>default<span class=\"token comment\"># cat /etc/issue</span>\nUbuntu <span class=\"token number\">16.04</span><span class=\"token number\">.7</span> LTS \\n \\l</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">Traceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  File <span class=\"token string\">\"&lt;stdin>\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">></span>\n  File <span class=\"token string\">\"/usr/lib/python3/namin.py\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">4112</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> setlocale\n    <span class=\"token keyword\">return</span> _setlocale<span class=\"token punctuation\">(</span>categories<span class=\"token punctuation\">,</span> locale<span class=\"token punctuation\">)</span>\nlocale<span class=\"token punctuation\">.</span>Error<span class=\"token punctuation\">:</span> unsupported locale setting</code></pre></div>\n<ul>\n<li>Docker환경에서 Ubuntu 서버를 운영하다가 <code class=\"language-text\">pip -install</code> 이 작동을 안하는 경우가 생긴다.</li>\n<li>해당 에러는 <code class=\"language-text\">locale.Error: unsupported locale setting</code> 가 발생하며 local 쪽에 문제가 생긴 것으로 보인다.</li>\n</ul>\n<h2 id=\"step2\" style=\"position:relative;\"><a href=\"#step2\" aria-label=\"step2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step2</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">$ locale\nlocale<span class=\"token punctuation\">:</span> Cannot <span class=\"token builtin\">set</span> LC_CTYPE to default locale<span class=\"token punctuation\">:</span> No such <span class=\"token builtin\">file</span> <span class=\"token keyword\">or</span> directory\nlocale<span class=\"token punctuation\">:</span> Cannot <span class=\"token builtin\">set</span> LC_ALL to default locale<span class=\"token punctuation\">:</span> No such <span class=\"token builtin\">file</span> <span class=\"token keyword\">or</span> directory\nLANG<span class=\"token operator\">=</span>en_US<span class=\"token punctuation\">.</span>UTF<span class=\"token operator\">-</span><span class=\"token number\">8</span>\nLANGUAGE<span class=\"token operator\">=</span>\nLC_CTYPE<span class=\"token operator\">=</span>UTF<span class=\"token operator\">-</span><span class=\"token number\">8</span>\nLC_NUMERIC<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_TIME<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_COLLATE<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_MONETARY<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_MESSAGES<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_PAPER<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_NAME<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_ADDRESS<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_TELEPHONE<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_MEASUREMENT<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_IDENTIFICATION<span class=\"token operator\">=</span><span class=\"token string\">\"en_US.UTF-8\"</span>\nLC_ALL<span class=\"token operator\">=</span>\n\n$ locale <span class=\"token operator\">-</span>a\nlocale<span class=\"token punctuation\">:</span> Cannot <span class=\"token builtin\">set</span> LC_CTYPE to default locale<span class=\"token punctuation\">:</span> No such <span class=\"token builtin\">file</span> <span class=\"token keyword\">or</span> directory\nC\nC<span class=\"token punctuation\">.</span>UTF<span class=\"token operator\">-</span><span class=\"token number\">8</span>\nen_US<span class=\"token punctuation\">.</span>utf8\nPOSIX</code></pre></div>\n<ul>\n<li><code class=\"language-text\">locale -a</code> 명령으로 해당 파일을 찾을 수 없다는 오류 메시지가 뜬다면은 아래에 환경 설정을 해주길 바란다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>sbin<span class=\"token operator\">/</span>dpkg<span class=\"token operator\">-</span>reconfigure<span class=\"token punctuation\">:</span> locales <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> installed\n\n<span class=\"token comment\"># echo \"LC_ALL=en_US.UTF-8\" | tee -a /etc/environment</span>\nLC_ALL<span class=\"token operator\">=</span>en_US<span class=\"token punctuation\">.</span>UTF<span class=\"token operator\">-</span><span class=\"token number\">8</span>\n\n<span class=\"token comment\"># echo \"en_US.UTF-8 UTF-8\" | tee -a /etc/locale.gen</span>\nen_US<span class=\"token punctuation\">.</span>UTF<span class=\"token operator\">-</span><span class=\"token number\">8</span> UTF<span class=\"token operator\">-</span><span class=\"token number\">8</span>\n\n<span class=\"token comment\"># echo \"LANG=en_US.UTF-8\" | tee -a /etc/locale.conf</span>\nLANG<span class=\"token operator\">=</span>en_US<span class=\"token punctuation\">.</span>UTF<span class=\"token operator\">-</span><span class=\"token number\">8</span></code></pre></div>\n<h2 id=\"step3\" style=\"position:relative;\"><a href=\"#step3\" aria-label=\"step3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step3</h2>\n<ul>\n<li>환경 설정을 완료하였으면 <code class=\"language-text\">dpkg-reconfigure</code> 옵션으로 사용할 locales 를 지정하도록 한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># dpkg-reconfigure locales</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEklEQVQozz2SC5KiMBRFWcdMa4tI0KgIEgIBkkC+QECtmf3vZSZtdS/g1nnvnhtQYeigwwSmRdWrSY1Ljht4K9peqWlN7/gjjG+opsLo+YEIvVetsK7q+l18CgYzl4Ruo+SGamEdEzoEcBfDttfCuLSoPsI4KwmXoxqX6x2jmo7Lq6i7EMBAWIdIt42SrCSDmbkao9MlBD4sx6Wou3e4GwwV5nC8IEL1/MhL8nk4BoOeUd19RkmGyKBnNa3gfNsBSAejphW3/PfukOOGDoYJG8O0qKma1rJhnszVWNStP7skvZqEmWOY7gDsBq2nxx030fGS40aMy71qN3uAW67nB255dLwE0rpe+0BWEmkdV/Zwuobg/G4oK+vtHrxLYtLukwvuuF1fuOUA3oJez1zazR6kRSWss8vzeM1DABuujHtWHf/1GRV1x6S17nnOEGrYm7yNkoCryT3/5iXJPXmxy+ucoRBAwoQa14aJ3eH41aXj0p4zhFs+rX9KQmN4DZi0xj2vOc7LZtCzHN3XzyfChBxXOuhtlKRFRYUxnlzmuDXuRQe9BzBgwiJCvQ/kValpAedb6Aszxr1+VDE5ynE5Z+he+TCqOz8SJgxu2GYP8rLp9SSs+w57zxmqP0Kvykup2k2UlA1T08qV9W1zOXJld/Hphmo/z28yE0aOa1H7/eS46fXc9iq5ZMdrDtPilN7/k/8B6AaeVyfpHJsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./0.png\"\n        title=\"./0.png\"\n        src=\"/static/eca976c4e7bcfbaccb012407aaa7febc/37523/0.png\"\n        srcset=\"/static/eca976c4e7bcfbaccb012407aaa7febc/e9ff0/0.png 180w,\n/static/eca976c4e7bcfbaccb012407aaa7febc/f21e7/0.png 360w,\n/static/eca976c4e7bcfbaccb012407aaa7febc/37523/0.png 720w,\n/static/eca976c4e7bcfbaccb012407aaa7febc/302a4/0.png 1080w,\n/static/eca976c4e7bcfbaccb012407aaa7febc/20785/0.png 1307w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li><code class=\"language-text\">en_US.UTF-8 UTF-8</code> 을 선택하고 <code class=\"language-text\">en_US.UTF-8</code> 을 설정하도록 한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 718px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvUlEQVQY032OS27DMAxEfZE6RZzGH1kSRVIkTdkO2vsfqgsD2RQoMIuZAR7wukTGdiQy0lb9LOIB+OP+vD2mfhj7Ybw9pivXfD/9MHZQtyJOtidSsh3qlkgz25IJtSXUABxKjSiJNJGhtgC8FslkXZFmx3f1cwWeE0aUOSFUj0WWTBH1wgLwkmktFcSvElG7iGLHD9qeUFDbClzEedsz2zCFz6/5rf03HVQv6pcwaqPtqP4i29lPqH5/Lv/Av8U8NmfmtNEQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./1.png\"\n        title=\"./1.png\"\n        src=\"/static/2f5b5756f1331716cb9552416432359d/57dc1/1.png\"\n        srcset=\"/static/2f5b5756f1331716cb9552416432359d/e9ff0/1.png 180w,\n/static/2f5b5756f1331716cb9552416432359d/f21e7/1.png 360w,\n/static/2f5b5756f1331716cb9552416432359d/57dc1/1.png 718w\"\n        sizes=\"(max-width: 718px) 100vw, 718px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>그 후에 <code class=\"language-text\">pip install</code> 이 잘되는 것을 확인할 수있다.😊😊</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMklEQVQY0yVQ+UvCYADdvxJaeH3Xvnufm3N5ZBKJaC5T86gkI4yasJEH1T8e09/eg8e7rKubbvu259dbwlSEqTDtQSoR14ipXAln8yCbB+cFeAKZPMjkSinIgbOLglUOGs+rdZTs15s4Snbx7qfTv9deYPwaYgoxhbnGXCMqEVNEOEQ4KWUa2tLy69fhaDZ9WU0Wy/ny7eHxKW3hVJh2gc0hVYhrYAtgC8wdSCWgEnMNiEBUWtVGuzsY3Y2m/eEkHM/D8cyvt6TxueNBJm1piDD4mGZLg7lDRFqECAcxabmXzcXre5TsPjbJOoo/422nF6py1fGCEjkmM4WohFRipoAtIJXQFpDJIhGWGzTTyYe/eP+7+T58xdvuYOgGDePXUilTmGnMFeYKMX068uilioT/A7pxXHPLbYJwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./2.png\"\n        title=\"./2.png\"\n        src=\"/static/3541d08c8e2608f4c479945a801e6262/37523/2.png\"\n        srcset=\"/static/3541d08c8e2608f4c479945a801e6262/e9ff0/2.png 180w,\n/static/3541d08c8e2608f4c479945a801e6262/f21e7/2.png 360w,\n/static/3541d08c8e2608f4c479945a801e6262/37523/2.png 720w,\n/static/3541d08c8e2608f4c479945a801e6262/e088a/2.png 1015w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#step1-error-check\">Step1: error check</a></li>\n<li><a href=\"#step2\">Step2</a></li>\n<li><a href=\"#step3\">Step3</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 15, 2020","title":"Docker Ubuntu 환경 Python pip locale 에러 해결 방안","categories":"troubleshooting","author":"Zer0Luck","emoji":"🛠"},"fields":{"slug":"/docker_python_tbs/"}},"prev":{"id":"2343cc79-a0f4-5501-afb9-7ffb82f62c18","html":"<h1 id=\"elf-프로그램-헤더\" style=\"position:relative;\"><a href=\"#elf-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-%ED%97%A4%EB%8D%94\" aria-label=\"elf 프로그램 헤더 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ELF 프로그램 헤더</h1>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">EI_NIDENT</span> <span class=\"token expression\"><span class=\"token number\">16</span></span></span>\n\n           <span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token punctuation\">{</span>\n               <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> e_ident<span class=\"token punctuation\">[</span>EI_NIDENT<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n               <span class=\"token class-name\">uint16_t</span>      e_type<span class=\"token punctuation\">;</span>\n               <span class=\"token class-name\">uint16_t</span>      e_machine<span class=\"token punctuation\">;</span>\n               <span class=\"token class-name\">uint32_t</span>      e_version<span class=\"token punctuation\">;</span>\n               ElfN_Addr     e_entry<span class=\"token punctuation\">;</span>\n               ElfN_Off      e_phoff<span class=\"token punctuation\">;</span>\n               ElfN_Off      e_shoff<span class=\"token punctuation\">;</span>\n               <span class=\"token class-name\">uint32_t</span>      e_flags<span class=\"token punctuation\">;</span>\n               <span class=\"token class-name\">uint16_t</span>      e_ehsize<span class=\"token punctuation\">;</span>\n               <span class=\"token class-name\">uint16_t</span>      e_phentsize<span class=\"token punctuation\">;</span>\n               <span class=\"token class-name\">uint16_t</span>      e_phnum<span class=\"token punctuation\">;</span>\n               <span class=\"token class-name\">uint16_t</span>      e_shentsize<span class=\"token punctuation\">;</span>\n               <span class=\"token class-name\">uint16_t</span>      e_shnum<span class=\"token punctuation\">;</span>\n               <span class=\"token class-name\">uint16_t</span>      e_shstrndx<span class=\"token punctuation\">;</span>\n           <span class=\"token punctuation\">}</span> ElfN_Ehdr<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>\n<p>ELF 프로그램 헤더는 프로그램 로딩에 필요한 <code class=\"language-text\">바이너리 세그먼트</code>를 정의한다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">세그먼트</code>는 디스크에 저장된 실행 파일이 커널에 의해 로드되는 과정에서 어떤 메모리 구조로 매핑될 것인지를 정의한다.</p>\n</li>\n<li>\n<p>프로그램 헤더 테이블은 ELF 헤더의 멤버인 <code class=\"language-text\">e_phoff</code> (프로그램 헤더 테이블 오프셋)를 조회해 접근한다.</p>\n</li>\n<li>\n<p>주로 사용하는 프로그램 헤더는 5가지로 실행 파일 및 공유 라이브러리의 세그먼트를 정의하고 세그먼트 형식(어떤 형식의 데이터 또는 코드가 있는지를 나타낸다.)</p>\n</li>\n<li>\n<p>32비트 ELF 실행 파일의 프로그램 헤더 테이블을 조회해 <code class=\"language-text\">ELF32_Phdr</code> 구조체가 형성하는 프로그램 헤더를 분석해도록 하겠다.</p>\n</li>\n</ul>\n<script src=\"https://gist.github.com/cfd77d6ea6a5cab5e51811028893e7cc.js\"></script>\n<h2 id=\"pt_load\" style=\"position:relative;\"><a href=\"#pt_load\" aria-label=\"pt_load permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PT_LOAD</h2>\n<ul>\n<li>실행 파일에는 <code class=\"language-text\">PT_LOAD</code> 형식의 세그먼트가 하나 이상 있어야 한다.</li>\n<li>해당 형식의 프로그램 헤더는 로드 가능한 세그먼트 형식으로 메모리에 로드 또는 매핑된다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">동적 링킹이 가능한 ELF 실행 파일에 두 가지 로드 가능한 세그먼트<span class=\"token punctuation\">(</span>PT_LAOD<span class=\"token punctuation\">)</span>가 포함된다<span class=\"token punctuation\">.</span>\n\n<span class=\"token number\">1.</span> 프로그램 코드가 위치한 텍스트 세그먼트\n\n<span class=\"token number\">2.</span> 전역 변수와 동적 링킹 정보가 위치한 데이터 세그먼트</code></pre></div>\n<ul>\n<li>두 세그먼트는 <code class=\"language-text\">p_align</code> 값을 이용해 정렬된 후 메모리에 매핑된다.</li>\n<li>Phdr 구조체가 나타내는 세그먼트가 파일과 메모리에서 어떤 방식으로 동작하는지 이해하기 위해 리눅스의 <code class=\"language-text\">ELF(5) man</code> 페이지를 읽어보자</li>\n<li>프로그램 헤더는 프로그램이 메모리에서 실행될 때의 구조를 나타낸다.</li>\n</ul>\n<h2 id=\"code-segment\" style=\"position:relative;\"><a href=\"#code-segment\" aria-label=\"code segment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><em>Code Segment</em></h2>\n<ul>\n<li><code class=\"language-text\">PF_X | PF_R (READ+EXECUTE)</code> 라는 세그먼트 퍼미션을 가진다.</li>\n</ul>\n<h2 id=\"data-segment\" style=\"position:relative;\"><a href=\"#data-segment\" aria-label=\"data segment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><em>Data Segment</em></h2>\n<ul>\n<li><code class=\"language-text\">PF_W | PF_R (READ+WRITE)</code> 라는 세그먼트 퍼미션을 가진다.</li>\n</ul>\n<h2 id=\"pt_dynamic\" style=\"position:relative;\"><a href=\"#pt_dynamic\" aria-label=\"pt_dynamic permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PT_DYNAMIC</h2>\n<ul>\n<li>동적 세그먼트에서 사용하는 프로그램 헤더</li>\n<li>동적 링킹되는 실행 파일에서 사용되며 동적 링커가 사용하는 정보가 담겨 있다.</li>\n</ul>\n<h2 id=\"pt_dynamic-주로-사용하는-값\" style=\"position:relative;\"><a href=\"#pt_dynamic-%EC%A3%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B0%92\" aria-label=\"pt_dynamic 주로 사용하는 값 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PT_DYNAMIC 주로 사용하는 값</h2>\n<ul>\n<li>실행 시간에 링크되는 공유 라이브러리 목록</li>\n<li>전역 오프셋 테이블 (GOT)의 주소나 위치</li>\n<li>재배열 엔트리(relocation entry) 정보</li>\n</ul>\n<h2 id=\"pt_dynamic-주로-사용하는-태그\" style=\"position:relative;\"><a href=\"#pt_dynamic-%EC%A3%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%ED%83%9C%EA%B7%B8\" aria-label=\"pt_dynamic 주로 사용하는 태그 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PT_DYNAMIC 주로 사용하는 태그</h2>\n<script src=\"https://gist.github.com/dnsdudrla97/2b8bbd81148a879c2fc7fd87eea834ba.js\"></script>\n<ul>\n<li>동적 세그먼트에는 동적 링킹 정보가 담겨 있다.</li>\n<li><code class=\"language-text\">d_tag</code> 구조체 멤버는 <code class=\"language-text\">d_num</code> 구조체를 제어한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span>\n<span class=\"token punctuation\">{</span>\n    Elf32_Sword d_tag<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">union</span> <span class=\"token punctuation\">{</span>\n        Elf32_Word d_val<span class=\"token punctuation\">;</span>\n        Elf32_Addr d_ptr<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> d_un<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> Elf32_Dyn<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">extern</span> Elf32_Dyn _DYNAMIC<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"pt_note\" style=\"position:relative;\"><a href=\"#pt_note\" aria-label=\"pt_note permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PT_NOTE</h2>\n<ul>\n<li>\n<p>특정 벤더나 시스템에 관한 부가적인 정보를 포함한다.</p>\n</li>\n<li>\n<p>벤더 또는 시스템 빌더는 <code class=\"language-text\">SHT_NOTE</code> 섹션 형식과 <code class=\"language-text\">PT_NOTE</code> 프로그램 헤더를 이용하여 오브젝트 파일에 호환성 등의 정보를 기록할 수 있다.</p>\n</li>\n<li>\n<p>섹션과 프로그램 헤더는 4바이트 워드 형식의 문자열 형태이며 저장 공간의 제약은 없다.</p>\n</li>\n<li>\n<p>레이블도 추가정보를 나타내기 위해 포함될 수 있으나 필수 요구사항은 아니다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">PT_NOTE</code> 세그먼트는 OS에서만 참조하기 때문에 실행 파일이 실행되는 동안에 꼭 필요한 정보가 아니다.</p>\n</li>\n</ul>\n<h2 id=\"pt_interp\" style=\"position:relative;\"><a href=\"#pt_interp\" aria-label=\"pt_interp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PT_INTERP</h2>\n<ul>\n<li>크기가 작은 해당 섹션은 NULL 종료 문자열의 주소와 크기, 그리고 프로그램 인터프리터의 위치를 나타낸다.</li>\n<li>프로그램 인터프리터는 동적 링커라고 도 하며 일반적으로 <code class=\"language-text\">/lib/linux-ld.so.2</code> 에 위치한다.</li>\n</ul>\n<p><img src=\"/assets/img/posts/ELF/ELF-5/0.png\" alt=\"/assets/img/posts/ELF/ELF-5/0.png\">{: width=“70%” height=“70%“}</p>\n<h2 id=\"pt_phdr\" style=\"position:relative;\"><a href=\"#pt_phdr\" aria-label=\"pt_phdr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PT_PHDR</h2>\n<ul>\n<li>프로그램 해더의 주소와 크기를 나타낸다.</li>\n<li>프로그램 헤더 테이블은 프로그램 헤더의 세그먼트가 파일과 메모리 이미지의 어는 곳에 있는지를 가리킨다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">readelf <span class=\"token operator\">-</span>l <span class=\"token operator\">&lt;</span>binary<span class=\"token operator\">></span></code></pre></div>\n<p><img src=\"/assets/img/posts/ELF/ELF-5/1.png\" alt=\"/assets/img/posts/ELF/ELF-5/1.png\">{: width=“70%” height=“70%“}</p>\n<ul>\n<li>실행 파일의 엔트리 포인트와 앞에서 말한 여러 종류의 세그먼트 형시을 볼 수 있다.</li>\n<li>권한 플래그의 오른쪽에 위치한 오프셋과 두 개의 <code class=\"language-text\">PT_LOAD</code> 세그먼트에 있는 정렬 플래그를 보게 되면</li>\n<li>텍스트 세그먼트는 <code class=\"language-text\">READ+WRITE</code> 퍼미션을 가지고 있으며, 데이터 세그먼트는 <code class=\"language-text\">READ+WRITE</code> 퍼미션을 가지고 있다.</li>\n<li>두 세그먼트는 <code class=\"language-text\">0x600e10</code> , <code class=\"language-text\">0x600e28</code> 정렬 오프셋을 가지고 있으며, 이 값은 32비트 실행 파일에서의 페이지 크기와 같다.</li>\n<li>오프셋은 프로그램이 로드되는 과정에서 정렬을 위해 사용한다.</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#pt_load\">PT_LOAD</a></li>\n<li><a href=\"#code-segment\"><em>Code Segment</em></a></li>\n<li><a href=\"#data-segment\"><em>Data Segment</em></a></li>\n<li><a href=\"#pt_dynamic\">PT_DYNAMIC</a></li>\n<li><a href=\"#pt_dynamic-%EC%A3%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B0%92\">PT_DYNAMIC 주로 사용하는 값</a></li>\n<li><a href=\"#pt_dynamic-%EC%A3%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%ED%83%9C%EA%B7%B8\">PT_DYNAMIC 주로 사용하는 태그</a></li>\n<li><a href=\"#pt_note\">PT_NOTE</a></li>\n<li><a href=\"#pt_interp\">PT_INTERP</a></li>\n<li><a href=\"#pt_phdr\">PT_PHDR</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 16, 2020","title":"ELF 프로그램 헤더 (ELF Program Header)","categories":"AnalyzingBinaries","author":"Zer0Luck","emoji":"📠"},"fields":{"slug":"/elf_device_file4/"}},"site":{"siteMetadata":{"siteUrl":"https://dnsdudrla97.github.io","comments":{"utterances":{"repo":"dnsdudrla97/dnsdudrla97.github.io"}}}}},"pageContext":{"slug":"/codegate2017_angrybird_ctf_writeup/","nextSlug":"/docker_python_tbs/","prevSlug":"/elf_device_file4/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}