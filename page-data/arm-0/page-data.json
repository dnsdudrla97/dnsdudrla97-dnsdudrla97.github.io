{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/arm-0/",
    "result": {"data":{"cur":{"id":"935223a9-cb61-500f-bacd-4c5f64777ab9","html":"<h1 id=\"cisc-complex-instruction-set-computer\" style=\"position:relative;\"><a href=\"#cisc-complex-instruction-set-computer\" aria-label=\"cisc complex instruction set computer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CISC (Complex Instruction Set Computer)</h1>\n<ul>\n<li>명령어가 복잡하여 명령어를 해석하는 데 시간이 오래 걸리며</li>\n<li>명령어의 수가 많고 명령을 처리하는 시간이 길어 명령 처리 대기 시간이 길다.</li>\n</ul>\n<h3 id=\"명령어가-복잡하다\" style=\"position:relative;\"><a href=\"#%EB%AA%85%EB%A0%B9%EC%96%B4%EA%B0%80-%EB%B3%B5%EC%9E%A1%ED%95%98%EB%8B%A4\" aria-label=\"명령어가 복잡하다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>명령어가 복잡하다?</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">하나의 명령어가 할 수 있는 일의 양이 RISC 대비하여 많다는 것을 의미\n명령어 마다 길이가 다르며 동작에 있어 사이클 수도 다르기 때문에 pipelining 설계가 어렵다<span class=\"token punctuation\">.</span>\n<span class=\"token number\">1</span><span class=\"token operator\">~</span><span class=\"token number\">100</span> byte 이상 되는 명령어들 도 있다<span class=\"token punctuation\">.</span></code></pre></div>\n<h1 id=\"risc-reduced-instruction-set-computer\" style=\"position:relative;\"><a href=\"#risc-reduced-instruction-set-computer\" aria-label=\"risc reduced instruction set computer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>RISC (Reduced Instruction Set Computer)</h1>\n<ul>\n<li>CPU 명령어의 개수를 줄여 하드웨어 구조를 좀 더 간단하게 만드는 방식</li>\n<li>32비트로 명령어의 크기가 동일 하며 고정 길이를 갖는다.</li>\n<li>명령어의 개수가 적다.</li>\n<li>핵심적인 명령어를 기반으로 최소한의 명령어 집합을 구성하여 pipelining 기술을 도입하여 빠른 동작 속도와 하드웨어의 단순화와 효율성을 갖을 수 있으며 가격 경쟁령에서도 우위를 점하였다.</li>\n</ul>\n<h3 id=\"arm-에서-risc-방식을-사용하는-이유\" style=\"position:relative;\"><a href=\"#arm-%EC%97%90%EC%84%9C-risc-%EB%B0%A9%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"arm 에서 risc 방식을 사용하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM 에서 RISC 방식을 사용하는 이유</h3>\n<ul>\n<li>ARM은 Berkeley RISC에서 파생되었다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">Load<span class=\"token operator\">-</span>Store 방식\nFixed<span class=\"token operator\">-</span>Length <span class=\"token number\">32</span>bit Instruction\n<span class=\"token number\">3</span><span class=\"token operator\">-</span>address Instruction</code></pre></div>\n<h1 id=\"arm-processor-operation-mode\" style=\"position:relative;\"><a href=\"#arm-processor-operation-mode\" aria-label=\"arm processor operation mode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM Processor Operation Mode</h1>\n<ul>\n<li>ARM 프로세서에는 총 7개의 동작 모드가 있다.</li>\n<li>동작 모드는 프로세서가 어떠한 권한을 가지고 어떠한 일을 처리하고 있는지 나타내는 프로세서의 동작상태를 의미한다.</li>\n<li>각각의 7개의 모드는 따로 SP(Stack Point)를 갖는다.</li>\n<li>User,System은 같은 Stack을 사용한다.</li>\n</ul>\n<h3 id=\"user-mode-us---cpsr-m10000\" style=\"position:relative;\"><a href=\"#user-mode-us---cpsr-m10000\" aria-label=\"user mode us   cpsr m10000 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Mode (US) - CPSR M[10000]</h3>\n<ul>\n<li>일반적인 어플리케이션 실행 모드</li>\n<li>사용자 작업이나 Application을 수행 할 때의 동작 모드로 모든 동작 모드 중 유일하게 Non-Privileged 권한이다.</li>\n<li>메모리, I/O 장치와 같은 시스템 자원을 사용하는데 제한을 두어 사용자의 실수를 방지한다.</li>\n<li>SVC 모드로 이동하기 위해서는 Software Interrupt를 발생시킨다.</li>\n</ul>\n<h3 id=\"fast-interrupt-mode-fiq----cpsr-m10001\" style=\"position:relative;\"><a href=\"#fast-interrupt-mode-fiq----cpsr-m10001\" aria-label=\"fast interrupt mode fiq    cpsr m10001 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fast Interrupt Mode (FIQ)  - CPSR M[10001]</h3>\n<ul>\n<li>빠른 인터럽트 처리를 위한 모드</li>\n<li>2개의 인터럽트 소스 중 빠르게 인터럽트를 처리할 수 있다.</li>\n<li>빠른 처리를 위해서 Exception Vector에서도 최하단에 존재하며 별도의 레지스터를 소유한다.</li>\n</ul>\n<h3 id=\"supervisor-mode-svc----cpsr-m10011\" style=\"position:relative;\"><a href=\"#supervisor-mode-svc----cpsr-m10011\" aria-label=\"supervisor mode svc    cpsr m10011 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Supervisor Mode (SVC)  - CPSR M[10011]</h3>\n<ul>\n<li>OS 보호 모드 (SW 인터럽트)</li>\n<li>시스템 자원을 자유롭게 관리 할 수 있는 동작 모드로 주로 커널, 디바이스 드라이버를 처리할 때 System Call 동작되는 모드</li>\n<li>Reset 신호 입력 시 및 SWI가 발생하면 SVC mode로 전환된다.</li>\n</ul>\n<h3 id=\"abort-mode-abt---cpsr-m10111\" style=\"position:relative;\"><a href=\"#abort-mode-abt---cpsr-m10111\" aria-label=\"abort mode abt   cpsr m10111 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Abort Mode (ABT) - CPSR M[10111]</h3>\n<ul>\n<li>데이터, 명령어 Prefetch 중단 시 동작</li>\n<li>메모리에서 명령을 읽거나 데이터를 읽거나 쓸때 오류가 발생할 때 Abort Mode로 전환하여 오류를 처리한다.</li>\n<li>커널들의 패닉시 Abort Mode로 잔환되어 스택 내용이 전달됨을 알 수 있다.</li>\n</ul>\n<h3 id=\"interrupt-mode-irq---cpsr-m10010\" style=\"position:relative;\"><a href=\"#interrupt-mode-irq---cpsr-m10010\" aria-label=\"interrupt mode irq   cpsr m10010 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Interrupt Mode (IRQ) - CPSR M[10010]</h3>\n<ul>\n<li>범용 인터럽트 처리 모드</li>\n<li>일반적으로 사용되는 인터럽트로 외부 장치에서 요청되는 하드웨어적인 IRQ의 발생에 의해 ARM Core는 IRQ 모드로 전환하고 인터럽트를 처리한다.</li>\n</ul>\n<h3 id=\"system-mode-sys---cpsr-m11111\" style=\"position:relative;\"><a href=\"#system-mode-sys---cpsr-m11111\" aria-label=\"system mode sys   cpsr m11111 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>System Mode (SYS) - CPSR M[11111]</h3>\n<ul>\n<li>OS 가 사용하는 특권 모드</li>\n<li>user mode와 동일한 Register를 사용하고 동일한 용도로 사용된다.</li>\n<li>권한이 있고 없고 차이다.</li>\n</ul>\n<h3 id=\"undifined-mode-und---cpsr-m11011\" style=\"position:relative;\"><a href=\"#undifined-mode-und---cpsr-m11011\" aria-label=\"undifined mode und   cpsr m11011 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Undifined Mode (UND) - CPSR M[11011]</h3>\n<ul>\n<li>정의 되지 않은 명령어 예외 발생</li>\n</ul>\n<h3 id=\"cpsr\" style=\"position:relative;\"><a href=\"#cpsr\" aria-label=\"cpsr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CPSR</h3>\n<ul>\n<li>5bit 데이터로 구성된 Status Register 내에 저장된 데이터이다.</li>\n<li>현재 모드의 Status 값을 저장하고 있다.</li>\n<li>우축 0~4bit인 총 5bit는 각 모드의 정보를 담고 있다.</li>\n<li>32bit중 나머지 bit는 N, Z, C, V로 컨디션 코드 및 기타 정보로 사용된다.</li>\n</ul>\n<h3 id=\"모드-변경\" style=\"position:relative;\"><a href=\"#%EB%AA%A8%EB%93%9C-%EB%B3%80%EA%B2%BD\" aria-label=\"모드 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>모드 변경</h3>\n<ul>\n<li>\n<p>인터럽트, 에러 또는 프로그래머로 인하여 모드가 변경된다.</p>\n</li>\n<li>\n<p>예외에 인하여 모드가 변경된다.</p>\n</li>\n<li>\n<p>System Mode, User Mode는 동일한 Stack을 사용하여 Mode간의 차이가 없지만, User Mode에서 Device등의 자원을 사용하는데 있어 제한이 있다.</p>\n</li>\n<li>\n<p>SVC Mode는 처음으로 Reset 되었을 때 접근되는 Mode이며 시스템 자원을 자유롭게 관리가 가능하여 별도의 Stack 공간을 사용한다.</p>\n</li>\n<li>\n<p>UserMode에서 OS 단위를 사용하고자 할 때 시스템 자원이기 때문에 SVC Mode로 전환되어 사용할 권한을 얻으며 System Call이라고 부른다.</p>\n</li>\n</ul>\n<h1 id=\"arm-thumb-상태\" style=\"position:relative;\"><a href=\"#arm-thumb-%EC%83%81%ED%83%9C\" aria-label=\"arm thumb 상태 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM Thumb 상태</h1>\n<ul>\n<li>v4T 이상은 Thumb 명령어 집합이라고 하는 16비트 명령어 집합을 정의한다.</li>\n<li>Thumb 명령어 집합이 기능은 32비트 ARM 명령어 집합 기능의 하위 집합이다.</li>\n<li>Thumb 명령어를 실행하는 프로세서는 Thumb 상태에서 작동한다.</li>\n<li>ARM 명령어를 실행하는 프로세서는 ARM 상태에서 작동한다.</li>\n<li>ARM 상태의 프로세서는 Thumb 명령어를 실행할 수 없고 Thumb 상태의 프로세서는 ARM 명령어를 실행할 수 없다.</li>\n<li>각 명령어 집합에는 프로세서 상태를 변경하는 명령어가 포함되어 있다.</li>\n<li>ARM 프로세서는 항상 ARM 상태에서 코드 실행을 시작한다.</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EB%AA%85%EB%A0%B9%EC%96%B4%EA%B0%80-%EB%B3%B5%EC%9E%A1%ED%95%98%EB%8B%A4\">명령어가 복잡하다?</a></li>\n<li><a href=\"#arm-%EC%97%90%EC%84%9C-risc-%EB%B0%A9%EC%8B%9D%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">ARM 에서 RISC 방식을 사용하는 이유</a></li>\n<li><a href=\"#user-mode-us---cpsr-m10000\">User Mode (US) - CPSR M[10000]</a></li>\n<li><a href=\"#fast-interrupt-mode-fiq----cpsr-m10001\">Fast Interrupt Mode (FIQ)  - CPSR M[10001]</a></li>\n<li><a href=\"#supervisor-mode-svc----cpsr-m10011\">Supervisor Mode (SVC)  - CPSR M[10011]</a></li>\n<li><a href=\"#abort-mode-abt---cpsr-m10111\">Abort Mode (ABT) - CPSR M[10111]</a></li>\n<li><a href=\"#interrupt-mode-irq---cpsr-m10010\">Interrupt Mode (IRQ) - CPSR M[10010]</a></li>\n<li><a href=\"#system-mode-sys---cpsr-m11111\">System Mode (SYS) - CPSR M[11111]</a></li>\n<li><a href=\"#undifined-mode-und---cpsr-m11011\">Undifined Mode (UND) - CPSR M[11011]</a></li>\n<li><a href=\"#cpsr\">CPSR</a></li>\n<li><a href=\"#%EB%AA%A8%EB%93%9C-%EB%B3%80%EA%B2%BD\">모드 변경</a></li>\n</ul>\n</div>","excerpt":"CISC (Complex Instruction Set Computer) 명령어가 복잡하여 명령어를 해석하는 데 시간이 오래 걸리며 명령어의 수가 많고 명령을 처리하는 시간이 길어 명령 처리 대기 시간이 길다. 명령어가 복잡하다? RISC (Reduced Instruction Set Computer) CPU 명령어의 개수를 줄여 하드웨어 구조를 좀 더 간단하게 만드는 방식 32비트로 명령어의 크기가 동일 하며 고정 길이를 갖는다. 명령어의 개수가 적다. 핵심적인 명령어를 기반으로 최소한의 명령어 집합을 구성하여 pipelining 기술을 도입하여 빠른 동작 속도와 하드웨어의 단순화와 효율성을 갖을 수 있으며 가격 경쟁령에서도 우위를 점하였다. ARM 에서 RISC 방식을 사용하는 이유 ARM은 Berkeley RISC에서 파생되었다. ARM Processor Operation Mode ARM 프로세서에는 총 7개의 동작 모드가 있다. 동작 모드는 프로세서가 어떠한 권한을 가지고 어떠…","frontmatter":{"date":"February 09, 2021","title":"ARM hack overview","categories":"ARM","author":"Zer0Luck","emoji":"🍤"},"fields":{"slug":"/arm-0/"}},"next":{"id":"6ddfd1b2-808b-5d18-b643-d305593f1a71","html":"<h1 id=\"seh-structured-exception-handler\" style=\"position:relative;\"><a href=\"#seh-structured-exception-handler\" aria-label=\"seh structured exception handler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SEH (Structured Exception Handler)</h1>\n<ul>\n<li>SEH Windows 운영체제에서 제공하는 예외처리 시스템이다.</li>\n<li><code class=\"language-text\">__try, __except, __finally</code> 키워드로 간단히 구현할 수 있다.</li>\n<li>하드웨어 오류와 같은 특정 예외 코드 상황을 정상적으로 처리하기 위해 C에 대한 Microsoft 확장이다.</li>\n<li>SEH를 사용하면 실행이 예기치 않게 종료 되는 경우 메모리 블록 및 파일과 같은 리소스가 올바르게 해제 되도록 할 수 있다.</li>\n</ul>\n<h3 id=\"seh-매커니즘\" style=\"position:relative;\"><a href=\"#seh-%EB%A7%A4%EC%BB%A4%EB%8B%88%EC%A6%98\" aria-label=\"seh 매커니즘 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SEH 매커니즘</h3>\n<ul>\n<li>예외 처리기 , <code class=\"language-text\">_except</code> 예외에 응답 하거나 해제할 수 있는 블록</li>\n<li>Termination Handlers <code class=\"language-text\">_finally</code> 예외가 종료를 발생 시키는 지 여부에 관계 없이 항상 호출되는 종료 처리기 또는 블록</li>\n</ul>\n<h3 id=\"일반-실행의-경우-예외-처리-방법\" style=\"position:relative;\"><a href=\"#%EC%9D%BC%EB%B0%98-%EC%8B%A4%ED%96%89%EC%9D%98-%EA%B2%BD%EC%9A%B0-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC-%EB%B0%A9%EB%B2%95\" aria-label=\"일반 실행의 경우 예외 처리 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>일반 실행의 경우 예외 처리 방법</h3>\n<ul>\n<li>OS는 프로세스 실행 중에 예외가 발생하면 프로세스에게 처리를 맡긴다.</li>\n<li>프로세스 코드에 (SEH…) 예외처 리가 구현되어 있다면, 해당 예외를 잘 처리한 후 게속 실행될 것이다.</li>\n<li>구현되어 있지 않다면 기본 예외 처리기를 동작시켜 프로세스를 종료 시킨다.</li>\n</ul>\n<h3 id=\"디버깅-실행의-경우-예외-처리-방법\" style=\"position:relative;\"><a href=\"#%EB%94%94%EB%B2%84%EA%B9%85-%EC%8B%A4%ED%96%89%EC%9D%98-%EA%B2%BD%EC%9A%B0-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC-%EB%B0%A9%EB%B2%95\" aria-label=\"디버깅 실행의 경우 예외 처리 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디버깅 실행의 경우 예외 처리 방법</h3>\n<ul>\n<li>디버깅 중에 디버기 프로세스에 에외가 발생하면 OS는 우선적으로 디버거에게 에외를 넘겨서 처리하도록 한다.</li>\n<li>디버거는 디버기에 대한 거의 모든 소유권을 가지고 있다.</li>\n<li>즉 디버기의 실행, 종료의 제어뿐만 아니라 디버기 프로세스 내부의 가상 메모리, 레지스터에 때한 읽기/쓰기 권한도 가지고 있다.</li>\n<li>이버기의 내부에서 발생하는 모든 에외(에러) 상황을 처리해야 한다.</li>\n<li>디버기의 SEH는 우선순위에서 디버거에게 밀린다.</li>\n</ul>\n<h3 id=\"디버거-실행-중지시-조치\" style=\"position:relative;\"><a href=\"#%EB%94%94%EB%B2%84%EA%B1%B0-%EC%8B%A4%ED%96%89-%EC%A4%91%EC%A7%80%EC%8B%9C-%EC%A1%B0%EC%B9%98\" aria-label=\"디버거 실행 중지시 조치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디버거 실행 중지시 조치</h3>\n<ol>\n<li>\n<p>예외 직접 수정 : 코드, 레지스터, 메모리</p>\n<ul>\n<li>디버거는 예외가 발생한 코드 주소에 멈춰 있기 때문에 문제가 발생한 코드, 메모리, 레지스터 등을 디버거를 통하여 직접 수정하면 예외는 해결된다.</li>\n</ul>\n</li>\n<li>\n<p>예외를 디버기에게 넘겨서 처리</p>\n<ul>\n<li>디버기 내부에 이미 SEH가 존재하여 예외를 처리할 수 있다.</li>\n<li>예외 (EXCEPTION) 통지를 그대로 디버기에게 되돌려 보내서 자체 해결하도록 만들 수 있다.</li>\n<li>‘일반 실행’ 의 예외 처리와 동일한 상황이 된다.</li>\n</ul>\n</li>\n<li>\n<p>기본 예외처리기</p>\n<ul>\n<li>현재 발생한 예외를 디버거와 디버기에서 처리할 수 없다면 (혹은 의도적으로 처리하지 않는다면), 마지막으로 OS의 기본 예외 처리기에서 처리한다.</li>\n<li>디버기 프로세스가 종료되면서 디버깅은 완전히 중지된다.</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"excpetion\" style=\"position:relative;\"><a href=\"#excpetion\" aria-label=\"excpetion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Excpetion</h2>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifndef</span> <span class=\"token expression\">UMDF_USING_NTSTATUS </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifndef</span> <span class=\"token expression\">WIN32_NO_STATUS </span></span>\n<span class=\"token comment\">/*lint -save -e767 */</span>  \n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_WAIT_0</span>                           <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x00000000L</span><span class=\"token punctuation\">)</span> </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_ABANDONED_WAIT_0</span>          <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x00000080L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_USER_APC</span>                  <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x000000C0L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_TIMEOUT</span>                   <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x00000102L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_PENDING</span>                   <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x00000103L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_EXCEPTION_HANDLED</span>            <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x00010001L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_CONTINUE</span>                     <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x00010002L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_SEGMENT_NOTIFICATION</span>      <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x40000005L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_FATAL_APP_EXIT</span>            <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x40000015L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_REPLY_LATER</span>                  <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x40010001L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_TERMINATE_THREAD</span>             <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x40010003L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_TERMINATE_PROCESS</span>            <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x40010004L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_CONTROL_C</span>                    <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x40010005L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_PRINTEXCEPTION_C</span>             <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x40010006L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_RIPEXCEPTION</span>                 <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x40010007L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_CONTROL_BREAK</span>                <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x40010008L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_COMMAND_EXCEPTION</span>            <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x40010009L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_PRINTEXCEPTION_WIDE_C</span>        <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x4001000AL</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_GUARD_PAGE_VIOLATION</span>      <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x80000001L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_DATATYPE_MISALIGNMENT</span>     <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x80000002L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_BREAKPOINT</span>                <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x80000003L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_SINGLE_STEP</span>               <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x80000004L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_LONGJUMP</span>                  <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x80000026L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_UNWIND_CONSOLIDATE</span>        <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x80000029L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">DBG_EXCEPTION_NOT_HANDLED</span>        <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0x80010001L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_ACCESS_VIOLATION</span>          <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000005L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_IN_PAGE_ERROR</span>             <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000006L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_INVALID_HANDLE</span>            <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000008L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_INVALID_PARAMETER</span>         <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC000000DL</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_NO_MEMORY</span>                 <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000017L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_ILLEGAL_INSTRUCTION</span>       <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC000001DL</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_NONCONTINUABLE_EXCEPTION</span>  <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000025L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_INVALID_DISPOSITION</span>       <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000026L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_ARRAY_BOUNDS_EXCEEDED</span>     <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC000008CL</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_FLOAT_DENORMAL_OPERAND</span>    <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC000008DL</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_FLOAT_DIVIDE_BY_ZERO</span>      <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC000008EL</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_FLOAT_INEXACT_RESULT</span>      <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC000008FL</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_FLOAT_INVALID_OPERATION</span>   <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000090L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_FLOAT_OVERFLOW</span>            <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000091L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_FLOAT_STACK_CHECK</span>         <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000092L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_FLOAT_UNDERFLOW</span>           <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000093L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_INTEGER_DIVIDE_BY_ZERO</span>    <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000094L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_INTEGER_OVERFLOW</span>          <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000095L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_PRIVILEGED_INSTRUCTION</span>    <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000096L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_STACK_OVERFLOW</span>            <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC00000FDL</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_DLL_NOT_FOUND</span>             <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000135L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_ORDINAL_NOT_FOUND</span>         <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000138L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_ENTRYPOINT_NOT_FOUND</span>      <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000139L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_CONTROL_C_EXIT</span>            <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC000013AL</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_DLL_INIT_FAILED</span>           <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000142L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_FLOAT_MULTIPLE_FAULTS</span>     <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC00002B4L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_FLOAT_MULTIPLE_TRAPS</span>      <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC00002B5L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_REG_NAT_CONSUMPTION</span>       <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC00002C9L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_HEAP_CORRUPTION</span>           <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000374L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_STACK_BUFFER_OVERRUN</span>      <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000409L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_INVALID_CRUNTIME_PARAMETER</span> <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000417L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_ASSERTION_FAILURE</span>         <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000420L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_ENCLAVE_VIOLATION</span>         <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC00004A2L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_INTERRUPTED</span>               <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000515L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_THREAD_NOT_RUNNING</span>        <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000516L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_ALREADY_REGISTERED</span>        <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0000718L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">if</span> <span class=\"token expression\"><span class=\"token function\">defined</span><span class=\"token punctuation\">(</span>STATUS_SUCCESS<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>_WIN32_WINNT <span class=\"token operator\">></span> <span class=\"token number\">0x0500</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>_WIN32_FUSION <span class=\"token operator\">>=</span> <span class=\"token number\">0x0100</span><span class=\"token punctuation\">)</span> </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_SXS_EARLY_DEACTIVATION</span>    <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC015000FL</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STATUS_SXS_INVALID_DEACTIVATION</span>  <span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DWORD   <span class=\"token punctuation\">)</span><span class=\"token number\">0xC0150010L</span><span class=\"token punctuation\">)</span>    </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span></code></pre></div>\n<h3 id=\"status_access_violation--dword---0xc0000005l\" style=\"position:relative;\"><a href=\"#status_access_violation--dword---0xc0000005l\" aria-label=\"status_access_violation  dword   0xc0000005l permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STATUS_ACCESS_VIOLATION  (DWORD   )0xC0000005L</h3>\n<ul>\n<li>존재하지 않거나 접근 권하니 없는 메모리 영역에 대해서 접근을 시도할 때 발생하는 예외</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">MOV DWORD PTR DS<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span>\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> 메모리 주소 <span class=\"token number\">0</span>은 할당된 영역이 아니다<span class=\"token punctuation\">.</span>\n\nADD DWORD PTR DS<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token number\">0x401000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span>\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">.</span>text 섹션의 시작 주소 <span class=\"token number\">0x401000</span>은 READ 속성만을 가지고 있다<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">(</span>WRITE 속성 없음<span class=\"token punctuation\">)</span>\n\nXOR DWORD PTR DS<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token number\">80000000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1234</span>\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> 메모리 주소 <span class=\"token number\">0x80000000</span> 은 Kernel 영역이라 user 모드에선 접근 불가</code></pre></div>\n<h3 id=\"status_breakpoint-dword---0x80000003l\" style=\"position:relative;\"><a href=\"#status_breakpoint-dword---0x80000003l\" aria-label=\"status_breakpoint dword   0x80000003l permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STATUS_BREAKPOINT (DWORD   )0x80000003L</h3>\n<ul>\n<li>실행 코드에 BP가 설치되면 CPU가 그 주소를 실행하려 할 때 EXCEPTION_BREAKPOINT 예외가 발생한다.</li>\n<li>디버거는 바로 이 EXCEPTION_BREAKPOINT 예외를 이용하여 BP 기능을 제공하는 것이다.</li>\n</ul>\n<h2 id=\"breakpoint-구현-방법\" style=\"position:relative;\"><a href=\"#breakpoint-%EA%B5%AC%ED%98%84-%EB%B0%A9%EB%B2%95\" aria-label=\"breakpoint 구현 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>BreakPoint 구현 방법</h2>\n<h3 id=\"int-3\" style=\"position:relative;\"><a href=\"#int-3\" aria-label=\"int 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>INT 3</h3>\n<ul>\n<li>BP를 설치하는 명령어는 어셈블리 명령어로 <code class=\"language-text\">INT 3</code> 입니다.</li>\n<li>해당 명령어의 기계어 (IA32 Instruction) 형태는 <code class=\"language-text\">0xCC</code> 이다.</li>\n<li>CPU는 코드 실행 과정에서 어셈블리 명령어 INT3을 만나면 EXCPETION_BREAKPOINT 예외를 발생시킨다.</li>\n<li>디버거 상에서는 사용자 임시 BP (User Temporary Break Point)이기 때문에 화면 상에 표시하지 ㅇ낳는다.</li>\n<li>해당 Instuction이 0xcc로 변경된 것을 확인할려면 프로세스 덤프를 한후에 해당 주소에서 확인이 가능하다.</li>\n</ul>\n<h3 id=\"status_illegal_instruction-------dword---0xc000001dl\" style=\"position:relative;\"><a href=\"#status_illegal_instruction-------dword---0xc000001dl\" aria-label=\"status_illegal_instruction       dword   0xc000001dl permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STATUS_ILLEGAL_INSTRUCTION       ((DWORD   )0xC000001DL)</h3>\n<ul>\n<li>CPU가 해석할 수 없는 Instuction을 만날 때 발생하는 예외이다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token number\">0FFF</span></code></pre></div>\n<ul>\n<li>해당 Insturction은 x86 CPU에 정의된 Instruction이 아니기 때문에 EXCEPTION_ILLEGAL_INSTRUCTION 예외를 발생시킨다.</li>\n</ul>\n<h3 id=\"status_integer_divide_by_zero----dword---0xc0000094l\" style=\"position:relative;\"><a href=\"#status_integer_divide_by_zero----dword---0xc0000094l\" aria-label=\"status_integer_divide_by_zero    dword   0xc0000094l permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>STATUS_INTEGER_DIVIDE_BY_ZERO    (DWORD   )0xC0000094L</h3>\n<ul>\n<li>INTEGER (정수) 나눗셈 연산에서 분모가 0인 경우 (0으로나누는 경우) 발생하는 예외이다.</li>\n<li>프로그램 개발할 때 간혹 발생하는 예외</li>\n<li>분모가 변수로 잡혀 값이 0이 되었을 때 나누기 연산을 수행하면 EXCEPTION_INTEGER_DIVIDE_BY_ZERO 예외가 발생한다.</li>\n</ul>\n<h2 id=\"seh-chain\" style=\"position:relative;\"><a href=\"#seh-chain\" aria-label=\"seh chain permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SEH Chain</h2>\n<ul>\n<li>체인 형태로 구성되어 있다.</li>\n<li>첫 번째 에외 처리기에서 해당 예외를 처리하지 못하면 (처리될 때 까지) 다음 예외 처리기로 예외를 넘겨주는 형식이다.</li>\n<li>기술적으로 SEH는 EXCEPTION_REGISTRATION_RECORD 구조체 연결 리스트의 형태로 구성된다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_EXCEPTION_REGISTRATION_RECORD</span>\n<span class=\"token punctuation\">{</span>\n     PEXCEPTION_REGISTRATION_RECORD Next<span class=\"token punctuation\">;</span>\n     PEXCEPTION_DISPOSITION Handler<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> EXCEPTION_REGISTRATION_RECORD<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>PEXCEPTION_REGISTRATION_RECORD<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>Next 멤버는 다음 <em>EXCPETION</em>REGISTRATION_RECORD 구조체 포인터이며, Handler 멤버가 예외처리기 함수 (예외 처리기)이다.</li>\n<li>NEXT 멤버의 값이 <code class=\"language-text\">FFFFFFFF</code> 이면 연결리스트의 마지막을 나타낸다.</li>\n<li>프로세스의 SEH 체인 구조를 그림으로 표현하면</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAACWElEQVQoz12SW0+SARjH+R615QHl9HKQFxAFBEGQk5knQM1whivBqRvlpOnqI3RVeZjoctZWy9Q3oKWyVold+C26q1ldtbn1/hqUN1082/95fs//f/M8Cp1GL2uVKjRKlaxRqqhqQTDhD4QJ+EMEPD6CXj9+j5dubxcBfxB/dxijUeTvvpoLn1YtoLCF+nDOLMruzAId0zmcmQXMjk4ErR6rN4Rz+h7uWuVwzSxi8UcRNHpEeweOqXlc0zk8mRzO2SVaexMo3LNTcs9pgbGKJA9V9oh8eEVb7zW0DWraEjGin14zciKRON4j+nkf1+QEugYN1k4f4fIL4icS14/3iZ4W8C7dReG6PUXkoEi8KDFQkghJO9jCPajrmrAPxggXdhkqSQwVJcJvJdqT46jrmxDdPoK7L+kvScQL+0SOSrjvVANvjXP13QajhTzxYp7I3jK2cAh1vQr7QB890irDhTwjhTw9xXUcN4ZrTHR7iOw8JlbMM/omT+/BJp5sGoXOaKHJIKI0mFHqzTQbLQgGsXYYnUGs9UqDSKO+hWaDpTarMsFgRlVlenONVzO0RguK9IhfrqyPc7iSkssrExw9GiXc5eSKUqA/1EH5yRjl1RSHyxN8XEuSivmoU+px2O0UHiZ4v5biYPkmlfUkD9JRFPeTUc6fzchfn2b5vpXlbCPNYMDDpUYdyaiXH5sZzrayfNvK8mt7lvmRIJcbBTzt7XxZnuTndpaq9/z5HKtzgyjMJutve0srdpNVtpusVHX1x7SCCaPRwj/GBWsxWmpMbzDT+h8TTTb+AFSYdO5NBUyxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./SEH_CHAIN.png\"\n        title=\"./SEH_CHAIN.png\"\n        src=\"/static/8f877b3c5b5fdbd859a60c8bb7f0ccf3/37523/SEH_CHAIN.png\"\n        srcset=\"/static/8f877b3c5b5fdbd859a60c8bb7f0ccf3/e9ff0/SEH_CHAIN.png 180w,\n/static/8f877b3c5b5fdbd859a60c8bb7f0ccf3/f21e7/SEH_CHAIN.png 360w,\n/static/8f877b3c5b5fdbd859a60c8bb7f0ccf3/37523/SEH_CHAIN.png 720w,\n/static/8f877b3c5b5fdbd859a60c8bb7f0ccf3/302a4/SEH_CHAIN.png 1080w,\n/static/8f877b3c5b5fdbd859a60c8bb7f0ccf3/07a9c/SEH_CHAIN.png 1440w,\n/static/8f877b3c5b5fdbd859a60c8bb7f0ccf3/74e37/SEH_CHAIN.png 1732w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>총 3개의 SEH가 존재한다. 어떤 예외가 발생하면, 예외가 해결될 때까지 처리기 (A) → (B) → (C) 순서대로 예외 처리기가 호출된다.</li>\n</ul>\n<h2 id=\"seh-함수-정의\" style=\"position:relative;\"><a href=\"#seh-%ED%95%A8%EC%88%98-%EC%A0%95%EC%9D%98\" aria-label=\"seh 함수 정의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SEH 함수 정의</h2>\n<ul>\n<li>EXCEPTION_DISPOSITION</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">EXCPETION_DISPOSITION <span class=\"token function\">_except_handler</span> <span class=\"token punctuation\">(</span>\n\tEXCEPTION_RECORD               <span class=\"token operator\">*</span>pRecord<span class=\"token punctuation\">,</span>\n\tEXCEPTION_REGISTRATION_RECORD  <span class=\"token operator\">*</span>pFrame\n\tCONTEXT                        <span class=\"token operator\">*</span>pContext<span class=\"token punctuation\">,</span>\n\tPVOID                           pValue\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>예외 처리기는 4개의 파라미터를 입력 받으며, EXCEPTION_DISPOSITION 이라는 열거형을 반환한다.</li>\n<li>해당 예외 처리 함수는 시스템에 의해서 호출되는 콜백 함수이다.</li>\n<li>입력 파라미터들에 예외와 관련된 정보가 저장되어 있다.</li>\n</ul>\n<p><strong>EXCEPTION_RECORD 구조체 정의</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_EXCEPTION_RECORD</span> <span class=\"token punctuation\">{</span>\n  DWORD                    ExceptionCode<span class=\"token punctuation\">;</span>                <span class=\"token comment\">// 예외 코드</span>\n  DWORD                    ExceptionFlags<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_EXCEPTION_RECORD</span> <span class=\"token operator\">*</span>ExceptionRecord<span class=\"token punctuation\">;</span>\n  PVOID                    ExceptionAddress<span class=\"token punctuation\">;</span>             <span class=\"token comment\">// 예외 발생 주소</span>\n  DWORD                    NumberParameters<span class=\"token punctuation\">;</span>\n  ULONG_PTR                ExceptionInformation<span class=\"token punctuation\">[</span>EXCEPTION_MAXIMUM_PARAMETERS<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> EXCEPTION_RECORD<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>ExceptionCode : 발생한 예외의 종류를 의미</li>\n<li>ExcpetionAddress : 예외가 발생한 코드 주소를 나타낸다.</li>\n</ul>\n<p><strong>CONTEXT 구조체 정의</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">_CONTEXT</span> <span class=\"token punctuation\">{</span>\n  DWORD64 P1Home<span class=\"token punctuation\">;</span>\n  DWORD64 P2Home<span class=\"token punctuation\">;</span>\n  DWORD64 P3Home<span class=\"token punctuation\">;</span>\n  DWORD64 P4Home<span class=\"token punctuation\">;</span>\n  DWORD64 P5Home<span class=\"token punctuation\">;</span>\n  DWORD64 P6Home<span class=\"token punctuation\">;</span>\n  DWORD   ContextFlags<span class=\"token punctuation\">;</span>\n  DWORD   MxCsr<span class=\"token punctuation\">;</span>\n  WORD    SegCs<span class=\"token punctuation\">;</span>\n  WORD    SegDs<span class=\"token punctuation\">;</span>\n  WORD    SegEs<span class=\"token punctuation\">;</span>\n  WORD    SegFs<span class=\"token punctuation\">;</span>\n  WORD    SegGs<span class=\"token punctuation\">;</span>\n  WORD    SegSs<span class=\"token punctuation\">;</span>\n  DWORD   EFlags<span class=\"token punctuation\">;</span>\n  DWORD64 Dr0<span class=\"token punctuation\">;</span>\n  DWORD64 Dr1<span class=\"token punctuation\">;</span>\n  DWORD64 Dr2<span class=\"token punctuation\">;</span>\n  DWORD64 Dr3<span class=\"token punctuation\">;</span>\n  DWORD64 Dr6<span class=\"token punctuation\">;</span>\n  DWORD64 Dr7<span class=\"token punctuation\">;</span>\n  DWORD64 Rax<span class=\"token punctuation\">;</span>\n  DWORD64 Rcx<span class=\"token punctuation\">;</span>\n  DWORD64 Rdx<span class=\"token punctuation\">;</span>\n  DWORD64 Rbx<span class=\"token punctuation\">;</span>\n  DWORD64 Rsp<span class=\"token punctuation\">;</span>\n  DWORD64 Rbp<span class=\"token punctuation\">;</span>\n  DWORD64 Rsi<span class=\"token punctuation\">;</span>\n  DWORD64 Rdi<span class=\"token punctuation\">;</span>\n  DWORD64 R8<span class=\"token punctuation\">;</span>\n  DWORD64 R9<span class=\"token punctuation\">;</span>\n  DWORD64 R10<span class=\"token punctuation\">;</span>\n  DWORD64 R11<span class=\"token punctuation\">;</span>\n  DWORD64 R12<span class=\"token punctuation\">;</span>\n  DWORD64 R13<span class=\"token punctuation\">;</span>\n  DWORD64 R14<span class=\"token punctuation\">;</span>\n  DWORD64 R15<span class=\"token punctuation\">;</span>\n  DWORD64 Rip<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">union</span> <span class=\"token punctuation\">{</span>\n    XMM_SAVE_AREA32 FltSave<span class=\"token punctuation\">;</span>\n    NEON128         Q<span class=\"token punctuation\">[</span><span class=\"token number\">16</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    ULONGLONG       D<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">struct</span> <span class=\"token punctuation\">{</span>\n      M128A Header<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      M128A Legacy<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      M128A Xmm0<span class=\"token punctuation\">;</span>\n      M128A Xmm1<span class=\"token punctuation\">;</span>\n      M128A Xmm2<span class=\"token punctuation\">;</span>\n      M128A Xmm3<span class=\"token punctuation\">;</span>\n      M128A Xmm4<span class=\"token punctuation\">;</span>\n      M128A Xmm5<span class=\"token punctuation\">;</span>\n      M128A Xmm6<span class=\"token punctuation\">;</span>\n      M128A Xmm7<span class=\"token punctuation\">;</span>\n      M128A Xmm8<span class=\"token punctuation\">;</span>\n      M128A Xmm9<span class=\"token punctuation\">;</span>\n      M128A Xmm10<span class=\"token punctuation\">;</span>\n      M128A Xmm11<span class=\"token punctuation\">;</span>\n      M128A Xmm12<span class=\"token punctuation\">;</span>\n      M128A Xmm13<span class=\"token punctuation\">;</span>\n      M128A Xmm14<span class=\"token punctuation\">;</span>\n      M128A Xmm15<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> DUMMYSTRUCTNAME<span class=\"token punctuation\">;</span>\n    DWORD           S<span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> DUMMYUNIONNAME<span class=\"token punctuation\">;</span>\n  M128A   VectorRegister<span class=\"token punctuation\">[</span><span class=\"token number\">26</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  DWORD64 VectorControl<span class=\"token punctuation\">;</span>\n  DWORD64 DebugControl<span class=\"token punctuation\">;</span>\n  DWORD64 LastBranchToRip<span class=\"token punctuation\">;</span>\n  DWORD64 LastBranchFromRip<span class=\"token punctuation\">;</span>\n  DWORD64 LastExceptionToRip<span class=\"token punctuation\">;</span>\n  DWORD64 LastExceptionFromRip<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> CONTEXT<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>PCONTEXT<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>CONTEXT 구조체는 CPU 레지스터 값을 백업하는 용도로 사용된다.</li>\n<li>CPU 레지스터 값을 백업하는 이유는 멀티 스레드(Multi-Thread) 환경 때문이다.</li>\n<li>스레드는 내부적으로 CONTEXT 구조체를 하나씩 가지고 있다.</li>\n<li>CPU가 다른 스레드를 실행하러 잠시 이동할 때 CPU 레지스터들의 값을 현재 스레드의 CONTEXT 구조체에 백업한다.</li>\n<li>그후 CPU가 다시 에전 스레드를 실행하러 오면 CONTEXT 구조체에 백업된 레지스터 값들을 실제 CPU 레지스터에 덮어쓴다.</li>\n<li>아까 실행이 멈춰졌던 코드 위치부터 실행을 다시 시작한다.</li>\n<li>OS는 멀티 스레드 환경에서 안전하게 스레드 단위별로 실행이 가능하다.</li>\n</ul>\n<h3 id=\"multi-thread\" style=\"position:relative;\"><a href=\"#multi-thread\" aria-label=\"multi thread permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multi-Thread</h3>\n<ul>\n<li>\n<p>CPU의 시분할 (Time-Slicing) 방식</p>\n</li>\n<li>\n<p>CPU가 각 스레드를 차례대로 일정 시간 동안 실행해주는 것이다.</p>\n</li>\n<li>\n<p>그 시간 간격이 극히 짧기 때문에 동시에 여러 개의 스레드가 실행되는 것처럼 보이는 것이다.</p>\n</li>\n<li>\n<p>스레드의 우선순위에 따라서 CPU 제어권을 얻는 횟수에 차이가 발생한다.</p>\n</li>\n<li>\n<p>예외가 발생하면 그 코드를 실행한 스레드는 중지되고 SEH(예외 처리기)가 실행된다.</p>\n</li>\n<li>\n<p>OS는 예외 처리기의 파라미터에 해당 스레드의 CONTEXT 구조체 포인터를 넘겨준다.</p>\n</li>\n<li>\n<p>구조체 멤버 중 EIP 멤버가 있다.(offset: B8)</p>\n</li>\n<li>\n<p>예외 처리기에서 파라미터로 넘어온 CONTEXT.Eip 를 다른 주소로 설정한 후 예외 처리기 함수를 리턴시키면, 아까 중지된 스레드는 새로 설정된 EIP 주소의 코드를 실행한다.</p>\n</li>\n</ul>\n<h3 id=\"exception_disposition-enum\" style=\"position:relative;\"><a href=\"#exception_disposition-enum\" aria-label=\"exception_disposition enum permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EXCEPTION_DISPOSITION enum</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">enum</span> <span class=\"token class-name\">_EXCEPTION_DISPOSITION</span>\n<span class=\"token punctuation\">{</span>\n         ExceptionContinueExecution <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n         ExceptionContinueSearch <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n         ExceptionNestedException <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n         ExceptionCollidedUnwind <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n<span class=\"token punctuation\">}</span> EXCEPTION_DISPOSITION<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>예외 처리기 (SEH)에서 예외를 처리했다면 <code class=\"language-text\">ExceptionContinueExecution(0)</code> 을 리턴할 경우 예외가 발생한 코드부터 재실행된다.</li>\n<li>만약 예외를 처리할 수 없다면 ExceptionContinueSearch(1)을 리턴하여 SEH chain에서 다음 예외 처리기에서 처리하도록 한다.</li>\n</ul>\n<h3 id=\"tebnttibexceptionlist\" style=\"position:relative;\"><a href=\"#tebnttibexceptionlist\" aria-label=\"tebnttibexceptionlist permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TEB.NtTib.ExceptionList</h3>\n<ul>\n<li>프로세스의 SEH chain.에 접근하는 방법은 간단하다.</li>\n<li>TEB(THREAD ENVIRONMENT BLOCK) 구조체의 NtTib 멤버를 따라가면 된다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token number\">0</span><span class=\"token operator\">:</span><span class=\"token number\">003</span><span class=\"token operator\">></span> dt _NT_TIB\nntdll<span class=\"token operator\">!</span>_NT_TIB\n   <span class=\"token operator\">+</span><span class=\"token number\">0x000</span> ExceptionList    <span class=\"token operator\">:</span> Ptr32 _EXCEPTION_REGISTRATION_RECORD\n   <span class=\"token operator\">+</span><span class=\"token number\">0x004</span> StackBase        <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x008</span> StackLimit       <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x00c</span> SubSystemTib     <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x010</span> FiberData        <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x010</span> Version          <span class=\"token operator\">:</span> Uint4B\n   <span class=\"token operator\">+</span><span class=\"token number\">0x014</span> ArbitraryUserPointer <span class=\"token operator\">:</span> Ptr32 Void\n   <span class=\"token operator\">+</span><span class=\"token number\">0x018</span> Self             <span class=\"token operator\">:</span> Ptr32 _NT_TIB</code></pre></div>\n<ul>\n<li>TEB 구조체에서 가장 첫 멤버임을 확인할 수 있다.</li>\n<li>TEB는 FS 세그먼트 레지스터가 가리키는 세그먼트 메모리의 시작 주소 (base address)에 위치한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">TEB<span class=\"token punctuation\">.</span>NtTib<span class=\"token punctuation\">.</span>ExceptionList <span class=\"token operator\">=</span> FS<span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<ul>\n<li><a href=\"#seh-%EB%A7%A4%EC%BB%A4%EB%8B%88%EC%A6%98\">SEH 매커니즘</a></li>\n<li><a href=\"#%EC%9D%BC%EB%B0%98-%EC%8B%A4%ED%96%89%EC%9D%98-%EA%B2%BD%EC%9A%B0-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC-%EB%B0%A9%EB%B2%95\">일반 실행의 경우 예외 처리 방법</a></li>\n<li><a href=\"#%EB%94%94%EB%B2%84%EA%B9%85-%EC%8B%A4%ED%96%89%EC%9D%98-%EA%B2%BD%EC%9A%B0-%EC%98%88%EC%99%B8-%EC%B2%98%EB%A6%AC-%EB%B0%A9%EB%B2%95\">디버깅 실행의 경우 예외 처리 방법</a></li>\n<li><a href=\"#%EB%94%94%EB%B2%84%EA%B1%B0-%EC%8B%A4%ED%96%89-%EC%A4%91%EC%A7%80%EC%8B%9C-%EC%A1%B0%EC%B9%98\">디버거 실행 중지시 조치</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#excpetion\">Excpetion</a></p>\n<ul>\n<li><a href=\"#status_access_violation--dword---0xc0000005l\">STATUS_ACCESS_VIOLATION  (DWORD   )0xC0000005L</a></li>\n<li><a href=\"#status_breakpoint-dword---0x80000003l\">STATUS_BREAKPOINT (DWORD   )0x80000003L</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#breakpoint-%EA%B5%AC%ED%98%84-%EB%B0%A9%EB%B2%95\">BreakPoint 구현 방법</a></p>\n<ul>\n<li><a href=\"#int-3\">INT 3</a></li>\n<li><a href=\"#status_illegal_instruction-------dword---0xc000001dl\">STATUS_ILLEGAL_INSTRUCTION       ((DWORD   )0xC000001DL)</a></li>\n<li><a href=\"#status_integer_divide_by_zero----dword---0xc0000094l\">STATUS_INTEGER_DIVIDE_BY_ZERO    (DWORD   )0xC0000094L</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#seh-chain\">SEH Chain</a></p>\n</li>\n<li>\n<p><a href=\"#seh-%ED%95%A8%EC%88%98-%EC%A0%95%EC%9D%98\">SEH 함수 정의</a></p>\n<ul>\n<li><a href=\"#multi-thread\">Multi-Thread</a></li>\n<li><a href=\"#exception_disposition-enum\">EXCEPTION_DISPOSITION enum</a></li>\n<li><a href=\"#tebnttibexceptionlist\">TEB.NtTib.ExceptionList</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"January 03, 2021","title":"Windows SEH (Structured Exception Handler) 0","categories":"Windows","author":"Zer0Luck","emoji":"🍙"},"fields":{"slug":"/window_3_theori/"}},"prev":{"id":"61af3ad2-c811-5f8f-afa0-f2fffa0d4177","html":"<h1 id=\"arm-conditional-execution\" style=\"position:relative;\"><a href=\"#arm-conditional-execution\" aria-label=\"arm conditional execution permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM Conditional Execution</h1>\n<h2 id=\"conditional-execution\" style=\"position:relative;\"><a href=\"#conditional-execution\" aria-label=\"conditional execution permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conditional Execution</h2>\n<ul>\n<li>\n<p>ARM 상태에서 각 데이터 처리 명령어에는 작업 결과에 따라 CPSR(Current Program State Register)의 ALU 상태 플래그를 업데이트 하는 옵션이 있다.</p>\n</li>\n<li>\n<p>ARM 데이터 처리 명령어에 S 접미사를 추가하여 CPSR에서 ALU 상태 플래그를 업데이트 한다.</p>\n</li>\n<li>\n<p>CMP, CMN, TST, TEQ에 S 접미사를 사용하면 안된다. 이러한 비교 명령어는 항상 플래그를 업데이트 하기 때문이다.</p>\n</li>\n<li>\n<p>Thumb 상태에서는 옵셥이 없다.</p>\n</li>\n<li>\n<p>MOV, ADD 명령어에서 하나 이상의 상위 레지스터가 사용되는 경우를 제외하고 모든 데이터 처리 명령어는 CPSR의 ALU 상태 플래그를 업데이트 한다.</p>\n</li>\n<li>\n<p>MOV 및 ADD는 이러한 경우 상태 플래그를 업데이트 할 수 없다.</p>\n</li>\n</ul>\n<h3 id=\"arm-상태-수행\" style=\"position:relative;\"><a href=\"#arm-%EC%83%81%ED%83%9C-%EC%88%98%ED%96%89\" aria-label=\"arm 상태 수행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM 상태 수행</h3>\n<ul>\n<li>데이터 작업의 결과에 대해 CPSR의 ALU 상태 플래그를 업데이트 한다.</li>\n<li>플래그를 업데이트 하지 않고 다른 여러 데이터 작업을 실행한다.</li>\n<li>첫 번째 작업에서 업데이트 된 플래그의 상태에 따라 다음 명령을 실행하거나 실행하지 않는다.</li>\n<li>Thumb 상태에서 대부분의 데이터 작업은 항상 플래그를 업데이트하며 조건부 실행은 조건부 분기 명령어 (<code class=\"language-text\">B</code>) 를 사용해야 만 수행 가능 해당 명령어의 접미사는 ARM 상태와 동일하며 다른 명령은 조건부일 수 없다.</li>\n</ul>\n<h2 id=\"alu-status-flags\" style=\"position:relative;\"><a href=\"#alu-status-flags\" aria-label=\"alu status flags permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ALU Status Flags</h2>\n<ul>\n<li>CPSR에는 ALU 상태 플래그가 포함된다.</li>\n<li>CPSR 레지스터에 condition Flag에 정보에 맞춰서 분기</li>\n<li>ARM의 모든 명령은 조건 필드를 가지고 있고, 조건에 따라 실행 여부를 결정한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABz0lEQVQY02O4bD3t10XP2W+vu8z6vker6byminuSuXVjkqqqS5KEgkWCjpJT2nHZuvuXpBq/XNbu+nDJddaHM6od7y6IN345LFV9m5FVXsTVNozh////YMxQV/X8f1HOjf+FOY//x0es+6+i4vc/Jubof0lZh/88glr/hUVN/0cHHfpflHf/f27Gzf+FOTf/11Xe+d/W9OR/Zvy+/1JSlgH///9nnDR5Ec/////ZGIIDVr3zcJ3z3ttj6Qc3h+6nauo+tz295r+UkXe8IiSmf1VS2vKGt+us9/4+K957uy/+4Oe15k5o4PrrUWFbbgR4zLlpYxc6MyO7OnnylAU2////V2NwcQos1dN16Le18e4JDU4IVNe2U3H3iijLzpvMkJhUw5qSXioYFpbU6usd0RQemtTrbm4gwwABbFDMxMDAwwj3cm3jBNfE1HK/zNz6wK7eOYZBoRkCU6Yu9umfOJvB2jacYdXqrWyNLZNDaxr6g6rrelMmz97IH+buyoAMpGTNEGFoYRnEwcDAwBobV8jV1TWTg4FBgMnZNYYDpnje/FVM+/YdE5oyZSHPzl0HTQ8cOMnz//83hqSIHkZLrQwGDW1nhrjEQobM7CqwgQA0pcsbNMOf0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./ARM-CPSR.png\"\n        title=\"./ARM-CPSR.png\"\n        src=\"/static/b4f9de9b7908179611816da8632106ac/37523/ARM-CPSR.png\"\n        srcset=\"/static/b4f9de9b7908179611816da8632106ac/e9ff0/ARM-CPSR.png 180w,\n/static/b4f9de9b7908179611816da8632106ac/f21e7/ARM-CPSR.png 360w,\n/static/b4f9de9b7908179611816da8632106ac/37523/ARM-CPSR.png 720w,\n/static/b4f9de9b7908179611816da8632106ac/302a4/ARM-CPSR.png 1080w,\n/static/b4f9de9b7908179611816da8632106ac/07a9c/ARM-CPSR.png 1440w,\n/static/b4f9de9b7908179611816da8632106ac/6789f/ARM-CPSR.png 2599w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>N flag : 연산 결과가 음수 일때 설정</li>\n<li>Z Flag : 연산결과가 0 일때 설정</li>\n<li>C Flag : 작업 결과 캐리가 발생하면 설정된다.\n<ul>\n<li>덧셈 결과가 2^32 이상이거나 뺄셈 결과가 양수인 경우 또는 이동 또는 논리적 명령에서 인라인 배럴 시프터 작업의 결과로 캐기 가 발생함</li>\n</ul>\n</li>\n<li>V Flag : 작업으로 인해 OVerflow가 발생했을 떄 설정\n<ul>\n<li>더하기, 빼기 또는 비교의 결고과 2^31 보다 크거나 -2^31 보다 작은 경우 오버플로우가 발생한다.</li>\n</ul>\n</li>\n<li>Q Flag : ARM 아키텍처 v5E에 해당되며 고정 플래그이다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">\t접미사         \t플래그              \t      의미\n    EQ              Z Set                       같은\n    NE\t            Z clear                     같지 않음\n    CS<span class=\"token operator\">/</span>HS\t          C Set                       높거나 같음 <span class=\"token punctuation\">(</span>Unsigned<span class=\"token operator\">></span> <span class=\"token operator\">=</span><span class=\"token punctuation\">)</span>\n    CC<span class=\"token operator\">/</span>LO\t          C clear                     낮은 <span class=\"token punctuation\">(</span>Unsigned <span class=\"token operator\">&lt;</span><span class=\"token punctuation\">)</span>\n    MI\t            N Set                       부정\n    PL\t            N clear                     양수 <span class=\"token operator\">or</span> <span class=\"token number\">0</span>\n    VS\t            V Set                       Overflow\n    VC\t            V clear                     No Overflow\n    HI\t            C set <span class=\"token operator\">and</span> Z clear\t          더 높음 <span class=\"token punctuation\">(</span>Unsigned<span class=\"token operator\">></span><span class=\"token punctuation\">)</span>\n    LS\t            C clear <span class=\"token operator\">or</span> Z set\t          낮거나 같음 <span class=\"token punctuation\">(</span>Unsigned <span class=\"token operator\">&lt;=</span><span class=\"token punctuation\">)</span>\n    GE\t            N <span class=\"token operator\">and</span> V the same\t          Signed <span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n    LT\t            N <span class=\"token operator\">and</span> V differ\t            Signed <span class=\"token operator\">&lt;</span>\n    GT\t            Z clear N <span class=\"token operator\">and</span> V the same\t  Signed <span class=\"token operator\">></span>\n    LE\t            Z set N <span class=\"token operator\">and</span> V differ\t      Signed <span class=\"token operator\">&lt;=</span>\n    AL\t            Any\t                        항상<span class=\"token punctuation\">.</span> 이 접미사는 일반적으로 생략됨</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">\t\tADD     r0<span class=\"token punctuation\">,</span> r1<span class=\"token punctuation\">,</span> r2    <span class=\"token punctuation\">;</span> r0 <span class=\"token operator\">=</span> r1 <span class=\"token operator\">+</span> r2<span class=\"token punctuation\">,</span> don<span class=\"token number\">'</span>t update flags\n    ADDS    r0<span class=\"token punctuation\">,</span> r1<span class=\"token punctuation\">,</span> r2    <span class=\"token punctuation\">;</span> r0 <span class=\"token operator\">=</span> r1 <span class=\"token operator\">+</span> r2<span class=\"token punctuation\">,</span> <span class=\"token operator\">and</span> update flags\n    ADDCSS  r0<span class=\"token punctuation\">,</span> r1<span class=\"token punctuation\">,</span> r2    <span class=\"token punctuation\">;</span> If C flag set then r0 <span class=\"token operator\">=</span> r1 <span class=\"token operator\">+</span> r2<span class=\"token punctuation\">,</span> <span class=\"token operator\">and</span> update flags\n    CMP     r0<span class=\"token punctuation\">,</span> r1        <span class=\"token punctuation\">;</span> update flags based on r0<span class=\"token operator\">-</span>r1<span class=\"token punctuation\">.</span></code></pre></div>\n<h3 id=\"arm-상태에서-조건부-실행\" style=\"position:relative;\"><a href=\"#arm-%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EC%A1%B0%EA%B1%B4%EB%B6%80-%EC%8B%A4%ED%96%89\" aria-label=\"arm 상태에서 조건부 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARM 상태에서 조건부 실행</h3>\n<ul>\n<li>arm 명령어의 조건부 실행을 사용하여 코드에서 분기 명령어 수를 줄 일 수 있으며 코드 밀도를 향상시킬 수 있음</li>\n<li>분기 명령어는 프로세서 주기에서도 비용이 많이 든다.</li>\n<li>분기 예측 하드웨어가 없는 ARM 프로세서에서는 일반적으로 분기가 수행될 때 마다 프로세서 파이프 라인을 다시 채우는 데 3개의 프로세서 주기가 필요하다.</li>\n<li>ARM10, StrongARM과 같은 일부 ARM 프로세서에는 분기 예측 하드웨어가 있다.</li>\n<li>이러한 프로세서를 사용하는 시스템에서는 잘못된 예측이 있을 때만 파이프 라인을 flushed 하고 다시 채우면 된다.</li>\n</ul>\n<h3 id=\"조건부-실행-연습\" style=\"position:relative;\"><a href=\"#%EC%A1%B0%EA%B1%B4%EB%B6%80-%EC%8B%A4%ED%96%89-%EC%97%B0%EC%8A%B5\" aria-label=\"조건부 실행 연습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>조건부 실행 연습</h3>\n<ul>\n<li>Euclid의 최대 공약수 (gcd) 알고리즘의 두 가지 구현을 사용한다.</li>\n<li>조건부 실행을 사용하여 코드 밀도와 실행 속도를 향상 시키는 방법을 보여준다.</li>\n<li>실행 속도에 대한 자세한 분석은 ARM7 프로세서에만 적용된다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> <span class=\"token function\">gcd</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> a<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> b<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">!=</span> b<span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">></span> b<span class=\"token punctuation\">)</span>\n\t\t\ta <span class=\"token operator\">-=</span> b<span class=\"token punctuation\">;</span>\n\t\tb <span class=\"token operator\">=</span><span class=\"token operator\">-</span> a<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> a<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>분기의 조건부 실행으로 gcd 함수 구현</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">gcd     CMP     r0<span class=\"token punctuation\">,</span> r1\n        BEQ     end\n        BLT     less\nless\n        SUB     r0<span class=\"token punctuation\">,</span> r0<span class=\"token punctuation\">,</span> r1\n        B       gcd\nend</code></pre></div>\n<ul>\n<li>\n<p>분기 수가 많기 때문에 코드는 7개의 명령어 길이이다.</p>\n</li>\n<li>\n<p>분기를 사용할 때마다 프로세서는 파이프 라인을 다시 채우고 새 위치에서 계속해야 한다.</p>\n</li>\n<li>\n<p>다른 명령어와 실행되지 않은 분기는 각각 단일 사이클을 사용해야 한다.</p>\n</li>\n<li>\n<p>ARM 명령어 집합의 조건부 실행 기능을 사용하여 다음 네 개의 명령어에서만 gcd 함수를 구현할 수 있다.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">gcd\n        CMP     r0<span class=\"token punctuation\">,</span> r1\n        SUBGT   r0<span class=\"token punctuation\">,</span> r0<span class=\"token punctuation\">,</span> r1\n        SUBLT   r1<span class=\"token punctuation\">,</span> r1<span class=\"token punctuation\">,</span> r0\n        BNE     gcd</code></pre></div>\n<ul>\n<li>코드 크기를 개선하는 것 외에도 해당 코드는 대부분의 경우 더 빠르게 실행된다.</li>\n<li>다음은 r0 : 1, r1: 2 인 경우 각 구현에서 사용된는 사이클 수를 확인할 수 있다.</li>\n<li>해당 경우 분기를 모든 명령어의 조건부 실행으로 바꾸면 세 사이클이 절약된다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">r0<span class=\"token operator\">:</span> a\tr1<span class=\"token operator\">:</span> b\tInstruction\t<span class=\"token function\">Cycles</span> <span class=\"token punctuation\">(</span>ARM7<span class=\"token punctuation\">)</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">2</span>\tCMP r0<span class=\"token punctuation\">,</span> r1\t<span class=\"token number\">1</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">2</span>\tBEQ end\t<span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">not</span> executed<span class=\"token punctuation\">)</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">2</span>\tBLT less\t<span class=\"token number\">3</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">2</span>\tSUB r1<span class=\"token punctuation\">,</span> r1<span class=\"token punctuation\">,</span> r0\t<span class=\"token number\">1</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">2</span>\tB gcd\t<span class=\"token number\">3</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">1</span>\tCMP r0<span class=\"token punctuation\">,</span> r1\t<span class=\"token number\">1</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">1</span>\tBEQ end\t<span class=\"token number\">3</span>\nTotal <span class=\"token operator\">=</span> <span class=\"token number\">13</span>\n\nr0<span class=\"token operator\">:</span> a\tr1<span class=\"token operator\">:</span> b\tInstruction\t<span class=\"token function\">Cycles</span> <span class=\"token punctuation\">(</span>ARM7<span class=\"token punctuation\">)</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">2</span>\tCMP r0<span class=\"token punctuation\">,</span> r1\t<span class=\"token number\">1</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">2</span>\tSUBGT r0<span class=\"token punctuation\">,</span>r0<span class=\"token punctuation\">,</span>r1\t<span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">not</span> executed<span class=\"token punctuation\">)</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">1</span>\tSUBLT r1<span class=\"token punctuation\">,</span>r1<span class=\"token punctuation\">,</span>r0\t<span class=\"token number\">1</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">1</span>\tBNE gcd\t<span class=\"token number\">3</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">1</span>\tCMP r0<span class=\"token punctuation\">,</span>r1\t<span class=\"token number\">1</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">1</span>\tSUBGT r0<span class=\"token punctuation\">,</span>r0<span class=\"token punctuation\">,</span>r1\t<span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">not</span> executed<span class=\"token punctuation\">)</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">1</span>\tSUBLT r1<span class=\"token punctuation\">,</span>r1<span class=\"token punctuation\">,</span>r0\t<span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">not</span> executed<span class=\"token punctuation\">)</span>\n<span class=\"token number\">1</span>\t<span class=\"token number\">1</span>\tBNE gcd\t<span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">not</span> executed<span class=\"token punctuation\">)</span>\nTotal <span class=\"token operator\">=</span> <span class=\"token number\">10</span></code></pre></div>\n<ul>\n<li>연습 2</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">loop\n\t<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\tSUBS         r1<span class=\"token punctuation\">,</span> r1<span class=\"token punctuation\">,</span> #<span class=\"token number\">1</span>\n\tBNE          loop</code></pre></div>\n<ul>\n<li>\n<p>SUB 명령을 실행한 결과 Z flag가 SET 되면 명령 실행 suffix가 S 로 설정되어 있기떄문에 명령 실행결과를 CPSR 에 반영</p>\n</li>\n<li>\n<p>연습 3</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a1 <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nCMP     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0</span>\nMOVEQ   r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">1</span>\nBLEQ     func\n</code></pre></div>\n<ul>\n<li>연습 4</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a2 <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a2 <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>  x <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\nCMP     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">0</span>\nMOVEQ   r1<span class=\"token punctuation\">,</span> #<span class=\"token number\">0</span>\nMOVGT   r2<span class=\"token punctuation\">,</span> #<span class=\"token number\">1</span></code></pre></div>\n<ul>\n<li>연습 5</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a<span class=\"token operator\">==</span><span class=\"token number\">4</span> <span class=\"token operator\">||</span> a<span class=\"token operator\">==</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> x<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\nCMP     r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">4</span>\nCMPNE   r0<span class=\"token punctuation\">,</span> #<span class=\"token number\">10</span>\nMOVEQ   r1<span class=\"token punctuation\">,</span> #<span class=\"token number\">0</span></code></pre></div>\n<h2 id=\"calling-convention\" style=\"position:relative;\"><a href=\"#calling-convention\" aria-label=\"calling convention permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calling Convention</h2>\n<ul>\n<li>r0~r3 순서대로 인자를 저장</li>\n<li>인자가 4개 이상이면 스택을 사용한다.</li>\n<li>BL 명령으로 호출할 시 리턴주소는 LR 레지스터에 저장</li>\n<li>함수 리턴 값 반환은 r0 레지스터를 사용한다.</li>\n</ul>\n<h3 id=\"thumb-converting\" style=\"position:relative;\"><a href=\"#thumb-converting\" aria-label=\"thumb converting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thumb Converting</h3>\n<ul>\n<li>Thumb로 변환</li>\n<li><code class=\"language-text\">B</code>는 조건부로 실행할 수 있는 유일한 Thumb 명령어이다. gcd 알고리즘은 Thumb 코드의 조건부 분기로 작성되어야 한다.</li>\n<li>ARM 조건부 분기 구현과 마찬가지로 Thumb 코드에는 7개의 명령어가 필요하다.</li>\n<li>그러나 Thumb 명령어의 길이는 16비트에 불과하기 때문에 전체 코드 크기는 14바이트이다.</li>\n<li>16비트 메모리를 사용하는 시스템에서는 각 Thumb 명령어에 대해 하나의 메모리 액세스 만 필요하지만 각 ARM 명령어에는 두 번의 fetch가 필요하다.</li>\n<li>Thumb 버전이 두 번째 ARM 구현보다 빠르게 실행된다.</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#conditional-execution\">Conditional Execution</a></p>\n<ul>\n<li><a href=\"#arm-%EC%83%81%ED%83%9C-%EC%88%98%ED%96%89\">ARM 상태 수행</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#alu-status-flags\">ALU Status Flags</a></p>\n<ul>\n<li><a href=\"#arm-%EC%83%81%ED%83%9C%EC%97%90%EC%84%9C-%EC%A1%B0%EA%B1%B4%EB%B6%80-%EC%8B%A4%ED%96%89\">ARM 상태에서 조건부 실행</a></li>\n<li><a href=\"#%EC%A1%B0%EA%B1%B4%EB%B6%80-%EC%8B%A4%ED%96%89-%EC%97%B0%EC%8A%B5\">조건부 실행 연습</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#calling-convention\">Calling Convention</a></p>\n<ul>\n<li><a href=\"#thumb-converting\">Thumb Converting</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"February 09, 2021","title":"ARM Conditional Execution","categories":"ARM","author":"Zer0Luck","emoji":"🍜"},"fields":{"slug":"/arm-2/"}},"site":{"siteMetadata":{"siteUrl":"https://zer0luck.kr","comments":{"utterances":{"repo":"dnsdudrla97/dnsdudrla97.github.io"}}}}},"pageContext":{"slug":"/arm-0/","nextSlug":"/window_3_theori/","prevSlug":"/arm-2/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}