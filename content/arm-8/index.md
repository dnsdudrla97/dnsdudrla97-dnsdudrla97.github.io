---
emoji: ğŸ¥‘
title: ARM LDR Rd, =const (constant)
author: Zer0Luck
date: '2021-02-10 06:12:12'
categories: ARM
tags: ARM
---

# LDR Rd, =const

- `LDR Rd, =const` ì˜ì‚¬ ëª…ë ¹ì€ ë‹¨ì¼ ëª…ë ¹ì–´ì—ì„œ 32ë¹„íŠ¸ ìˆ«ì ìƒìˆ˜ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
- ì´ ì˜ì‚¬ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ MOV, MVN ëª…ë ¹ì–´ ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ìƒìˆ˜ë¥¼ ìƒì„±í•œë‹¤.

### LDR ì˜ì‚¬ëª…ë ¹ì€ íŠ¹ì • ìƒìˆ˜ì— ëŒ€í•´ ê°€ì¥ íš¨ìœ¨ì ì¸ ì½”ë“œë¥¼ ìƒì„±í•œë‹¤.

- MOV, MVN ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒìˆ˜ë¥¼ ìƒì„± í•  ìˆ˜ ìˆëŠ” ê²½ìš° ì–´ì…ˆë¸”ëŸ¬ëŠ” ì ì ˆí•œ ëª…ë ¹ì–´ë¥¼ ìƒì„±í•œë‹¤.
- MOV, MVN ëª…ë ¹ì–´ë¡œ ìƒìˆ˜ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ëŠ” ê²½ìš° ì–´ì…ˆë¸”ëŸ¬ëŠ” ë‹¤ìŒì„ ìˆ˜í–‰í•œë‹¤.
    - ê°’ì„ literal pool (ìƒìˆ˜ ê°’ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ì½”ë“œì— í¬í•¨ëœ ë©”ëª¨ë¦¬ì˜ ì¼ë¶€ì— ë°°ì¹˜í•œë‹¤.)
    - Literal poolì—ì„œ ìƒìˆ˜ë¥¼ ì½ëŠ” í”„ë¡œê·¸ë¨ ê¸°ì¤€ ì£¼ì†Œë¡œ LDR ëª…ë ¹ì–´ë¥¼ ìƒì„±í•œë‹¤.

```cpp
LDR      rn, [pc, #offset to literal pool]  ; load register n with one word
                                                ; from the address [pc + offset]
```

- ì–´ì…ˆë¸”ëŸ¬ì—ì„œ ìƒì„±í•œ LDR ëª…ë ¹ì–´ ë²”ìœ„ ë‚´ì— ë¦¬í„°ëŸ´ í’€ì´ ìˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•œë‹¤.

### Literal pools ë°°ì¹˜

- ì–´ì…ˆë¸”ëŸ¬ëŠ” ê° ì„¹ì…˜ì˜ ëì— ë¦¬í„°ëŸ´ í’€ì„ ë°°ì¹˜í•œë‹¤.
- ì´ë“¤ì€ ë‹¤ìŒ ì„¹ì…˜ì˜ ì‹œì‘ ë¶€ë¶„ì— ìˆëŠ” AREA instruction  ë˜ëŠ” ì–´ì…ˆë¸”ë¦¬ ëì— ìˆëŠ” END instruction ì˜í•´ ì •ì˜ëœë‹¤.
- í¬í•¨ëœ íŒŒì¼ ëì— ìˆëŠ” ENDëŠ” ì„¹ì…˜ì˜ ëì„ ì•Œë¦¬ì§€ ì•ŠëŠ”ë‹¤.
- í° ì„¹ì…˜ì—ì„œ ê¸°ë³¸ ë¦¬í„°ëŸ´ í’€ì€ í•˜ë‚˜ ì´ìƒì˜ LDR ëª…ë ¹ì–´ ë²”ìœ„ë¥¼ ë²—ì–´ë‚  ìˆ˜ ìˆë‹¤.
- PCì—ì„œ ìƒìˆ˜ê¹Œì§€ì˜ ì˜¤í”„ì…‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
    - ARM ìƒíƒœì—ì„œ 4KB ë¯¸ë§Œì´ì§€ë§Œ ì–´ëŠ ë°©í–¥ìœ¼ë¡œ ê°€ëŠ¥
    - Thumb ìƒíƒœì—ì„œ ì•ìœ¼ë¡œ 1KB ë¯¸ë§Œ

### LDR Rd, = const ì˜ì‚¬ ëª…ë ¹ì–´ì—ì„œ ìƒìˆ˜ë¥¼ ë¦¬í„°ëŸ´ í’€ì— ë°°ì¹˜í•´ì•¼ í•˜ëŠ” ê²½ìš° ì–´ì…ˆë¸”ëŸ¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

- ìƒìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê³  ì´ì „ ë¦¬í„°ëŸ´ í’€ì—ì„œ ì£¼ì†Œë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ë©° ê¸°ì¡´ ìƒìˆ˜ë¥¼ ì²˜ë¦¬í•œë‹¤.
- ìƒìˆ˜ë¥¼ ì•„ì§ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš° next literal poolì— ë°°ì¹˜í•˜ë ¤ê³  í•œë‹¤.

### next literal pool

- ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ê²½ìš° ì–´ì…ˆë¸”ëŸ¬ëŠ” ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ìƒì„±í•œë‹¤.
- í•´ë‹¹ ê²½ìš° LTORG instructionì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œì— ì¶”ê°€ ë¦¬í„°ëŸ´ í’€ì„ ë°°ì¹˜í•´ì•¼ í•œë‹¤.
- LTORGëŠ” ì‹¤íŒ¨í•œ LDR ì˜ì‚¬ ëª…ë ¹ì–´ ë’¤ì— 4KB(ARM) ë˜ëŠ” 1KB (Thumb) ë‚´ì— ë°°ì¹˜í•œë‹¤.

### LTORG Instruction

- ì–´ì…ˆë¸”ëŸ¬ëŠ” ëª¨ë“  ì½”ë“œ ì„¹ì…˜ì˜ ëì— í˜„ì¬ ë¦¬í„°ëŸ´ í’€ì„ ì–´ì…ˆë¸”í•œë‹¤.
- ì½”ë“œ ì„¹ì…˜ ëì€ AREA ë‹¤ìŒ ì„¹ì…˜ì˜ ì‹œì‘ ë¶€ë¶„ ë˜ëŠ” ì–´ì…ˆë¸”ë¦¬ì˜ ë ë¶€ë¶„ì— ìˆëŠ” ì§€ì‹œë¬¸ì— ì˜í•´ ê²°ì •ëœë‹¤.
- ì´ëŸ¬í•œ ê¸°ë³¸ ë¦¬í„°ëŸ´ í’€ì€ ë•Œë•Œë¡œ ì¼ë¶€ì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚  ìˆ˜ ìˆë‹¤. LDR, LDFD, LDFS ì˜ì‚¬ ëª…ë ¹ì–´
- LTORG ë¦¬í„°ëŸ´ í’€ì´ ë²”ìœ„ ë‚´ì—ì„œ ì–´ì…ˆë¸”ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.

### í”„ë¡œì„¸ì„œê°€ ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰ì„ ì‹œë„í•˜ì§€ ì•ŠëŠ” ê³³ì— ë¦¬í„°ëŸ´ í’€ì„ ë°°ì¹˜í•´ì•¼ í•œë‹¤.

- ë¬´ì¡°ê±´ ë¶„ê¸° ëª…ë ¹ì–´ ë’¤ì— ë°°ì¹˜í•˜ê±°ë‚˜ ì„œë¸Œ ë£¨í‹´ ëì— ë°˜í™˜ ëª…ë ¹ì–´ ë’¤ì— ë°°ì¹˜í•œë‹¤.

```cpp
AREA     Loadcon, CODE, READONLY
        ENTRY                              
start   BL       func1                     ; Branch ì²« ë²ˆì§¸ ì„œë¸Œë£¨í‹´
        BL       func2                     ; Branch ë‘ ë²ˆì§¸ ì„œë¸Œë£¨í‹´
stop    MOV      r0, #0x18                 ; angel_SWIreason_ReportException
        LDR      r1, =0x20026              ; ADP_Stopped_ApplicationExit
        SWI      0x123456                  ; ARM semihosting SWI
func1
        LDR      r0, =42                   ; => MOV R0, #42
        LDR      r1, =0x55555555           ; => LDR R1, [PC, #offset to
                                           ; Literal Pool 1]
        LDR      r2, =0xFFFFFFFF           ; => MVN R2, #0
        MOV      pc, lr
        LTORG                              ; Literal Pool 1 contains
                                           ; literal Ox55555555
func2
        LDR      r3, =0x55555555           ; => LDR R3, [PC, #offset to
                                           ; Literal Pool 1]
        ; LDR r4, =0x66666666              ; ë§Œì•½ì— ì£¼ì„ ì²˜ë¦¬ê°€ ì•„ë‹ˆë¼ë©´
                                           ; ì‹¤íŒ¨í•œë‹¤. ì™œëƒí•˜ë©´ ë‘ ê°œì˜ ë¦¬í„°ëŸ´ í’€ì´ê¸° ë•Œë¬¸
                                           ; ë²”ìœ„ì— ë²—ì–´ë‚œë‹¤.
        MOV      pc, lr
LargeTable
        SPACE    4200                      ; Starting at the current location,
                                           ; clears a 4200 byte area of memory
                                           ; to zero
        END                                ; Literal Pool 2 is empty
```

```toc
```